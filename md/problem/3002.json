{"title":"「JOISC 2015 Day 3」Card Game Is Great Fun","time_limit":3000,"memory_limit":1024,"tags":["2015","JOISC","DP"],"operation":{"submit":"https://loj.ac/problem/3002#submit_code","submissions":"https://loj.ac/submissions?problem_id=3002","statistics":"https://loj.ac/problem/3002/statistics/fastest","testdata":"https://loj.ac/problem/3002/testdata","discussion":"https://loj.ac/discussion/problem/3002"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [JOISC 2015](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/index.html) Day3 T2「[Card Game Is Great Fun](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/2015-sp-d3.pdf)」。**\r\n\r\n有 $ N $ 张扑克堆成一个栈，从上往下第 $ i $ 张花色是 $ C_i $，点数是 $ A_i $，价值是 $ V_i $。有这样一个操作，每次可以选择拿走从上往下第 $ 1 $ 张或者第 $ 3 $ 张，拿走的牌必须和上一次拿走的花色或者点数一样。\r\n\r\n请问如何拿牌，才能使得拿出来的牌的价值和最大。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含一个整数 $ N $，表示牌的个数。\r\n\r\n接下来 $ N $ 行，第 $ i $ 行包含三个整数 $ C_i $，$ A_i $ 和 $ V_i $，表示从上往下第 $ i $ 张花色是 $ C_i $，点数是 $ A_i $，价值是 $ V_i $。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个整数表示最大价值和。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5\r\n1 3 2\r\n4 2 9\r\n1 4 6\r\n2 3 3\r\n2 2 1\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n15\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n我们用 $ (c, a, v) $ 表示花色为 $ c $，点数为 $ a $，价值为 $ v $ 的牌。那么最优的操作序列如下：\r\n\r\n1. 选第 $ 1 $ 张牌 $ (1, 3, 2) $，得到分数为 $ 2 $。\r\n2. 选第 $ 3 $ 张牌 $ (2, 3, 3) $，得到分数为 $ 3 $。\r\n3. 选第 $ 3 $ 张牌 $ (2, 2, 1) $，得到分数为 $ 1 $。\r\n4. 选第 $ 1 $ 张牌 $ (4, 2, 9) $，得到分数为 $ 9 $。\r\n\r\n\r\n#### 样例输入 2\r\n```plain\r\n8\r\n11 5 31\r\n2 8 19\r\n2 9 2\r\n11 8 45\r\n4 8 22\r\n4 2 23\r\n6 9 58\r\n6 2 5\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n160\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，满足 $ 1 \\le N \\le 500, 1 \\le C_i, A_i \\le 500, 1 \\le V_i \\le 10^6$。\r\n\r\n本题共有 $ 3 $ 个子任务。每个子任务的分数和附加限制如下：\r\n\r\n| Subtask | 附加限制 | 分数 |\r\n|:-------:|:-------:|:---:|\r\n| 1 | $ N \\le 20 $ | 10 |\r\n| 2 | $ N \\le 50 $ | 15 |\r\n| 3 | 无附加限制 | 75 |\r\n"}]}