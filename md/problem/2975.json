{"title":"「COI 2010」LOZA","time_limit":700,"memory_limit":32,"tags":["2010","COCI"],"operation":{"submit":"https://loj.ac/problem/2975#submit_code","submissions":"https://loj.ac/submissions?problem_id=2975","statistics":"https://loj.ac/problem/2975/statistics/fastest","testdata":"https://loj.ac/problem/2975/testdata","discussion":"https://loj.ac/discussion/problem/2975"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [COI 2010](http://hsin.hr/coci/archive/2009_2010/) T3.** ***[LOZA](http://hsin.hr/coci/archive/2009_2010/olympiad_tasks.pdf)***\r\n\r\n科学家在南极洲上发现了一个新物种！他们提取了一个样本并带回实验室检测。\r\n\r\n他们很快发现这个物种繁殖十分频繁，并且繁殖时只需要一个亲本。然而在该亲本繁殖两次后，它就失去了繁殖能力，不能继续繁殖了。\r\n\r\n因此，实验室中样本的数量猛增，对家谱的需求也出现了。\r\n\r\n他们决定用简单的文本编辑器，按照以下约定绘制家谱树：\r\n\r\n样本名用 `-`，`|` 和 `o` 组成的盒型框框起来。上下边界的中心点用 `+` 标出。如果边界长度为偶数，则 `+` 标在左侧中心点处。\r\n\r\n![loza1.png](https://loj-img.upyun.menci.memset0.cn/2020/01/28/5e2ff8ecbb1cb.png)\r\n\r\n这些框会用线进行连接。一条线会连接两个或更多框，连接点位于 `+` 处。亲代位于上方，子代位于下方，框和线不能重叠。\r\n\r\n![loza2.png](https://loj-img.upyun.menci.memset0.cn/2020/01/28/5e2ff8ed0a295.png)\r\n\r\n如果亲本只有一个子代，则用一个点到点的线进行连接（如最左图），如果有两个子代，则用一条分支线进行连接，**较老的子代放在左侧，较新的子代放在右侧**。\r\n\r\n只要左右两侧 `-` 的个数相等，分支线就可以横向延长，**但是不能纵向延长**。\r\n\r\n别担心，现在你不需要画出整个家谱树。你只需要求出画出这棵家谱树中需要字符的个数。**空格字符不需要被记入**，只需要计算 `-`，`|`，`+`，`o` 和名字中的字母的个数即可。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含一个正整数 $N$，表示实验室中样本的个数；\r\n\r\n样本按出生顺序从 $1$ 到 $N$ 编号，最老的样本编号为 $1$，最新的样本编号为 $N$；\r\n\r\n接下来 $N$ 行，按出生顺序给出所有样本的信息，每行包含一个字符串和一个数字，分别表示该样本的名称和样本的亲本编号。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数，表示绘制这棵家谱树最少要用到的字符数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3\r\nadam\r\nkain 1\r\nabel 1\r\n```\r\n#### 样例输出 1\r\n```plain\r\n64\r\n```\r\n#### 样例说明 1\r\n\r\n![loza3.png](https://loj-img.upyun.menci.memset0.cn/2020/01/28/5e2ff8ed68ba4.png)\r\n\r\n#### 样例输入 2\r\n```plain\r\n12\r\n12\r\nanton\r\nana 1\r\nluka 1\r\nmia 2\r\ntea 3\r\njakov 3\r\nsemiramida 5\r\ndominik 5\r\nanamarija 4\r\neustahije 4\r\nlovro 2\r\nlovro 11\r\n```\r\n#### 样例输出 2\r\n```plain\r\n371\r\n```\r\n#### 样例说明 2\r\n\r\n![loza4.png](https://loj-img.upyun.menci.memset0.cn/2020/01/28/5e2ff8ed36ae6.png)"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $50$ 分的数据，$N<30$；\r\n\r\n对于 $75$ 分的数据，$N<3\\times 10^3$；\r\n\r\n对于全部数据，$1\\le N\\le 3\\times 10^5$，样本名称长度不超过 $20$。"}]}