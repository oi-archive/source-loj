{"title":"「ZJOI2016」大森林","time_limit":1000,"memory_limit":256,"tags":["2016","ZJOI","Link-Cut Tree","树上差分"],"operation":{"submit":"https://loj.ac/problem/2092#submit_code","submissions":"https://loj.ac/submissions?problem_id=2092","statistics":"https://loj.ac/problem/2092/statistics/fastest","testdata":"https://loj.ac/problem/2092/testdata","discussion":"https://loj.ac/discussion/problem/2092"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"小 Y 家里有一个大森林，里面有 $n$ 棵树，编号从 $1$ 到 $n$。一开始这些树都只是树苗，只有一个节点，标号为 $1$。这些树都有一个特殊的节点，我们称之为生长节点，这些节点有生长出子节点的能力。小 Y 掌握了一种魔法，能让第 $l$ 棵树到第 $r$ 棵树的生长节点长出一个子节点。同时她还能修改第 $l$ 棵树到第 $r$ 棵树的生长节点。她告诉了你她使用魔法的记录，你能不能管理她家的森林，并且回答她的询问呢？"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含两个正整数 $n,m$，表示共有 $n$ 棵树和 $m$ 个操作。\r\n\r\n接下来 $m$ 行，每行包含若干非负整数表示一个操作，操作格式为：\r\n\r\n``0 l r`` 表示将第 $l$ 棵树到第 $r$ 棵树的生长节点下面长出一个子节点，子节点的标号为上一个 $0$ 号操作叶子标号加 $1$（例如，第一个 $0$ 号操作产生的子节点标号为 $2$）， $l$ 到 $r$ 之间的树长出的节点标号都相同。保证 $1 \\leq l \\leq r \\leq n$ 。\r\n\r\n``1 l r x`` 表示将第 $l$ 棵树到第 $r$ 棵树的生长节点改到标号为 $x$ 的节点。对于 $i$ $(l \\leq i \\leq r)$ 这棵树，如果标号 $x$ 的点不在其中，那么这个操作对该树不产生影响。保证 $1 \\leq l \\leq r \\leq n$ ， $x$ 不超过当前所有树中节点最大的标号。\r\n\r\n``2 x u v`` 询问第 $x$ 棵树中节点 $u$ 到节点 $v$ 点的距离，也就是在第 $x$ 棵树中从节点 $u$ 和节点 $v$ 的最短路上边的数量。保证 $1 \\leq x \\leq n$，这棵树中节点 $u$ 和节点 $v$ 存在。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出包括若干行，按顺序对于每个小 Y 的询问输出答案"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5\r\n0 1 5\r\n1 2 4 2\r\n0 1 4\r\n2 1 1 3\r\n2 2 1 3\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n1\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$N \\leq 10^5, \\ M \\leq 2 \\times 10^5$"}]}