{"title":"「ZJOI2020」字符串","time_limit":3000,"memory_limit":512,"tags":["ZJOI","2020","字符串"],"operation":{"submit":"https://loj.ac/problem/3311#submit_code","submissions":"https://loj.ac/submissions?problem_id=3311","statistics":"https://loj.ac/problem/3311/statistics/fastest","testdata":"https://loj.ac/problem/3311/testdata","discussion":"https://loj.ac/discussion/problem/3311"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"Bob 喜欢字符串。\r\n\r\nBob 觉得，重复两遍的字符串是优美的，例如，`aa`、`sese`、`abcabc`、`baabaa`、`abababab` 是优美的串，而 `ab`、`aadead`、`sesese`、`abba` 不是。更具体地说，如果一个字符串 $S$ 能够被写成两个相同的字符串前后拼接的形式，即存在字符串 $P$ 使得 $S = PP$，那么 $S$ 就是优美的。\r\n\r\nBob 有一个长度为 $n$ 的字符串 $T = T_1 T_2 \\cdots T_n$。现在他想知道，给定 $T$ 的一个子串 $Q = T[l \\dots r]$，这个子串 $Q$ 内一共包含多少种本质不同的优美的串作为子串。如果两个串相同，但是出现的位置不同，那么这两个串不是本质不同。\r\n\r\nBob 一共有 $q$ 组不同的询问，你需要快速计算出答案。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行输入两个整数 $n, q$。第二行输入一个只包含小写字母 $a$ 和 $b$ 的字符串 $T$。\r\n\r\n接下来 $q$ 行，每行输入两个整数 $l, r$，表示一组询问。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $q$ 行，每行一个整数表示答案。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n11 5\r\naabaabaaaab\r\n1 11\r\n1 6\r\n7 10\r\n5 5\r\n3 8\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n5\r\n2\r\n2\r\n0\r\n2\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n$|T|$ 有 `aa`、`aaaa`、`abaaba`、`aabaab`、`baabaa` 这些本质不同的优美的串。\r\n\r\n#### 样例 2\r\n\r\n见附加文件中 `string2.in` 与 `string2.out`。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于前 $10\\%$ 的数据，$n\\le 100$。\r\n\r\n对于前 $20\\%$ 的数据，$n\\le 500$。\r\n\r\n对于前 $40\\%$ 的数据，$n\\le 5000$。\r\n\r\n对于另外 $20\\%$ 的数据，保证 $T$ 中所有的优美的串的个数不超过 $10^6$，这里位置不同的串被视为不同的。\r\n\r\n对于另外 $20\\%$ 的数据，$q = 1$。\r\n\r\n对于 $100\\%$ 的数据，$1\\le n, q\\le 2\\times 10^5, 1\\le l\\le r\\le n$，$T$ 只包含小写字母 `a` 和 `b`。\r\n"}]}