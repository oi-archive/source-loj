{"title":"「JOISC 2016 Day 3」回转寿司","time_limit":9000,"memory_limit":256,"tags":["2016","JOISC","分块及按大小分类","堆"],"operation":{"submit":"https://loj.ac/problem/2736#submit_code","submissions":"https://loj.ac/submissions?problem_id=2736","statistics":"https://loj.ac/problem/2736/statistics/fastest","testdata":"https://loj.ac/problem/2736/testdata","discussion":"https://loj.ac/discussion/problem/2736"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOISC 2016](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/index.html) Day3 T2 「[回転寿司](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/2016-sp-d3.pdf)」**  \r\n\r\n给出一个有 $N$ 个点的环，环上各点有一个初始权值 $a_i$。\r\n\r\n给出 $Q$ 个询问，每次询问给出一个区间 $[l,r]$ 和一个值 $A$ ，对于 $A$ 的变动定义如下（$r$ 可能会小于 $l$ 因为是**环形**）：   \r\n```CPP\r\nfor (int i = l; i <= r; i++) if(a[i] > A) swap(a[i],A);\r\n```  \r\n\r\n对于每个询问，回答遍历完区间 $[l,r]$ 后 $A$ 的最终值。\r\n\r\n注：我们按逆时针方向在环上编号，并规定 $[l,r]$ 为从位置编号为 $l$ 的点逆时针遍历至位置编号为 $r$ 的点所经过点的集合。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包括两个数 $N$ 与 $Q$ 表示环的大小和询问的个数；  \r\n之后的 $N$ 行每行为一个整数，第 $i$  个为 $a_i$；   \r\n之后的 $Q$ 行每行有三个整数 $l_i$ 、$r_i$ 、$A_i$，表示如上所示。  \r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出包括 $Q$ 行，每行包括一个数，为变动结束后 $A_i$  的值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1  \r\n```PLAIN\r\n6 7\r\n8\r\n6\r\n7\r\n4\r\n5\r\n9\r\n2 4 5\r\n4 1 4\r\n6 2 7\r\n1 5 2\r\n3 4 8\r\n4 3 1\r\n3 1 3\r\n```\r\n\r\n#### 样例输出 1    \r\n```PLAIN\r\n7\r\n9\r\n8\r\n7\r\n8\r\n6\r\n5\r\n```\r\n\r\n#### 样例解释 1 \r\n第一回后，$a$ 数组长这样：$8, 5, 6, 4, 5, 9$，此时 $A=7$；  \r\n第二回后，$a$ 数组长这样：$8, 5, 6, 4, 4, 5$，此时 $A=9$；  \r\n第三回后，$a$ 数组长这样：$7, 5, 6, 4, 4, 5$，此时 $A=8$；  \r\n第四回后，$a$ 数组长这样：$2, 5, 6, 4, 4, 5$，此时 $A=7$；  \r\n第五回后，$a$ 数组长这样：$2, 5, 6, 4, 4, 5$，此时 $A=8$；  \r\n第六回后，$a$ 数组长这样：$2, 5, 5, 1, 4, 4$，此时 $A=6$；  \r\n第七回后，$a$ 数组长这样：$2, 5, 3, 1, 4, 4$，此时 $A=5$；  \r\n\r\n#### 样例输入 2  \r\n```PLAIN\r\n4 2\r\n5\r\n2\r\n4\r\n7\r\n1 4 3\r\n1 4 1\r\n```\r\n\r\n#### 样例输出 2    \r\n```PLAIN\r\n7\r\n5\r\n```\r\n\r\n#### 样例输入 3  \r\n```PLAIN\r\n10 10\r\n19\r\n5\r\n8\r\n17\r\n14\r\n3\r\n9\r\n10\r\n7\r\n6\r\n1 8 4\r\n7 3 2\r\n5 9 10\r\n4 8 3\r\n10 3 6\r\n8 7 4\r\n6 6 3\r\n2 9 12\r\n6 3 7\r\n9 6 3\r\n```\r\n\r\n#### 样例输出 3    \r\n```PLAIN\r\n19\r\n10\r\n14\r\n17\r\n8\r\n10\r\n3\r\n12\r\n7\r\n9\r\n```\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部的数据，$1 \\leq N \\leq 4\\times 10^{5} ,1 \\leq Q \\leq 25000 ,1 \\leq a_i \\leq 10^{9},1 \\leq l,r \\leq N,1 \\leq A \\leq 10^{9} $。\r\n\r\n具体子任务限制及得分情况如下表：\r\n\r\n| Subtask |      限制      | 分数 |\r\n| :-----: | :------------: | :--: |\r\n|   $1$   | $1 \\leq N \\leq 2000 $,$1 \\leq Q \\leq 2000 $ | $5$ |\r\n|   $2$   | $l=1,r=N$ | $15$ |\r\n|   $3$   | 无追加限制 | $80$ |"}]}