{"title":"「BalticOI 2013」Ball Machine","time_limit":1000,"memory_limit":128,"tags":["2013","BalticOI"],"operation":{"submit":"https://loj.ac/problem/2682#submit_code","submissions":"https://loj.ac/submissions?problem_id=2682","statistics":"https://loj.ac/problem/2682/statistics/fastest","testdata":"https://loj.ac/problem/2682/testdata","discussion":"https://loj.ac/discussion/problem/2682"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有一个装球机器，构造可以看作是一棵树。有下面两种操作：\r\n\r\n从根放入一个球，只要下方有空位，球会沿着树滚下。如果同时有多个点可以走，那么会选择编号最小的节点所在路径的方向。比如依次在树根 $4$ 放 $2$ 个球，第一个球会落到 $1$，第二个会落到 $3$：\r\n\r\n![](https://i.loli.net/2018/06/02/5b1263891c117.jpg)\r\n\r\n从某个位置拿走一个球，那么它上方的球会落下来。比如依次拿走 $5, 7, 8$ 三个球：\r\n\r\n![](https://i.loli.net/2018/06/02/5b1263891c117.jpg)"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行：球的个数 $N$，操作个数 $Q(N, Q \\le 10^5)$\r\n\r\n下面 $N$ 行：第 $i$ 个节点的父亲。如果是根，则为 $0$\r\n\r\n接下来 $Q$ 行：`op num`\r\n\r\n1. $op = 1$：在根放入 `num` 个球\r\n2. $op = 2$：拿走在位置 `num` 的球"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"保证输入合法\r\n\r\n1. $op = 1$：输出最后一个球落到了哪里\r\n2. $op = 2$：输出拿走那个球后有多少个球会掉下来"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n8 4\r\n0\r\n1\r\n2\r\n2\r\n3\r\n3\r\n4\r\n6\r\n1 8\r\n2 5\r\n2 7\r\n2 8\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n1\r\n3\r\n2\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $25\\%$ 的数据，每个节点有 $0$ 或 $2$ 个儿子，且所有叶子节点到根的距离相同。\r\n\r\n对于另外 $30\\%$ 的数据，操作 $2$ 不会使球落下。\r\n\r\n对于另外 $40\\%$ 的数据，只有一个操作 $1$，并且是第一个操作。\r\n\r\n对于所有数据，$N, Q \\le 100\\ 000$.\r\n\r\n翻译来自 abcdabcd987。"}]}