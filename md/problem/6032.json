{"title":"「雅礼集训 2017 Day2」水箱","time_limit":1000,"memory_limit":256,"tags":["2017","雅礼集训","线段树","树形 DP","DP"],"operation":{"submit":"https://loj.ac/problem/6032#submit_code","submissions":"https://loj.ac/submissions?problem_id=6032","statistics":"https://loj.ac/problem/6032/statistics/fastest","testdata":"https://loj.ac/problem/6032/testdata","discussion":"https://loj.ac/discussion/problem/6032"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给出一个长度为 $ n $ 宽度为 $ 1 $，高度无限的水箱，有 $ n - 1 $ 个挡板将其分为 $ n $ 个 1 - 1 的小格，然后向每个小格中注水，水如果超过挡板就会溢出到挡板的另一边，这里的水是满足物理定律的（在无挡板阻拦的情况下会向低处流），现在有 $ m $ 个条件 $ (i, y, k) $，表示从左到右数的第 $ i $ 个格子中，在高度为 $ y + 0.5 $ 的地方是否有水，$ k = 1 $ 表示有水，$ k = 0 $ 表示没有水，请求出这 $ m $ 个条件最多能同时满足多少个条件。本题有多组数据。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个正整数 $ T $，为数据组数。  \r\n第二行两个正整数 $ n $、$ m $，中间用空格隔开。  \r\n接下来一行 $ n - 1 $ 个整数，表示从左到右每一块隔板的高度。  \r\n接下来 $ m $ 行，每行三个整数 $ i $、$ y $、$ k $，表示一个条件。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共 $ T $ 行，每行对应一组数据的答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n2\r\n3 4\r\n3 4\r\n1 3 1\r\n2 1 0\r\n2 2 0\r\n3 3 1\r\n2 2\r\n2\r\n1 2 0\r\n1 2 1\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n3\r\n1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 20\\% $ 的数据，$ n, m \\leq 16 $；  \r\n对于另外 $ 10\\% $ 的数据，只存在指明某处有水的条件；  \r\n对于另外 $ 30\\% $ 的数据，$ n, m \\leq 1000 $；  \r\n对于 $ 100\\% $ 的数据，$ n, m \\leq 10 ^ 5, T \\leq 5 $。"}]}