{"title":"「JXOI2017」数列","time_limit":1500,"memory_limit":512,"tags":["2017","JXOI","组合计数","数学","DP","递推"],"operation":{"submit":"https://loj.ac/problem/2273#submit_code","submissions":"https://loj.ac/submissions?problem_id=2273","statistics":"https://loj.ac/problem/2273/statistics/fastest","testdata":"https://loj.ac/problem/2273/testdata","discussion":"https://loj.ac/discussion/problem/2273"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"九条可怜手上有一个长度为 $n$ 的整数数列 $r_i$ ，她现在想要构造一个长度为 $n$ 的，满足如下条件的整数数列 $A$：\r\n\r\n* $1\\leq  A_i \\leq r_i$。\r\n* 对于任意 $3 \\leq i \\leq n$，令 $R$ 为 $A_1$ 至 $A_{i-2}$ 中大于等于 $A_{i-1}$ 的最小值，$L$ 为 $A_1$ 至 $A_{i-2}$ 中小于等于 $A_{i-1}$ 的最大值。$A_i$ 必须满足 $L \\leq A_i \\leq R$。如果不存在大于等于 $A_{i-1}$ 的，那 么 $R = +\\infty$；如果不存在小于等于 $A_{i-1}$ 的，那么 $L = −\\infty$。\r\n\r\n现在可怜想要知道共有多少不同的数列满足这个条件。两个数列 $A$ 和 $B$ 是不同的当且仅当至少存在一个位置 $i$ 满足 $A_i \\neq B_i$。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行输入一个整数 $n$，第二行输入 $n$ 个整数 $r_i$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个整数表示方案数，答案可能很大，对 $998244353$ 取模后输出。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n3\r\n2 2 2\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n6\r\n```\r\n\r\n#### 样例解释\r\n满足条件的序列有 $[1, 1, 1], [1, 2, 1], [1, 2, 2], [2, 1, 1], [2, 1, 2], [2, 2, 2]$ 。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"<!-- BEGIN: Migrated markdown table -->\n\n| 测试点编号 | $n$ | $r_i$ |\n|:-:|:-:|:-:|\n| $1$ | $\\leq 7$ | $\\leq 7$ |\n| $2$ | $\\leq 7$ | $\\leq 7$ |\n| $3$ | $\\leq 50$ | $\\leq 10$ |\n| $4$ | $\\leq 50$ | $\\leq 10$ |\n| $5$ | $\\leq 50$ | $\\leq 16$ |\n| $6$ | $\\leq 50$ | $\\leq 16$ |\n| $7$ | $\\leq 50$ | $\\leq 50$ |\n| $8$ | $\\leq 50$ | $\\leq 50$ |\n| $9$ | $\\leq 50$ | $\\leq 150$ |\n| $10$ | $\\leq 50$ | $\\leq 150$ |\n\n<!-- Migrated from original HTML table:\n<table><thead>\r\n\t<tr>\r\n\t\t<th style='text-align:center'>测试点编号</th>\r\n\t\t<th style='text-align:center'> $n$ </th>\r\n\t\t<th style='text-align:center'> $r_i$ </th>\r\n\t</tr></thead><tbody>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $1$ </td>\r\n\t\t<td rowspan=2 style='text-align:center'> $\\leq 7$ </td>\r\n\t\t<td rowspan=2 style='text-align:center'> $\\leq 7$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $2$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $3$ </td>\r\n\t\t<td rowspan=8 style='text-align:center'> $\\leq 50$ </td>\r\n\t\t<td rowspan=2 style='text-align:center'> $\\leq 10$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $4$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $5$ </td>\r\n\t\t<td rowspan=2 style='text-align:center'> $\\leq 16$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $6$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $7$ </td>\r\n\t\t<td rowspan=2 style='text-align:center'> $\\leq 50$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $8$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $9$ </td>\r\n\t\t<td rowspan=2 style='text-align:center'> $\\leq 150$ </td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td style='text-align:center'> $10$ </td>\r\n\t</tr></tbody>\r\n</table>\n-->\n\n<!-- END: Migrated markdown table -->\r\n\r\n对于全部数据，保证 $n\\ge 1,r_i\\ge 1$。"}]}