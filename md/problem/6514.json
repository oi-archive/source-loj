{"title":"「雅礼集训 2018 Day10」文明","time_limit":2000,"memory_limit":512,"tags":["雅礼集训","2018","DFS 序","图论"],"operation":{"submit":"https://loj.ac/problem/6514#submit_code","submissions":"https://loj.ac/submissions?problem_id=6514","statistics":"https://loj.ac/problem/6514/statistics/fastest","testdata":"https://loj.ac/problem/6514/testdata","discussion":"https://loj.ac/discussion/problem/6514"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"《文明》是一款流行的回合制策略游戏。游戏中玩家建立起一个帝国，并接受时间的考验。玩家将创建及带领自己的文明从石器时代迈向信息时代，并成为世界的领导者。在尝试建立起世界上赫赫有名的伟大文明的过程中，玩家将启动战争、实行外交、促进文化，同时正面对抗历史上的众多领袖。在游戏中，每个玩家都有一个属于自己的国家，随着时代更迭，国家的疆土也会越来越大，最后所有的国家将最终把整个游戏地图占领。\r\n\r\n整个游戏地图是 $n$ 个结点的树，要在这个地图上进行 $q$ 次游戏，每次有 $k$ 个玩家，每个玩家的国家一开始的领土只有一个点 $a_1, a_2, ..., a_k$，保证每个点两两不同。然后 $1, 2, ..., k$ 号玩家轮流进行一个回合，每个回合可以对国家疆土上的所有节点进行距离为 $1$ 的扩展，如果扩展到不属于任何其他国家的节点，则将这个点划入自己国家的疆土。如此往复，直到所有的节点都被某个国家占领。\r\n\r\n黈 (tǒu) 力最近沉迷于《文明》无法自拔，他想问问你他的国家能占领多大的游戏地图。由于黈力是 STEAM 上的黄金会员，所以他每次都是 $1$ 号玩家，即他每次都是第一个进行回合的。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行输入两个整数 $n, q$，分别表示游戏地图的节点数和游戏数。\r\n\r\n接下来 $n - 1$ 行，每行输入两个整数 $x, y$，表示游戏地图中有连边 $x, y$，保证游戏地图是一棵无重边无自环的树。\r\n\r\n接下来 $q$ 行，每行先输入一个整数 $k_i$，表示第 $i$ 局游戏有 $k_i$ 个玩家。\r\n\r\n接下来 $k_i$ 个数 $a_{ij}$，表示这局游戏第 $j$ 个玩家的国家初始所在的节点。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $q$ 行 $q$ 个数，表示每次游戏黈力的国家能占领的节点数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n6 4\r\n1 2\r\n1 3\r\n2 4\r\n3 5\r\n3 6\r\n2 1 3\r\n3 1 4 5\r\n3 4 5 6\r\n3 1 2 3\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n3\r\n4\r\n3\r\n1\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n第一局游戏黈力一开始在 $1$ 号点，第一时刻占领了 $2$ 号点，第二时刻占领了 $4$ 号点。\r\n\r\n第二局游戏黈力一开始在 $1$ 号点，第一时刻占领了 $2$ 号点和 $3$ 号点，第二时刻占领了 $6$ 号点。\r\n\r\n第四局游戏黈力一开始在 $1$ 号点，然后没有其他可以占领的点。\r\n\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"| 测试点编号 | $n$ | $q$ | $k_i$ | 特殊情况 |\r\n| :-: | :-: | :-: | :-: | :-: |\r\n| 1 | $\\leq 5$ | $\\leq 5$ | | | \r\n| 2 | $\\leq 50$ | $\\leq 50$ | | | \r\n| 3 | $\\leq 200$ | $\\leq 200$ | | | \r\n| 4 | $\\leq 500$ | $\\leq 500$ | | | \r\n| 5 | $\\leq 1500$ | $\\leq 1500$ | | | \r\n| 6 | $\\leq 3000$ | $\\leq 3000$ | | | \r\n| 7 | $\\leq 5000$ | $\\leq 5000$ | | 游戏地图是一条链| \r\n| 8 | $\\leq 5000$ | $\\leq 5000$ | | | \r\n| 9 | | $\\leq 10$ | $ = 2$ | | \r\n| 10 | | $\\leq 10$ | $\\leq 10$ | | \r\n| 11 | | $\\leq 10$ | $\\leq 5000$ | | \r\n| 12 | | $\\leq 10$ | | | \r\n| 13 | $\\leq 100000$ | $\\leq 100000$ | $ = 2$ | | \r\n| 14 | $\\leq 250000$ | $\\leq 250000$ | $ = 2$ | | \r\n| 15 | | | $ = 2$  | | \r\n| 16 | | | $ = 3$  | | \r\n| 17 | | | $ \\leq 10$ | | \r\n| 18 | | | $ \\leq 20$ | | \r\n| 19 | $\\leq 100000$ | $\\leq 100000$ | |游戏地图是一条链 | \r\n| 20 | | | |游戏地图是一条链 | \r\n| 21 | $\\leq 100000$ | $\\leq 100000$ | |黈力永远在 $1$ 号点 | \r\n| 22 | | | |黈力永远在 $1$ 号点 | \r\n| 23 | | | | 树是随机的 | \r\n| 24 | $\\leq 250000$ | $\\leq 250000$ | | | \r\n| 25 | | | | | |\r\n\r\n对于所有数据，有 $n, q \\leq 500000, 1 \\leq k_i \\leq n, \\sum_{i = 1}^{q} k_i \\leq 1000000$。"}]}