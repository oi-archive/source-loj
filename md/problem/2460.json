{"title":"「POI2010」桥 Bridges","time_limit":1000,"memory_limit":128,"tags":["POI","2010"],"operation":{"submit":"https://loj.ac/problem/2460#submit_code","submissions":"https://loj.ac/submissions?problem_id=2460","statistics":"https://loj.ac/problem/2460/statistics/fastest","testdata":"https://loj.ac/problem/2460/testdata","discussion":"https://loj.ac/discussion/problem/2460"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 POI 2010 Stage 3. Day 2「[Bridges](https://szkopul.edu.pl/problemset/problem/gh2Yj6Ckrt4Lo_RojONuljuC/site/?key=statement)」**\r\n\r\n给定一个 $n$ 个点的无向图，每条边的两个方向各有一个权值，求一条从 1 号点出发，恰经过所有边一次并回到 1 号点的路线，使得权值的最大值最小。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数 $n,m$ ，分别表示点的数量和边的数量。点从 $1$ 到 $n$ 编号，边从 $1$ 到 $m$ 编号。\r\n\r\n接下来 $m$ 行每行有四个整数 $a_i,b_i,l_i,p_i $ ，表示第 $i$ 条边连接 $a,b$ ，且从 $a$ 到 $b$ 的权值为 $l_i$ ，从 $b$ 到 $a$ 的权值为 $p_i$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"如果原图不存在这样的路线，输出 ```NIE``` 。否则，应该输出两行，第一行表示路线中权值最大值的最小值，第二行有 $m$ 个整数，依次表示你选择的路线的边。如果有多条这样的路线，可以输出任意一条。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"### 样例输入\r\n```plain\r\n4 4\r\n1 2 2 4\r\n2 3 3 4\r\n3 4 4 4\r\n4 1 5 4\r\n```\r\n\r\n### 样例输出\r\n```plain\r\n4\r\n4 3 2 1\r\n```\r\n\r\n### 样例解释\r\n![mos.gif](https://i.loli.net/2018/03/29/5abcdf3577ff7.gif)\r\n\r\n最优路线为 $1 \\xrightarrow{4} 4 \\xrightarrow{4} 3 \\xrightarrow{4} 2 \\xrightarrow{4}1$，最大权值为 $4$。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，  $2 \\le n \\le 1000,1 \\le m \\le 20000 , 1 \\le a_i,b_i \\le n,a_i \\neq b_i,1 \\le l_i,p_i \\le 1000$ 。\r\n\r\nTranslated & SPJ by vincent163"}]}