{"title":"「IOI2020」装饼干","time_limit":1000,"memory_limit":1024,"tags":["IOI","2020"],"operation":{"submit":"https://loj.ac/problem/3367#submit_code","submissions":"https://loj.ac/submissions?problem_id=3367","statistics":"https://loj.ac/problem/3367/statistics/fastest","testdata":"https://loj.ac/problem/3367/testdata","discussion":"https://loj.ac/discussion/problem/3367"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"注意：**在 LibreOJ 上，由于语言限制，目前只支持以下语言的提交：**\r\n- C++ 11\r\n- C++ 11 (Clang)\r\n- C++ 11 (NOI)\r\n- C++ 17\r\n- C++ 17 (Clang)\r\n\r\nKhong 阿姨在组织⼀场有 $x$ 位选手参加的竞赛，她打算给每位选手**一袋饼干**。总共有 $k$ 种不同类型的饼干，编号为从 $0$ 到 $k - 1$。类型为 $i$（$0 \\le i \\le k - 1$）的每块饼干都有⼀个**口味值** $2^i$。在 Khong 阿姨的食品储藏室里，有 $a_i$（有可能为 $0$）块类型为 $i$ 的饼干。\r\n\r\n对每种类型的饼干，Khong 阿姨在每个袋子都会装上 $0$ 或者多块。所有袋子里面类型为 $i$ 的饼干的总块数不能超过 $a_i$。⼀个袋子里面所有饼干的口味值的总和，被称为这袋饼干的**总口味值**。\r\n\r\n请帮 Khong 阿姨算⼀下，究竟存在多少不同的 $y$ 值，使得她可以装出 $x$ 袋饼干，而且每袋饼干的总口味值都等于 $y$。\r\n\r\n#### 实现细节\r\n\r\n你需要实现以下函数：\r\n\r\n```cpp\r\nlong long count_tastiness(long long x, std::vector<long long> a)\r\n```\r\n\r\n- $x$：需要装的饼干袋的数量。\r\n- $a$：长度为 $k$ 的数组。对 $0 \\le i \\le k - 1$，$a_i$ 表⽰在食物储藏室里类型为 $i$ 的饼干数量。\r\n- 此函数应当返回不同 $y$ 值的数目，使得阿姨可以装出 $x$ 袋饼干，且每袋饼干的总口味值都为 $y$。\r\n- 此函数会被调用 $q$ 次（对于允许的 $q$ 值，详见约束条件和子任务部分）。每次调用应当被看成是独立的场景。\r\n\r\n#### 评测程序示例\r\n\r\n评测程序示例将读取如下格式的输入数据。第一行包含⼀个整数 $q$。接下来是 $q$ 对这样的两⾏：它们按照下⾯的格式来描述⼀个单独的场景：\r\n\r\n- 第一行：$k\\ x$\r\n- 第二行：$a_0\\ a_1\\ \\ldots\\ a_{k - 1}$\r\n\r\n评测程序示例的输出结果的格式如下：\r\n\r\n- 第 $i$ 行（$1 \\le i \\le q$）：`count_tastiness` 对于输入数据中第 $i$ 个场景的返回值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n3 3\r\n5 2 1\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n5\r\n```\r\n\r\n#### 样例说明 1\r\n\r\n考虑以下调用：\r\n\r\n```cpp\r\n​count_tastiness(3, [5, 2, 1])\r\n```\r\n\r\n这意味着阿姨打算装 $3$ 袋饼干，而在食物储藏室里总共有 $3$ 种类型的饼干：\r\n- $5$ 块类型为 $0$ 的饼干，每块的口味值为 $1$，\r\n- $2$ 块类型为 $1$ 的饼干，每块的口味值为 $2$，\r\n- $1$ 块类型为 $2$ 的饼干，其口味值为 $4$。\r\n\r\n$y$ 能够取的值为 $[0,1,2,3,4]$。举例来说，为了装出总口味值均为 $3$ 的 $3$ 袋饼干，阿姨可以这样装：\r\n\r\n- 一袋饼干里有 $3$ 块类型为 $0$ 的饼干，以及\r\n- 两袋饼干，其中各有一块类型为 $0$ 的饼干和一块类型为 $1$ 的饼干。\r\n\r\n由于总共有 $5$ 个可能的 $y$ 值，函数应当返回 $5$。\r\n\r\n![biscuits.png](https://loj-img.upyun.menci.memset0.cn/2020/09/20/5f67617695628.png)\r\n\r\n#### 样例输入 2\r\n\r\n```plain\r\n3 2\r\n2 1 2\r\n```\r\n\r\n#### 样例输出 2\r\n\r\n```plain\r\n6\r\n```\r\n\r\n#### 样例说明 2\r\n\r\n考虑如下调用：\r\n\r\n```cpp\r\ncount_tastiness(2, [2, 1, 2])\r\n```\r\n\r\n这意味着阿姨打算装 $2$ 袋饼干，而在⻝物储藏室里总共有 $3$ 种类型的饼干：\r\n- $2$ 块类型为 $0$ 的饼干，每块的口味值为 $1$，\r\n- $1$ 块类型为 $1$ 的饼干，其口味值为 $2$，\r\n- $2$ 块类型为 $2$ 的饼干，每块的口味值为 $4$。\r\n\r\n$y$ 能够取的值为 $[0,1,2,4,5,6]$，由于总共有 $6$ 个可能的 $y$ 值，函数应当返回 $6$。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，满足：\r\n- $1\\le k\\le 60$\r\n- $1\\le q\\le 1000$\r\n- $1\\le x\\le 10^{18}$\r\n- $0\\le a_i\\le 10^{18}$（对于所有的 $0\\le i\\le k-1$）\r\n- 对于 `count_tastiness` 的每次调用，食物储藏室里所有饼干的口味值总和都不会超过 $10^{18}$。\r\n\r\n详细子任务分值与附加限制如下表：\r\n\r\n| 子任务 |                           附加限制                           | 分值 |\r\n| :----: | :----------------------------------------------------------: | :--: |\r\n|  $1$   | $q\\le 10$，且对于 `count_tastiness` 的每次调用，食物储藏室里所有饼干的口味值总和都不会超过 $100\\ 000$。 | $9$  |\r\n|  $2$   |                        $x=1,q\\le 10$                         | $12$ |\r\n|  $3$   |                    $x\\le 10\\ 000,q\\le 10$                    | $21$ |\r\n|  $4$   | 对于 `count_tastiness` 的每次调用，正确的返回结果都不会超过 $200\\ 000$。 | $35$ |\r\n|  $5$   |                      没有附加限制条件。                      | $23$ |\r\n\r\n"}]}