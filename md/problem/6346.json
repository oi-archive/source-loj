{"title":"线段树：关于时间","time_limit":200,"memory_limit":256,"tags":["原创","线段树","树状数组"],"operation":{"submit":"https://loj.ac/problem/6346#submit_code","submissions":"https://loj.ac/submissions?problem_id=6346","statistics":"https://loj.ac/problem/6346/statistics/fastest","testdata":"https://loj.ac/problem/6346/testdata","discussion":"https://loj.ac/discussion/problem/6346"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有 $n$ 个整数 $a_1, a_2, \\dots, a_n$ 组成一个序列。有一个存储三元组的列表，开始时该列表为空。  \r\n有 $m$ 个操作，这些操作分为两种：  \r\n- $\\texttt{1 L R x}\\:\\:$  将 $(L, R, x)$ 加入列表中。  \r\n- $\\texttt{2 L R}\\;\\;\\quad$  求 $a_L + a_{L+1} + \\cdots + a_R$。\r\n\r\n每执行完一个操作，就读取一遍列表，对于其中的每一组 $(L, R, x)$，$a_L, a_{L+1},\\ldots,a_R$ 都加上 $x$（这不算做操作）。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数  $n$，表示序列长度。  \r\n第二行 $n$ 个整数。  \r\n第三行一个整数 $m$，表示操作数。  \r\n然后 $m$ 行，先输入一个数 $D$，$D$ 为 $1$ 或 $2$ 。  \r\n- 若 $D$ 为 $1$，读入 $3$ 个整数 $L, R, x$。  \r\n- 若 $D$ 为 $2$，读入 $2$ 个整数 $L, R$。  \r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个操作 $\\texttt{2 L R}$，输出一行，一个整数，$a_L + a_{L+1} + \\cdots + a_R$ 。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n3\r\n1 2 3\r\n4\r\n1 1 3 1\r\n2 1 1\r\n1 2 3 2\r\n2 2 3\r\n```\r\n#### 样例输出\r\n```plain\r\n2\r\n15\r\n```\r\n#### 样例解释\r\n||列表|输出|$a_i$|\r\n|:-:|:-:|:-:|:-:|\r\n|开始||&nbsp;|`1  2  3`|\r\n|`1 1 3 1`|`1  3  1`< ||`1  2  3`|\r\n|读取列表|`1  3  1`|&nbsp;|`2  3  4`|\r\n|`2 1 1`|&nbsp;`1  3  1`&nbsp;|`2`|`2  3  4`|\r\n|读取列表|`1  3  1`||`3  4  5`|\r\n|`1 2 3 2`|`1  3  1` <br> `2 3 2`< |&nbsp;|`3  4  5`|\r\n|读取列表|`1  3  1` <br> `2 3 2`||`4  7  8`|\r\n|`2 2 3`|&nbsp;`1  3  1`&nbsp; <br> `2 3 2`|`15`|`4  7  8`|\r\n|读取列表|`1  3  1` <br> `2 3 2`||`5 10 11`|"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 60 \\% $ 的数据，暴力可过。  \r\n对于 $ 100 \\%  $ 的数据，$ 1 \\le n, m \\le 10^5, $ $ 1 \\le L \\le R \\le n, $ $ 1 \\le a_i \\le 10^4 $, $ -10^4  \\le  x  \\le 10^4 $。"}]}