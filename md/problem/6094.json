{"title":"「Codeforces Round #418」归乡迷途","time_limit":2000,"memory_limit":1024,"tags":["Codeforces","组合计数","BFS树","DP","递推"],"operation":{"submit":"https://loj.ac/problem/6094#submit_code","submissions":"https://loj.ac/submissions?problem_id=6094","statistics":"https://loj.ac/problem/6094/statistics/fastest","testdata":"https://loj.ac/problem/6094/testdata","discussion":"https://loj.ac/discussion/problem/6094"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"> **日が暮れてる　年も暮れてる　途方に暮れちゃってる**  \r\n> 黄昏降临，岁暮到来，路途变得一片迷茫\r\n\r\n有一张 $n$ 个节点组成的无向图，点从 $1$ 至 $n$ 编号，图中没有重边和自环。我们不知道它的确切形态，但是它满足以下条件：\r\n* 由任一节点至节点 $1$ 的最短路径（经过边数最少的路径）存在且唯一；\r\n* 令 $\\ell_i$ 表示由节点 $i$ 至节点 $1$ 的最短路径上边的数目，那么对于所有 $2 \\leq i \\leq n$，有 $\\ell_i \\geq \\ell_{i-1}$ 成立；\r\n* 节点 $i$ 的度数给定，为 $d_i$，并且所有 $d_i$ 均等于 $2$ 或 $3$。\r\n\r\n请计算满足条件的不同的图的数目，输出其除以 $10^9 + 7$ 的余数。两张无向图不同当且仅当存在点对 $(u, v) \\ (1 \\leq u < v \\leq n)$ 使得其中一张图中 $(u, v)$ 间有边而另一张图中没有。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行包含一个正整数 $n$ —— 节点的数目。\r\n\r\n第二行包含 $n$ 个空格分隔的整数 $d_1, d_2, \\ldots, d_n$ —— 依次为节点 $1, 2, \\ldots, n$ 的度数。输入保证所有 $d_i$ 之和为偶数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个整数 —— 满足条件的不同的图的数目除以 $10^9 + 7$ 所得的余数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n4\r\n3 2 3 2\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n1\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n样例 1 中，满足条件的图有且仅有下图中的一张，其中节点 $2, 3, 4$ 至节点 $1$ 的最短路径均经过 $1$ 条边。\r\n\r\n<!-- Orig: https://ooo.0o0.ooo/2017/06/20/59491a609f0ab.png -->\r\n<!-- Del link: https://sm.ms/delete/fcuKl5GhA4jWPns -->\r\n![Sample 1](https://i.loli.net/2018/04/14/5ad1c85e46756.png)\r\n\r\n#### 样例输入 2\r\n```plain\r\n5\r\n2 3 3 2 2\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n2\r\n```\r\n\r\n#### 样例解释 2\r\n\r\n样例 2 中，满足条件的图有且仅有下图中的两张。\r\n\r\n<!-- Orig: https://ooo.0o0.ooo/2017/06/20/59491a60b2d89.png -->\r\n<!-- Del link: https://sm.ms/delete/5F8AjEDXcuGS3R4 -->\r\n![Sample 2](https://i.loli.net/2018/04/14/5ad1c85e4eef3.png)\r\n\r\n#### 样例输入 3\r\n```plain\r\n5\r\n2 2 2 2 2\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n2\r\n```\r\n\r\n#### 样例输入 4\r\n```plain\r\n20\r\n2 2 2 2 3 2 3 2 2 2 2 2 2 2 2 2 2 3 3 2\r\n```\r\n\r\n#### 样例输出 4\r\n```plain\r\n82944\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$3 \\leq n \\leq 300$  \r\n$2 \\leq d_i \\leq 3$\r\n\r\n**子任务 1**　$n \\leq 10$；  \r\n**子任务 2**　$n \\leq 50$；  \r\n**子任务 3**　$n \\leq 80$；  \r\n**子任务 4**　没有附加限制。\r\n\r\n> **遠回りでも　特別な道**  \r\n> 即使迂回而行，亦是别样的旅途  \r\n> **遠回りでも　遠回りじゃない**  \r\n> 即使迂回而行，也浑然不觉  \r\n> 　　　　　　　　　　　　——「帰り道」"}]}