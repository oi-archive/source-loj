{"title":"「强制在线」动态图连通性","time_limit":10000,"memory_limit":1024,"tags":["模板","图论"],"operation":{"submit":"https://loj.ac/problem/122#submit_code","submissions":"https://loj.ac/submissions?problem_id=122","statistics":"https://loj.ac/problem/122/statistics/fastest","testdata":"https://loj.ac/problem/122/testdata","discussion":"https://loj.ac/discussion/problem/122"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"这是一道模板题。\r\n\r\n你要维护一张无向简单图（即没有自环，没有重边的无向图）。你被要求加入删除一条边及查询两个点是否连通。\r\n\r\n* 0：加入一条边。保证它不存在。\r\n* 1：删除一条边。保证它存在。\r\n* 2：查询两个点是否联通。\r\n\r\n为了保证做法的在线性，本题采用了特殊方式的读入。\r\n\r\n假设你维护了一个变量 `lastans`，初始值为 $0$ 。\r\n\r\n对于每个读入的节点 `x`，实际上询问、修改的节点编号是 `x ^ lastans`，其中 `^` 操作是二进制异或操作。\r\n\r\n对于每次解码之后查询 `u v`，如果它们联通，那么 `lastans` 会被更新为 `u`；否则会被更新为 `v`。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行是两个数 $N\\ M$。$N \\leq 5000,M \\leq 500000$。\r\n\r\n接下来 $M$ 行，每一行三个数 $\\text{op} \\ x \\ y$。$\\text{op}$ 表示操作编号。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每一个 $\\text{op}=2$ 的询问，输出一行 `Y` 或 `N` ，表示两个节点是否连通。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n200 5\r\n2 123 127\r\n0 4 0\r\n2 4 0\r\n1 4 0\r\n2 0 4\r\n``` \r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\nN\r\nY\r\nN\r\n```\r\n\r\n\r\n#### 样例输入 2\r\n\r\n```plain\r\n4 10\r\n0 1 2\r\n0 2 3\r\n0 3 1\r\n2 1 4\r\n0 0 7\r\n2 5 0\r\n1 3 2\r\n2 0 5\r\n1 0 2\r\n2 0 5\r\n```\r\n\r\n#### 样例输出 2\r\n\r\n```plain\r\nN\r\nY\r\nY\r\nN\r\n```\r\n\r\n#### 样例解释 2\r\n\r\n实际解码输入：\r\n\r\n```plain\r\n4 10\r\n0 1 2\r\n0 2 3\r\n0 3 1\r\n2 1 4\r\n0 4 3\r\n2 1 4\r\n1 2 3\r\n2 1 4\r\n1 1 3\r\n2 1 4\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"本题有很多数据点，其中前 10 个满足如下约束：\r\n\r\n对于数据点 1，$N \\leq 200,M \\leq 200$\r\n\r\n对于数据点 2，$N=5,M \\leq 30$\r\n\r\n对于数据点 3，$N=10,M \\leq 1000$，其中查询的次数 $\\geq 900$ 次。\r\n\r\n对于数据点 4，$N=300,M \\leq 50000$\r\n\r\n对于数据点 5，$N=5000,M \\leq 200000$，没有操作 1，其中约 $70 \\%$ 是操作 2。\r\n\r\n对于数据点 6，$N=5000,M \\leq 200000$，没有操作 1，其中约 $70 \\%$ 是操作 0。\r\n\r\n对于数据点 7、8，$N=100,M \\leq 500000$\r\n\r\n对于数据点 9，$N=5000,M \\leq 500000$，图是一棵树，其直径 $ \\leq 30$ 。\r\n\r\n对于数据点 10， $N=5000,M \\leq 500000$，图是一棵树，其每个点度数 $ \\leq 10$ 。\r\n\r\n对于剩下的数据点，没有特殊限制。"}]}