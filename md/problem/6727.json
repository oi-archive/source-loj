{"title":"「hyOI2020」henry_y 的数列","time_limit":1500,"memory_limit":256,"tags":["分块及按大小分类","凸包","数据结构"],"operation":{"submit":"https://loj.ac/problem/6727#submit_code","submissions":"https://loj.ac/submissions?problem_id=6727","statistics":"https://loj.ac/problem/6727/statistics/fastest","testdata":"https://loj.ac/problem/6727/testdata","discussion":"https://loj.ac/discussion/problem/6727"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给出一个长度为 $n$ 的正整数序列 $\\{A_n\\}$，维护 $q$ 个操作，操作有两种：\r\n\r\n* `1 l r a b c`：$\\forall l \\leq i \\leq r, i \\in \\mathbb{N}$，令 $A_i$ 变为 $A_i + ai^2 + bi + c$；\r\n* `2 l r`：输出 $\\min_{l \\leq i \\leq r} \\{A_i\\}$ 的值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行，两个整数 $n, q$，分别表示序列长度和操作个数。\r\n\r\n第二行，$n$ 个整数 $A_1, A_2, \\ldots, A_n$，表示序列。\r\n\r\n接下来 $q$ 行，每行三到五个整数，描述操作。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"多行，每行一个整数，表示答案。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 6\r\n2 2 5 3 5 \r\n1 1 5 0 3 0\r\n1 2 3 1 0 1\r\n2 2 4\r\n1 1 5 0 2 3\r\n1 1 5 2 1 1\r\n2 3 4\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n13\r\n55\r\n```\r\n\r\n#### 样例解释\r\n| 操作参数 | 意义 | $A_1$ | $A_2$ | $A_3$ | $A_4$ | $A_5$ | 输出 |\r\n| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |\r\n| 初始 | | 2 <!----> | 2 | 5 <!----> | 3 | 5 <!----> | |\r\n| `1 1 5 0 3 0` | 将 $[1, 5]$ 内的 $A_i$ 变为 $A_i + 3i$ | 5 | 8 <!----> | 14 | 15 <!----> | 20 | <!----> |\r\n| `1 2 3 1 0 1` | 将 $[2, 3]$ 内的 $A_i$ 变为 $A_i + i^2 + 1$ | 5 <!----> | 13 | 24 <!----> | 15 | 20 <!----> | |\r\n| `2 2 4` | 查询 $[2, 4]$ 内的 $A_i$ 的最小值 | 5 | 13 <!----> | 24 | 15 <!----> | 20 | 13 <!----> |\r\n| `1 1 5 0 2 3` | 将 $[1, 5]$ 内的 $A_i$ 变为 $A_i + 2i + 3$ | 10 <!----> | 20 | 33 <!----> | 26 | 33 <!----> | |\r\n| `1 1 5 2 1 1` | 将 $[1, 5]$ 内的 $A_i$ 变为 $A_i + 2i^2 + i + 1$ | 14 | 31 <!----> | 55 | 63 <!----> | 89 | <!----> |\r\n| `2 3 4` | 查询 $[3, 4]$ 内的 $A_i$ 的最小值 | 14 <!----> | 31 | 55 <!----> | 63 | 89 <!----> | 55 |"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 10^5$，$0 \\leq A_i, c \\leq 10^{13}$，$0 \\leq b \\leq 10^8$，$0 \\leq a \\leq 10^3$，$1 \\leq l \\leq r \\leq n$。\r\n\r\n本题采用子任务评测。对于同个子任务，你只有通过该子任务内的所有测试点，才能拿到该子任务的分数。\r\n\r\n| 子任务编号 |                 约定                 |    分值     |\r\n| :----------: | :----------------------------------: | :---------: |\r\n| $1$ | $n, q \\leq 8000$ | $10$ |\r\n| $2$ | 数据有一定程度的随机 | $70$ |\r\n| $3$ | 询问次数不超过 $700$ 次 | <!---->$10$ |\r\n| $4$ | 无特殊限制<!----> | $10$ |\r\n\r\n关于「数据有一定程度的随机」的解释：该子任务内所有数据由以下方式生成。\r\n\r\n* 首先**手动**决定 $n, q, X, Y, Z$ 的值，其中 $1 \\leq n, q \\leq 10^5$，$0 \\leq X \\leq 10^3$，$0 \\leq Y \\leq 10^8$，$0 \\leq Z \\leq 10^{13}$。\r\n* 任意 $a$ 均在 $[0, X]$ 范围内等概率随机生成，$b$ 在 $[0, Y]$ 范围内等概率随机生成，$A_i, c$ 在 $[0, Z]$ 范围内等概率随机生成。\r\n* 对于操作中的区间参数 $l, r$，生成方式为：\r\n  - 首先等概率随机生成整数 $k \\in [1, n]$，表示区间长度；\r\n  - 再等概率随机生成整数 $l \\in [1, n - k + 1]$，表示区间的左端点；\r\n  - 计算 $r = l + k - 1$，表示区间的右端点。\r\n\r\n#### 后记\r\n很遗憾地告知大家，henry_y 走了。\r\n\r\n他现在已经不在机房了。\r\n\r\n这也就是为什么这道题的题目背景中没有 henry_y 的出现，也没有 Tsukimaru 的出现。\r\n\r\n谨以此题，悼念我们永恒的 henry_y 男神老师。\r\n\r\n这个人也许永远不回来了，也许明天回来！\r\n\r\n----\r\n> **henry_y 18:43:40**  \r\n> &nbsp;&nbsp;\\[图片\\]  \r\n> **henry_y 18:43:55**  \r\n> &nbsp;&nbsp;@Tsukimaru  \r\n> **henry_y 18:44:10**  \r\n> &nbsp;&nbsp;¿  \r\n> **henry_y 18:44:37**  \r\n> &nbsp;&nbsp;我就去吃了个晚饭回来怎么这个样子  \r\n> *Tsukimaru 撤回了一条消息*  \r\n> **Tsukimaru 18:45:12**  \r\n> &nbsp;&nbsp;哦，是吗？  \r\n> **Tsukimaru 18:45:21**  \r\n> &nbsp;&nbsp;呵呵，那只是你的以为。  \r\n> **Tsukimaru 18:45:28**  \r\n> &nbsp;&nbsp;好的好的，我知道了。  \r\n> **Tsukimaru 18:45:33**  \r\n> &nbsp;&nbsp;不会是真的吧？  \r\n> *Tsukimaru 被管理员 Moonoshawott 禁言 2 小时*  \r\n> **hjw 18:45:43**  \r\n> &nbsp;&nbsp;[幽灵]  \r\n> **ZC 18:45:47**  \r\n> &nbsp;&nbsp;[幽灵]  \r\n> **Moonoshawott 18:45:53**  \r\n> &nbsp;&nbsp;[幽灵]  \r\n> **henry_y 18:45:54**  \r\n> &nbsp;&nbsp;[幽灵]  \r\n\r\n#### 题目信息\r\n* Idea / Std: @[cutekibry](https://loj.ac/user/1408)\r\n* Data: @[cutekibry](https://loj.ac/user/1408) / @[hjw](https://loj.ac/user/1206)\r\n* Solution: @[moonoshawott](https://loj.ac/user/10399)\r\n* Testing: @[moonoshawott](https://loj.ac/user/10399) / @[hjw](https://loj.ac/user/1206)"}]}