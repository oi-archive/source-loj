{"title":"「ZJOI2006」物流运输","time_limit":1000,"memory_limit":256,"tags":["ZJOI","早于 2010","最短路","图论","DP"],"operation":{"submit":"https://loj.ac/problem/2311#submit_code","submissions":"https://loj.ac/submissions?problem_id=2311","statistics":"https://loj.ac/problem/2311/statistics/fastest","testdata":"https://loj.ac/problem/2311/testdata","discussion":"https://loj.ac/discussion/problem/2311"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"物流公司要把一批货物从码头 A 运到码头 B。由于货物量比较大，需要 $n$ 天才能运完。货物运输过程中一般要转停好几个码头。物流公司通常会设计一条固定的运输路线，以便对整个运输过程实施严格的管理和跟踪。由于各种因素的存在，有的时候某个码头会无法装卸货物。这时候就必须修改运输线路，让货物能够按时到达目的地。但是修改路线是一件十分麻烦的事情，会带来额外的成本，因此物流公司希望能够订一个 $n$ 天的运输计划，使得总成本尽可能地小。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行是四个整数 $n(1\\le n\\le 100),m(1\\le m\\le 20),K,e$。$n$ 表示货物运输所需天数，$m$ 表示码头总数，$K$ 表示每次修改运输路线所需成本。\r\n\r\n接下来 $e$ 行每行是一条航线描述，包括了三个整数，依次表示航线连接的两个码头编号以及航线长度 $(>0)$。其中码头 A 编号为 $1$，码头 B 编号为 $m$。单位长度的运输费用为 1。航线是双向的。\r\n\r\n再接下来一行是一个整数 $d$，后面的 $d$ 行每行是三个整数 $P(1<P<m),a,b(1\\le a\\le b\\le n)$。表示编号为 $P$ 的码头从第 $a$ 天到第 $b$ 天无法装卸货物（含头尾）。同一个码头有可能在多个时间段内不可用。但任何时间都存在至少一条从码头 $A$ 到码头 $B$ 的运输路线。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"包括了一个整数表示最小的总成本。总成本 $=n$ 天运输路线长度之和 $+K\\times $ 改变运输路线的次数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5 10 8\r\n1 2 1\r\n1 3 3\r\n1 4 2\r\n2 3 2\r\n2 4 4\r\n3 4 1\r\n3 5 2\r\n4 5 2\r\n4\r\n2 2 3\r\n3 1 1\r\n3 3 3\r\n4 4 5\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n32\r\n```\r\n\r\n#### 样例解释\r\n\r\n![618.png](https://i.loli.net/2018/04/11/5acdda014980b.png)\r\n\r\n上图依次表示第 $1$ 至第 $5$ 天的情况，阴影表示不可用的码头。\r\n\r\n最优方案为：前三天走 $1\\rightarrow 4\\rightarrow 5$，后两天走 $1\\rightarrow 3\\rightarrow 5$，这样总成本为 $(2+2)\\times 3+(3+2)\\times 2+10=32$。"}]}