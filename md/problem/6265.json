{"title":"最大连续子段和","time_limit":1000,"memory_limit":256,"tags":["分块及按大小分类"],"operation":{"submit":"https://loj.ac/problem/6265#submit_code","submissions":"https://loj.ac/submissions?problem_id=6265","statistics":"https://loj.ac/problem/6265/statistics/fastest","testdata":"https://loj.ac/problem/6265/testdata","discussion":"https://loj.ac/discussion/problem/6265"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给出一个长度为 $ n $ 的序列，要求支持如下两种操作：\r\n\r\n-  $ A\\ \\ l\\ \\ r\\ \\ x $ ：将 $ [l,r] $ 区间内的所有数加上 $ x $ ；\r\n\r\n-  $ Q\\ \\ l\\ \\ r $ ： 求 $ [l,r] $ 区间的最大连续子段和。\r\n\r\n其中，一个区间的最大连续子段和指的是：该区间所有子区间的区间和中的最大值（本题中子区间包括空区间，区间和为 $ 0 $ ）。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数 $ n $、$ m $，表示序列的长度以及操作的数目。  \r\n第二行 $ n $ 个整数，第 $ i $ 个整数 $ a_i $ 表示序列中的第 $ i $ 个数。  \r\n之后的 $ m $ 行，每行输入一个操作，含义如题目所述。保证操作为 $\\ A\\ \\ l\\ \\ r\\ \\ x\\ $ 或 $\\ Q\\ \\ l\\ \\ r\\ $ 之一。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 $ Q $ 操作输出一行一个整数，表示询问区间的最大连续子段和。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5\r\n2 -3 0 4 -7\r\nQ 1 2\r\nQ 1 5\r\nA 2 3 2\r\nQ 2 5\r\nQ 1 3\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n2\r\n4\r\n6\r\n3\r\n```\r\n\r\n#### 样例解释\r\n第一、二个 $ Q $ 操作时序列为 $ 2,-3,0,4,-7 $ ，$ [1,2] $ 的最大连续子段和为 $ [1,1] $ 的区间和 $ 2 $ ，$ [1,5] $ 的最大连续子段和为 $ [4,4] $ 的区间和 $ 4 $ ；  \r\n第三、四个 $ Q $ 操作时序列为 $ 2,-1,2,4,-7 $ ，$ [2,5] $ 的最大连续子段和为 $ [3,4] $ 的区间和 $ 6 $ ，$ [1,3] $ 的最大连续子段和为 $ [1,3] $ 的区间和 $ 3 $。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 30\\% $ 的数据，$n,m\\le 300$ ；  \r\n对于 $ 60\\% $ 的数据，$n,m\\le 1000$ ；  \r\n对于 $ 100\\% $ 的数据，$1\\le n,m\\le 50000,\\ |a_i|\\le 10^9,\\ 1\\le x\\le 40000,\\ 1\\le l,r\\le n$ 。"}]}