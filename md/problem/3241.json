{"title":"「COCI 2019.12」Lampice","time_limit":2500,"memory_limit":256,"tags":["COCI","2019","点分治","hash","二分"],"operation":{"submit":"https://loj.ac/problem/3241#submit_code","submissions":"https://loj.ac/submissions?problem_id=3241","statistics":"https://loj.ac/problem/3241/statistics/fastest","testdata":"https://loj.ac/problem/3241/testdata","discussion":"https://loj.ac/discussion/problem/3241"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [COCI 2019/2020 Contest #3](https://hsin.hr/coci/contest3_tasks.pdf) T4「Lampice」**\r\n\r\nMirko 准备用 $ N $ 个 LED 灯来装饰圣诞树。这 $ N $ 个灯通过了 $ N - 1 $ 根电线连接在一起，任意两个灯之间都能通过电线互相到达。并且我们知道所有灯的颜色。\r\n\r\n装饰结束后，Mirko 发现了很多有趣的图案，其中他最感兴趣的是 *palindromic segments*。一个 palindromic segments 是一条灯 $ u $ 和灯 $ v $ 之间的路径，满足从 $ u $ 到 $ v $ 经过的灯的颜色序列和从从 $ v $ 到 $ u $ 经过的灯的颜色序列相同。\r\n\r\nMirko 想要知道最长的 palindromic segments 有多长。一个 palindromic segments 长度定义为这条路径上灯的个数。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含一个整数 $ N $ ($ 1 \\le N \\le 50000 $)，表示灯的个数。\r\n\r\n第二行包含一个长度为 $ N $ 的字符串，仅由小写字母组成，其中第 $ i $ 个字符表示第 $ i $ 个灯的颜色。\r\n\r\n接下里 $ N - 1 $ 行，每行包含两个整数 $ A $ 和 $ B $ ($ 1 \\le A, B \\le N, A \\ne B $)，表示灯 $ A $ 和 灯 $ B $ 之间有一条电线直接相连。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"仅一行，包含一个整数表示最长的 palindromic segments 的长度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n7\r\nimanade\r\n1 2\r\n2 3\r\n3 4\r\n4 5\r\n5 6\r\n6 7\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n3\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n4\r\naabb\r\n1 2\r\n1 3\r\n3 4\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n2\r\n```\r\n\r\n#### 样例输入 3\r\n```plain\r\n8\r\nacdbabcd\r\n1 6\r\n6 7\r\n6 3\r\n3 4\r\n4 5\r\n5 2\r\n8 5\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n5\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"子任务 1（15 分）：$ 1 \\le N \\le 3000 $；\r\n\r\n子任务 2（25 分）：灯 $ i $ 和灯 $ i + 1 $ ($1 \\le i < N$) 通过电线直接相连；\r\n\r\n子任务 3（25 分）：最多只有 $ 100 $ 个灯和另外一个灯直接相连；\r\n\r\n子任务 4（35 分）：没有额外限制。"}]}