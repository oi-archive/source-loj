{"title":"「BalkanOI 2018 Day1」Minmaxtree","time_limit":1000,"memory_limit":256,"tags":["2018","BalkanOI","子任务"],"operation":{"submit":"https://loj.ac/problem/2712#submit_code","submissions":"https://loj.ac/submissions?problem_id=2712","statistics":"https://loj.ac/problem/2712/statistics/fastest","testdata":"https://loj.ac/problem/2712/testdata","discussion":"https://loj.ac/discussion/problem/2712"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**翻译自 [BalkanOI 2018](http://boi2018.ro) Day1 T3「[Minmaxtree](http://boi2018.ro/assets/Tasks/BOI/Day_1/minmaxtree/minmaxtree_en.pdf)」**\r\n\r\n有一棵有 $N$ 个结点的无权树，结点分别编号为 $1\\dots N$。现在要给每条边赋一个权值，使之变为一棵带权树。这棵带权树满足 $K$ 个条件，条件分为两类： \r\n1. $\\ \\texttt{M }x\\ y\\ z\\ \\ $ 从结点 $x$ 到结点 $y$ 的链上最大的边权为 $z$；\r\n2. $\\ \\texttt{m }x\\ y\\ z\\ \\ $ 从结点 $x$ 到结点 $y$ 的链上最小的边权为 $z$。\r\n\r\n**保证这 $K$ 组条件的 $z$ 互不相同。**\r\n\r\n请构造出这棵树，并输出每条边的边权。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有一个整数 $N$。  \r\n在接下来的 $N-1$ 行中，每行两个整数，表示一条边连接的两个结点。  \r\n第 $N+1$ 行有一个整数 $K$。  \r\n在接下来的 $K$ 行中，每行开头有一个字母，字母为 $\\texttt{M}$ 或 $\\texttt{m}$，接下来有三个整数 $x, y, z$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $n-1$ 行，每行三个整数 $x, y, v$，用空格分隔，表示带权树的一条带权边。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4\r\n1 2\r\n2 3\r\n3 4\r\n3\r\nM 1 2 1\r\nm 1 4 0\r\nM 2 3 100\r\n```\r\n\r\n#### 样例输出\r\n```plain  \r\n3 2 100\r\n1 2 1\r\n4 3 0\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"子任务 #1（7 分）：$1 ≤ N, z ≤ 1000$；  \r\n子任务 #2（22 分）：只有条件 1，没有条件 2。  \r\n子任务 #3（29 分）：所有条件 1 中给出的 $x$ 到 $y$ 的链互不相交；所有条件 2 中给出的 $x$ 到 $y$ 的链也互不相交。  \r\n子任务 #4（42 分）：没有其他限制。  \r\n对于所有数据，$1 ≤ N, K ≤ 70000,$ $1 ≤ z ≤ 10^9$。\r\n\r\n------\r\n**感谢 [applese](/user/873) 提供 SPJ。**"}]}