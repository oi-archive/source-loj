{"title":"「清华集训 2017」小 Y 和二叉树","time_limit":1000,"memory_limit":512,"tags":["2017","清华集训","图论","贪心","DP"],"operation":{"submit":"https://loj.ac/problem/2324#submit_code","submissions":"https://loj.ac/submissions?problem_id=2324","statistics":"https://loj.ac/problem/2324/statistics/fastest","testdata":"https://loj.ac/problem/2324/testdata","discussion":"https://loj.ac/discussion/problem/2324"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"小Y是一个心灵手巧的OIer，她有许多二叉树模型。\r\n\r\n小Y的二叉树模型中，每个结点都具有一个编号，小Y把她最喜欢的一个二叉树模型挂在了墙上，树根在最上面，左右子树分别在树根的左下方与右下方，且他们也都满足这样的悬挂规则。为了让这个模型更加美观，小Y选择了一种让这棵二叉树的中序遍历序列最小的悬挂方法。所谓中序遍历最小，就是指中序遍历的结点编号序列的字典序最小。\r\n\r\n一天，这个模型不小心被掉在了地上，幸运的是，所有结点和边都没摔坏，但是她想不起这个模型原来是怎么悬挂的了，也就是说：她想不起来树根节点的编号了。\r\n\r\n小Y最近忙于准备清华集训，所以没太多时间处理别的事情，她只好找到同样心灵手巧的你帮忙复原她的二叉树模型。\r\n\r\n给定小Y的二叉树模型，结点的编号为 $1$ ~ $n$ ，你需要给出其可能的最小的中序遍历，方便小Y更快的摆好她的模型。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行为一个正整数 $n$ ，表示点的个数。\r\n\r\n后接 $n$ 行，每行若干个整数：\r\n\r\n第 $i+1$ 行的第一个整数为 $k_i$ ，表示编号为 $i$ 的结点的度数，后接 $k_i$ 个整数 $a_{i,j}$ ，表示编号为 $i$ 的结点与编号为 $a_{i,j}$ 的结点之间有一条边。\r\n\r\n同一行输入的相邻两个元素之间，用恰好一个空格隔开。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出共一行， $n$ 个整数，表示字典序最小的中序遍历。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入1\r\n```plain\r\n4\r\n3 2 3 4\r\n1 1\r\n1 1\r\n1 1\r\n```\r\n\r\n#### 样例输出1\r\n```plain\r\n2 1 3 4\r\n```\r\n\r\n\r\n#### 样例解释\r\n\r\n样例的一组最优解如下：\r\n\r\n![explanation.png](https://i.loli.net/2017/12/10/5a2c954f58365.png)\r\n\r\n其中结点$4$为根，结点$1$为结点$4$的左儿子，结点$2,3$分别为结点$1$的左右儿子。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"本题共20个测试点，每个测试点5分。各个测试点的数据范围如下：\r\n\r\n<!-- BEGIN: Migrated markdown table -->\n\n| 测试点编号 | $n \\le$ | $k_i$ | 特殊条件 |\n|:-:|:-:|:-:|:-:|\n| 1 | 5 | 1,2,3 | 无 |\n| 2 | 10 | 1,2,3 | 无 |\n| 3 | 15 | 1,2,3 | 无 |\n| 4 | 20 | 1,2,3 | 无 |\n| 5 | 100 | 1,2,3 | 无 |\n| 6 | 1000 | 1,2,3 | 无 |\n| 7 | 2000 | 1,2,3 | 无 |\n| 8 | 5000 | 1,2,3 | 无 |\n| 9 | 1000000 | 1,2 | 结点 $i$ 与结点 $i-1$ 相连 |\n| 10 | 100000 | 1,2 | 无 |\n| 11 | 300000 | 1,2 | 无 |\n| 12 | 1000000 | 1,2 | 无 |\n| 13 | 100000 | 1,3 | 保证数据随机 |\n| 14 | 1000000 | 1,3 | 无 |\n| 15 | 20000 | 1,2,3 | 保证数据随机 |\n| 16 | 200000 | 1,2,3 | 保证数据随机 |\n| 17 | 100000 | 1,2,3 | 无 |\n| 18 | 500000 | 1,2,3 | 无 |\n| 19 | 800000 | 1,2,3 | 无 |\n| 20 | 1000000 | 1,2,3 | 无 |\n\n<!-- Migrated from original HTML table:\n<table><thead>\r\n<tr>\r\n<th style='text-align:center'>测试点编号</th><th style='text-align:center'>$n \\le$ </th><th style='text-align:center'>$k_i$ </th><th style='text-align:center'>特殊条件</th></tr>\r\n</thead><tbody>\r\n<tr>\r\n<td style='text-align:center'>1</td><td style='text-align:center'>5</td><td style='text-align:center' rowspan='8'>1,2,3</td><td style='text-align:center' rowspan='8'>无</td></tr>\r\n<tr>\r\n<td style='text-align:center'>2</td><td style='text-align:center'>10</td></tr>\r\n<tr>\r\n<td style='text-align:center'>3</td><td style='text-align:center'>15</td></tr>\r\n<tr>\r\n<td style='text-align:center'>4</td><td style='text-align:center'>20</td></tr>\r\n<tr>\r\n<td style='text-align:center'>5</td><td style='text-align:center'>100</td></tr>\r\n<tr>\r\n<td style='text-align:center'>6</td><td style='text-align:center'>1000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>7</td><td style='text-align:center'>2000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>8</td><td style='text-align:center'>5000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>9</td><td style='text-align:center'>1000000</td><td style='text-align:center' rowspan='4'>1,2</td><td style='text-align:center'>结点 $i$ 与结点 $i-1$ 相连</td></tr>\r\n<tr>\r\n<td style='text-align:center'>10</td><td style='text-align:center'>100000</td><td style='text-align:center' rowspan='3'>无</td></tr>\r\n<tr>\r\n<td style='text-align:center'>11</td><td style='text-align:center'>300000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>12</td><td style='text-align:center'>1000000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>13</td><td style='text-align:center'>100000</td><td style='text-align:center' rowspan='2'>1,3</td><td style='text-align:center'>保证数据随机</td></tr>\r\n<tr>\r\n<td style='text-align:center'>14</td><td style='text-align:center'>1000000</td><td style='text-align:center'>无</td></tr>\r\n<tr>\r\n<td style='text-align:center'>15</td><td style='text-align:center'>20000</td><td style='text-align:center' rowspan='6'>1,2,3</td><td style='text-align:center' rowspan='2'>保证数据随机</td></tr>\r\n<tr>\r\n<td style='text-align:center'>16</td><td style='text-align:center'>200000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>17</td><td style='text-align:center'>100000</td><td style='text-align:center' rowspan='4'>无</td></tr>\r\n<tr>\r\n<td style='text-align:center'>18</td><td style='text-align:center'>500000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>19</td><td style='text-align:center'>800000</td></tr>\r\n<tr>\r\n<td style='text-align:center'>20</td><td style='text-align:center'>1000000</td></tr>\r\n</tbody></table>\n-->\n\n<!-- END: Migrated markdown table -->\r\n\r\n\r\n随机数据的生成方式如下：\r\n\r\n对于第13个测试点，从一棵两个结点的树开始，每次随机一个树上的度数为1的结点（即叶结点），并生成两个与之直接相连的结点，直到这棵树上有 $n$ 个结点。显然，在这个测试点中，$n$ 是一个偶数。\r\n\r\n对于第15和第16个测试点，从一棵一个结点的树开始，每次随机一个树上的度数不超过2的结点，并生成一个与之直接相连的结点，直到这棵树上有 $n$ 个结点。\r\n\r\n我们提供了一个只包含输入和输出功能的程序 `binary\\sample.cpp`。\r\n关于该程序的说明，见 `readme.txt`。\r\n你可以在答题时使用该程序的代码，也可以不使用，这将与你的得分无关。"}]}