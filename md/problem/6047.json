{"title":"「雅礼集训 2017 Day10」决斗","time_limit":2000,"memory_limit":128,"tags":["2017","雅礼集训","平衡树","set","枚举"],"operation":{"submit":"https://loj.ac/problem/6047#submit_code","submissions":"https://loj.ac/submissions?problem_id=6047","statistics":"https://loj.ac/problem/6047/statistics/fastest","testdata":"https://loj.ac/problem/6047/testdata","discussion":"https://loj.ac/discussion/problem/6047"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"Mirko 是侏儒国的国王，Slavko 是精灵国的国王。最近，侏儒国和精灵国进行了一场战争。Slavko 率领着 $ N $ 个最强壮的精灵（编号从 $ 1 $ 到 $ N $）进攻侏儒国，而侏儒国的城堡也由 $ N $ 个侏儒（按顺时针方向从 $ 1 $ 到 $ N $ 编号并形成环形）进行防守。\r\n\r\nMirko 为每一个精灵分配了一个侏儒对手 $ A_i $，表示编号为 $ i $ 的精灵要与编号为 $ A_i $ 的侏儒进行对决。然而，不久后他就发现，这个方案不能保证每一个侏儒都与唯一一个精灵进行对决。\r\n\r\n经过协商，Mirko 和 Slavko 最终定下了如下规则：\r\n\r\n1. Slavko 会按他安排的顺序依次派遣他的精灵进入城堡。一个精灵进入城堡时，上一个进入的精灵必须已经找到了就座的位置并坐下。\r\n2. 编号为 $ k $ 的精灵进入城堡时，会首先靠近编号为 $ A_k $ 的侏儒。如果该侏儒旁边的位置没有精灵就座，则该精灵在该位置就座。否则，他将沿着顺时针方向走到下一个侏儒旁的位置，直到他找到一个空位为止。\r\n\r\n最终，$ N $ 个精灵和侏儒将一一配对，并进行一对一的对决，其中更有力量的一个将会胜出。\r\n\r\nSlavko 已经为这场战斗做了充分的准备，他已经知道了每一个精灵和侏儒的力量大小。现在他想直到，合理安排精灵进入城堡的顺序后，他的精灵们最多能赢得多少场对决。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数 $ N $。  \r\n第二行 $ N $ 个整数 $ A_i $；   \r\n第三行 $ N $ 个整数，其中第 $ i $ 个整数表示第 $ i $ 个侏儒的力量值；  \r\n第四行 $ N $ 个整数，其中第 $ i $ 个整数表示第 $ i $ 个精灵的力量值。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数，表示精灵们最多赢得多少场对决。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3\r\n2 3 3\r\n4 1 10\r\n2 7 3\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n2\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n4\r\n3 1 3 3\r\n5 8 7 10\r\n4 1 2 6\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n1\r\n```\r\n\r\n#### 样例输入 3\r\n```plain\r\n3\r\n1 2 3\r\n8 4 3\r\n9 2 6\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 40\\% $ 的数据，$ A_i = 1 $；  \r\n对于 $ 100\\% $ 的数据，$ 1 \\leq N \\leq 5 \\times 10 ^ 5 $。\r\n\r\n保证输入的力量值互不相同，且在 $ [1, 10 ^ 9] $ 的范围内。"}]}