{"title":"「IOI2019」天桥","time_limit":4000,"memory_limit":1024,"tags":["IOI","2019"],"operation":{"submit":"https://loj.ac/problem/3180#submit_code","submissions":"https://loj.ac/submissions?problem_id=3180","statistics":"https://loj.ac/problem/3180/statistics/fastest","testdata":"https://loj.ac/problem/3180/testdata","discussion":"https://loj.ac/discussion/problem/3180"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"Kenan 为沿着巴库大街某一侧的建筑和天桥绘制了一张规划图。规划图中有 $n$ 栋建筑，从 $0$ 到 $n-1$ 编号。还有 $m$ 座天桥，从 $0$ 到 $m-1$ 编号。这张规划图绘制在一张二维平面上，其中建筑和天桥分别是垂直和水平的线段。\r\n\r\n第 $i\\ (0 \\le i \\le n-1)$ 栋建筑的底部坐落在坐标 $(x[i],0)$ 上，建筑的高度为 $h[i]$。因此，它对应一条连接点 $(x[i],0)$ 和 $(x[i],h[i])$ 的线段。\r\n\r\n第 $j\\ (0 \\le j \\le m-1)$ 座天桥的两端分别在第 $l[j]$ 栋建筑和第 $r[j]$ 栋建筑上，并具有正的 $y$ 坐标 $y[j]$。因此，它对应一条连接点 $(x[l[j]],y[j])$ 和 $(x[r[j]],y[j])$ 的线段。\r\n\r\n称某座天桥和某栋建筑**相交**，如果它们有某个公共的点。因此，一座天桥在它的两个端点处与两栋建筑相交，同时还可能在中间和其他建筑相交。\r\n\r\nKenan 想要找出从第 $s$ 栋建筑的底部到第 $g$ 栋建筑的底部的最短路径长度，或者确认这样的路径不存在。在这里行人只能沿着建筑和天桥行走，并且不允许在地面上行走，也就是说不允许沿着 $y$ 坐标为 $0$ 的水平线行走。\r\n\r\n行人能够在任意交点从某座天桥走进某栋建筑，或者从某栋建筑走上某座天桥。如果两座天桥的端点之一在同一点上，行人也可以从其中一座天桥走上另一座天桥。\r\n\r\n你的任务是帮助 Kenan 回答他的问题。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行，两个整数 $n,m$，表示建筑的栋数和天桥的座数。  \r\n以下 $n$ 行，第 $i\\ (0 \\le i \\le n-1)$ 行两个整数 $x[i],h[i]$，表示第 $i$ 栋建筑坐标和高度。  \r\n以下 $m$ 行，第 $j\\ (0 \\le j \\le m-1)$ 行三个整数 $l[j],r[j],y[j]$，表示第 $j$ 座天桥的左右端点和 $y$ 坐标。  \r\n最后一行，两个整数 $s,g$，表示起点和终点。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"如果从第 $s$ 栋建筑的底部到第 $g$ 栋建筑的底部的最短路径存在，则该程序应该输出最短路径的长度。  \r\n否则，该程序应该输出 $-1$。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n7 7\r\n0 8\r\n3 7\r\n5 9\r\n7 7\r\n10 6\r\n12 6\r\n14 9\r\n0 1 1\r\n0 2 6\r\n0 6 8\r\n2 3 1\r\n2 6 7\r\n3 4 2\r\n4 6 5\r\n1 5\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n27\r\n```\r\n\r\n#### 样例解释 1\r\n![Description](https://loj-img.upyun.menci.memset0.cn/2019/08/09/5d4d5a90a982a.png)\r\n\r\n#### 样例输入 2\r\n```plain\r\n5 3\r\n0 6\r\n4 6\r\n5 6\r\n6 6\r\n9 6\r\n3 4 1\r\n1 3 3\r\n0 2 6\r\n0 4\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n21\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据：\r\n- $1 \\le n,m \\le 10^5$；\r\n- $0 \\le x[0] < x[1] < \\dots < x[n-1] \\le 10^9$；\r\n- $1 \\le h[i] \\le 10^9\\ (0 \\le i \\le n-1)$；\r\n- $0 \\le l[j] \\le r[j] \\le n-1\\ (0 \\le j \\le m-1)$；\r\n- $1 \\le y[j] \\le \\min(h[l[j]],h[r[j]])\\ (0 \\le j \\le m-1)$；\r\n- $0 \\le s,g \\le n-1$；\r\n- $s \\ne g$；\r\n- 除在端点处外，任意两座天桥不会有其他公共点。\r\n\r\n详细子任务附加限制与分值如下表：\r\n\r\n| 子任务编号 |                           附加限制                           | 分值 |\r\n| :--------: | :----------------------------------------------------------: | :--: |\r\n|    $1$     |                       $n,m \\le 50$                           | $10$ |\r\n|    $2$     |              每座天桥最多与 $10$ 栋建筑相交                      | $14$ |\r\n|    $3$     |                   $s = 0, g = n-1$，且所有的建筑的高度相等       | $15$ |\r\n|    $4$     |                   $s = 0, g = n-1$                           | $18$ |\r\n|    $5$     |                      没有任何附加限制                           | $43$ |"}]}