{"title":"「2018 集训队互测 Day 4」小修和小栋生♂成树","time_limit":1000,"memory_limit":128,"tags":["2018","集训队互测","最小生成树","拟阵","图论"],"operation":{"submit":"https://loj.ac/problem/2488#submit_code","submissions":"https://loj.ac/submissions?problem_id=2488","statistics":"https://loj.ac/problem/2488/statistics/fastest","testdata":"https://loj.ac/problem/2488/testdata","discussion":"https://loj.ac/discussion/problem/2488"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"这**不是**一道提交答案题。\r\n\r\n这**不是**一道交互题。\r\n\r\n小修正在和小栋一起造生成树。\r\n\r\n他们各有一张 $n$ 个点，$m$ 条边的图。他们希望在图中找出一些边，使得只含有这些边的图是森林或者环套树森林。\r\n\r\n由于小修和小栋是情侣，所以他们决定作出一样的选择，具体来说，对于第 $i$ 条边，两个人要么同时选择，要么同时不选择。\r\n\r\n对于第 $i$ 条边有 $a_i$ 的权值，小修和小栋希望最终选择出来的边的权值和尽量大。\r\n\r\n这里环套树森林的定义指的是每个联通块都是树或者环套树。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含两个整数 $n$ 和 $m$，表示图的点数和边数。\r\n\r\n接下来一行两个整数  $\\text{type}_1,\\text{type}_2$，分别表示小修对最终图的要求和小栋的要求，当 $\\text{type}$ 为 $1$ 的时候，表示希望最后得到的是森林，如果 $\\text{type}$ 为 $2$ 则是环套树森林。\r\n\r\n接下来 $m$ 行，每行 $5$ 个整数 $u1_i,v1_i,u2_i,v2_i,a_i$，其中 $u1_i,v1_i$ 表示这条边在小修的图中连接的点，$u2_i,v2_i$ 表示在小栋的图中连接的点。\r\n\r\n数据不保证没有重边和自环。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数，表示最大的边权和。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n6 5\r\n1 1\r\n1 2 1 2 1\r\n2 3 2 3 1\r\n3 4 3 4 1\r\n1 4 5 6 1\r\n5 6 1 4 1\r\n```\r\n#### 样例输出\r\n```plain\r\n4\r\n```\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，满足 $1\\le n,m\\le 300,1\\le a_i\\le 10^5$  \r\n \r\n以下限制如不做特殊说明均表示不超过。\r\n\r\n|子任务编号|$n$|$m$|特殊限制|分数|\r\n| ---- |--|----|--| ---- |\r\n|1|\t300|\t300|\t$u1_i=u2_i,v1_i=v2_i$ |\t3|\r\n|2|\t300|\t20\t|无|\t3|\r\n|3|\t7|\t300\t|$\\text{type}_1=\\text{type}_2=1$ |\t7|\r\n|4|\t5|\t300|\t无|\t11|\r\n|5|\t300|\t300\t|$\\text{type}_1=\\text{type}_2=1$|\t15|\r\n|6|\t300|\t300\t|$\\text{type}_1=\\text{type}_2=2$|\t17|\r\n|7|\t70|\t70|\t无\t|10|\r\n|8|\t300\t|300|\t无\t|34|"}]}