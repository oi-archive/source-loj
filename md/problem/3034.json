{"title":"「JOISC 2019 Day2」两道料理","time_limit":5000,"memory_limit":1024,"tags":["JOISC","2019","set","DP","差分"],"operation":{"submit":"https://loj.ac/problem/3034#submit_code","submissions":"https://loj.ac/submissions?problem_id=3034","statistics":"https://loj.ac/problem/3034/statistics/fastest","testdata":"https://loj.ac/problem/3034/testdata","discussion":"https://loj.ac/discussion/problem/3034"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOISC 2019](https://www.ioi-jp.org/camp/2019/2019-sp-tasks/index.html) Day2 T2「[ふたつの料理](https://www.ioi-jp.org/camp/2019/2019-sp-tasks/day2/dishes.pdf) / [Two Dishes](https://www.ioi-jp.org/camp/2019/2019-sp-tasks/day2/dishes-en.pdf)」**\r\n\r\n厨师比太郎正在参加一个厨艺比赛。在这场比赛中参赛者要烹饪两道料理：IOI 盖饭和 JOI 咖喱。\r\n\r\nIOI 盖饭的烹饪过程中需要 $N$ 个步骤。第 $i (1\\le i\\le N)$ 步的用时是 $A_i$ 分钟，最初他只能进行第 $1$ 步，想要进行第 $i (2\\le i \\le N)$ 步的条件是已经完成了第 $i - 1$ 步。\r\n\r\nJOI 咖喱的烹饪过程中需要 $M$ 个步骤。第 $j (1\\le j\\le M)$ 步的用时是 $B_j$ 分钟，最初他只能进行第 $1$ 步，想要进行第 $j (2\\le j \\le M)$ 步的条件是已经完成了第 $j - 1$ 步。\r\n\r\n做料理过程中需要专心致志，所以当他开始进行一个步骤时，就不能中断。当完成了一个步骤，他也可以选择进行另一道料理的下一个步骤。比赛开始后，在两道料理都完成之前，他不能停下来休息。\r\n\r\n在这场比赛中，参赛者会按照接下来的方式得到**艺术感**的打分：\r\n- 如果他在比赛的前 $S_i (1\\le i \\le N)$ 分钟内完成了 IOI 盖饭的第 $i$ 个步骤，那么从中他会得到 $P_i$ 点的分数，分数有可能是负的。\r\n- 如果他在比赛的前 $T_j (1\\le j \\le M)$ 分钟内完成了 JOI 咖喱的第 $j$ 个步骤，那么从中他会得到 $Q_j$ 点的分数，分数有可能是负的。\r\n\r\n请你帮助比太郎设计做料理过程，最大化他做料理的艺术感评分。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"从标准输入中读取数据。\r\n\r\n第一行两个整数 $N,M$。\r\n\r\n接下来 $N$ 行，每行三个整数 $A_i,S_i,P_i$。\r\n\r\n接下来 $M$ 行，每行三个整数 $B_j,T_j,Q_j$。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出数据到标准输出中。\r\n\r\n一个整数，表示比太郎能得到的最高艺术感评分。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n4 3\r\n2 1 1\r\n3 8 1\r\n2 13 1\r\n1 13 1\r\n3 6 1\r\n2 11 1\r\n2 15 1\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n6\r\n```\r\n\r\n#### 样例说明 1\r\n\r\n这组样例满足子任务 `2` 的限制。\r\n\r\n比太郎可以按照此方案进行烹饪：\r\n\r\n1. 进行 JOI 咖喱的第 $1$ 个步骤，完成时已经距离比赛开始 $3$ 分钟，还在 $6$ 分钟内，他得到 $1$ 分。\r\n2. 进行 IOI 盖饭的第 $1$ 个步骤，完成时已经距离比赛开始 $5$ 分钟，不在 $1$ 分钟内，他没有得分。\r\n3. 进行 IOI 盖饭的第 $2$ 个步骤，完成时已经距离比赛开始 $8$ 分钟，还在 $8$ 分钟内，他得到 $1$ 分。\r\n4. 进行 JOI 咖喱的第 $2$ 个步骤，完成时已经距离比赛开始 $10$ 分钟，还在 $11$ 分钟内，他得到 $1$ 分。\r\n5. 进行 IOI 盖饭的第 $3$ 个步骤，完成时已经距离比赛开始 $12$ 分钟，还在 $13$ 分钟内，他得到 $1$ 分。\r\n6. 进行 IOI 盖饭的第 $4$ 个步骤，完成时已经距离比赛开始 $13$ 分钟，还在 $13$ 分钟内，他得到 $1$ 分。\r\n7. 进行 JOI 咖喱的第 $3$ 个步骤，完成时已经距离比赛开始 $15$ 分钟，还在 $15$ 分钟内，他得到 $1$ 分。\r\n\r\n比太郎总共得到 $6$ 分，他无法得到更高的分数。\r\n\r\n#### 样例输入 2\r\n\r\n```plain\r\n5 7\r\n16 73 16\r\n17 73 10\r\n20 73 1\r\n14 73 16\r\n18 73 10\r\n3 73 2\r\n10 73 7\r\n16 73 19\r\n12 73 4\r\n15 73 15\r\n20 73 14\r\n15 73 8\r\n```\r\n\r\n#### 样例输出 2\r\n\r\n```plain\r\n63\r\n```\r\n\r\n#### 样例说明 2\r\n\r\n这组样例满足子任务 `1` 的限制。\r\n\r\n#### 样例输入 3\r\n\r\n```plain\r\n9 11\r\n86 565 58\r\n41 469 -95\r\n73 679 28\r\n91 585 -78\r\n17 513 -63\r\n48 878 -66\r\n66 901 59\r\n72 983 -70\r\n68 1432 11\r\n42 386 -87\r\n36 895 57\r\n100 164 10\r\n96 812 -6\r\n23 961 -66\r\n54 193 51\r\n37 709 82\r\n62 148 -36\r\n28 853 22\r\n15 44 53\r\n77 660 -19\r\n```\r\n\r\n#### 样例输出 3\r\n\r\n```plain\r\n99\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"#### 限制\r\n\r\n- $1\\le N, M\\le 10^6$\r\n- $1\\le A_i, B_j \\le 10^9 (1\\le i\\le N, 1\\le j\\le M)$\r\n- $1\\le S_i, T_j\\le 2\\times 10^{15} (1\\le i\\le N, 1\\le j\\le M)$\r\n- $|P_i|, |Q_j| \\le 10^9(1\\le i\\le N, 1\\le j\\le M)$\r\n\r\n#### 子任务\r\n\r\n| Subtask # | 分值 | $N, M\\le$ | $P_i,Q_j$ | 特殊限制 |\r\n|:-:|:-:|:-:|:-:|:-:|\r\n| $1$ | $5$ | $2\\times 10^5$ |  | 对于任意 $i\\in [1,n],j\\in [1,m]$ 的整数 $i,j$，都有 $S_i=T_j$ |\r\n| $2$ | $3$ | $12$ | $=1$ |  |\r\n| $3$ | $7$ | $2\\times 10^3$ | $=1$ |  |\r\n| $4$ | $39$ | $2\\times 10^5$ | $=1$ |  |\r\n| $5$ | $11$ | $2\\times 10^5$ | $\\ge 1$ |  |\r\n| $6$ | $9$ |  | $\\ge 1$ |  |\r\n| $7$ | $17$ | $2\\times 10^5$ |  |  |\r\n| $8$ | $9$ |  |  |  |\r\n\r\n注：子任务中未填部分限制同「限制」中所示。"}]}