{"title":"「POI2007」旅游景点 Tourist Attractions","time_limit":3000,"memory_limit":64,"tags":["POI","早于 2010"],"operation":{"submit":"https://loj.ac/problem/2648#submit_code","submissions":"https://loj.ac/submissions?problem_id=2648","statistics":"https://loj.ac/problem/2648/statistics/fastest","testdata":"https://loj.ac/problem/2648/testdata","discussion":"https://loj.ac/discussion/problem/2648"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 POI 2007 Stage 1.「[Tourist Attractions](https://szkopul.edu.pl/problemset/problem/_L_YGzT5VYJO9zHTfVRwPjwh/site/?key=statement)」**\r\n\r\n给定 $n$ 个顶点和 $m$ 条边组成的一张图，边有长度，且要求按照一定的顺序停留 $2 \\ldots k+1$ 共 $k$ 个点（可以经过这些点但不停留），求最短的符合要求的从 $1$ 出发到 $n$ 的路径。保证存在这样的路径。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有三个数 $n$，$m$ 和 $k$，且保证 $k \\le n - 2$.\r\n\r\n接下来 $m$ 行每行三个整数 $p_i, q_i, l_i (1 \\le p_i \\lt q_i \\le n, 1 \\le l_i \\le 1\\ 000)$，表示一条连接 $p_i$ 和 $q_i$ 的长度为 $l_i$ 的边。\r\n\r\n接下来一行一个整数 $g (0 \\le g \\le \\frac{k(k+1)}2)$，表示有 $g$ 条对这 $k$ 个点访问顺序的限制条件。\r\n\r\n接下来 $g$ 行每行有两个整数 $r_i$ 和 $s_i$，表示一条要求，先在 $r_i$ 停留，后在 $s_i$ 停留。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出满足要求的路径的最短长度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n8 15 4\r\n1 2 3\r\n1 3 4\r\n1 4 4\r\n1 6 2\r\n1 7 3\r\n2 3 6\r\n2 4 2\r\n2 5 2\r\n3 4 3\r\n3 6 3\r\n3 8 6\r\n4 5 2\r\n4 8 6\r\n5 7 4\r\n5 8 6\r\n3\r\n2 3\r\n3 4\r\n3 5\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n19\r\n```\r\n\r\n#### 样例解释\r\n![](https://szkopul.edu.pl/problemset/problem/_L_YGzT5VYJO9zHTfVRwPjwh/site/images/OI14/atrzad1.gif)\r\n\r\n上图为与样例对应的图。要求在 $2,3,4,5$ 四个节点停留，且 $2$ 号点需要在 $3$ 号点之前停留，$4$ 号点和 $5$ 号点需要在 $3$ 号点之后停留。最短的从 $1$ 到 $n$ 的路径为 $1, 2, 4, 3, 4, 5, 8$ 且长度为 $19$。注意可以经过 $2,3,4,5$ 号点而不停留，这样就不会违反限制。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$2 \\le n \\le 20\\ 000, 1 \\le m \\le 200\\ 000, 0 \\le k \\le \\min(n-2,20)$"}]}