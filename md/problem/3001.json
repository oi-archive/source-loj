{"title":"「JOISC 2015 Day 3」AAQQZ","time_limit":4000,"memory_limit":256,"tags":["2015","JOISC","字符串","DP"],"operation":{"submit":"https://loj.ac/problem/3001#submit_code","submissions":"https://loj.ac/submissions?problem_id=3001","statistics":"https://loj.ac/problem/3001/statistics/fastest","testdata":"https://loj.ac/problem/3001/testdata","discussion":"https://loj.ac/discussion/problem/3001"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"#### 译自 [JOISC 2015](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/index.html) Day3 T1「[AAQQZ](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/2015-sp-d3.pdf)」，感谢 PoPoQQQ 提供翻译。\r\n\r\nIOI2015 将要在哈萨克斯坦举行。哈萨克斯坦的「哈萨克」是用字母的 `QAZAQ` 拼写的。这个 `QAZAQ` 是回文。知晓这一点的 JOI 君出于对回文的喜爱，准备用眼前的字符串制作一个回文串。\r\n\r\nJOI 君找到了一个长为 $N$ 的字符串 $S=(S_1,S_2,\\cdots ,S_N)$，每个字符可以用 $1\\ldots C$ 之间的一个整数来表示。从这个字符串第 $i$ 个位置到第 $j$ 个位置的字符串 $(S_i,S_{i+1},\\cdots ,S_j)$ 称作子串 $(i,j)$。如果子串 $(i,j)$ 翻转后和原来相等，即 $(S_i,S_{i+1},\\cdots ,S_j)=(S_j,S_{j-1},\\cdots ,S_i)$，则称子串 $(i,j)$ 是回文的。JOI 君进行如下操作来制作一个回文串：\r\n\r\n1. 首先，选择 $S$ 的一个子串。不妨设选择的子串为 $T$；\r\n2. 将子串 $T$ 按照升序排序，得到 $T’$；\r\n3. 在 $S$ 中，用 $T’$ 替换 $T$，得到 $S’$。我们可以这样描述这三项操作：JOI 君选择一个子串 $(i,j)$，将 $S_i,S_{i+1},\\cdots ,S_j$ 按升序排序得到 $T’_i,T’_{i+1},\\cdots ,T’_j$，最终得到 $S’=(S_1,S_2,\\cdots ,S_{i-1},T’_i,T’_{i+1},\\cdots ,T’_j,S_{j+1},\\cdots ,S_N)$；\r\n4. 在这之后，寻找 $S’$ 中的回文子串。\r\n\r\nJOI 进行如上操作后，想要得到最长的回文子串。\r\n\r\n现在 JOI 君将字符串 $S$ 交给了你，请你输出 JOI 君进行如上操作后能得到的最长回文子串的长度。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个空格分隔的正整数 $N$ 和 $C$，分别表示字符串的长度和字符集大小；  \r\n接下来 $N$ 行，第 $i$ 行一个正整数 $S_i$，表示字符串 $S$ 中第 $i$ 个位置的字符。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个正整数，表示 JOI 君进行操作后能得到的最长回文子串的长度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n12 26\r\n26\r\n17\r\n17\r\n17\r\n1\r\n26\r\n1\r\n17\r\n19\r\n20\r\n1\r\n14\r\n```\r\n#### 样例输出 1\r\n```plain\r\n8\r\n```\r\n#### 样例说明 1\r\n样例输入中，$N=12,C=26,S=(26,17,17,17,1,26,1,17,19,20,1,14)$。JOI 君可以选择子串 $(4,8)$，将其按照升序排列，得到 $S’=(26,17,17,1,1,17,17,26,19,20,1,14)$，这样子串 $(1,8)$ 就是回文了。这个回文长度为 $8$，是最长可能得到的回文子串。\r\n\r\n若转化为字母序列，则原串为 `ZQQQAZAQSTAN`。\r\n\r\n#### 样例输入 2\r\n```plain\r\n4 3\r\n1\r\n2\r\n3\r\n2\r\n```\r\n#### 样例输出 2\r\n```plain\r\n3\r\n```\r\n#### 样例说明 2\r\n对于这组样例，$S=(1,2,3,2)$，可以选择子串 $(1,1)$ 进行排序，得到 $S'=(1,2,3,2)$，子串 $(2,4)$ 就是回文了。这个回文长度为 $3$，为最长可能得到的回文。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le N,C\\le 3000,1\\le S_i\\le C$。\r\n\r\n本题有两个子任务。只有该任务下测试点全部通过才能得到该子任务的分数。\r\n\r\n| Subtask | 附加限制   | 分数 |\r\n| :-------: | :----------: | :----: |\r\n| $1$     | $N,C\\le 50$  | $10$   |\r\n| $2$     | 无附加限制 | $90$ |\r\n\r\n"}]}