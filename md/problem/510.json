{"title":"「LibreOJ NOI Round #1」北校门外的回忆","time_limit":1600,"memory_limit":512,"tags":["LibreOJ NOI Round","平衡树","线段树","倍增","数据结构"],"operation":{"submit":"https://loj.ac/problem/510#submit_code","submissions":"https://loj.ac/submissions?problem_id=510","statistics":"https://loj.ac/problem/510/statistics/fastest","testdata":"https://loj.ac/problem/510/testdata","discussion":"https://loj.ac/discussion/problem/510"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"回到了正常的时空，神犇和 LCR 暂时过着安宁又平静的生活，他们回想起三年前的往事……\r\n\r\n> 秋日的北校门格外美丽，这天，神犇和 LCR 第一次因化学中二而相遇……\r\n\r\n令神犇难以忘怀的是，他与 LCR 相遇是在校门外的树下。那棵树的奇特形态深深印在神犇的脑中。神犇称这棵树是一棵“K 项树”。  \r\n为了纪念他和 LCR 的第一次相遇，神犇后来写的树状数组都是以 K 进制而非二进制为基的。\r\n\r\n神犇的机房里有一位名叫 LCA 的蒟蒻，一天他碰巧欣赏到了神犇的代码，它发现神犇的树状数组是这么写的：  \r\n\r\n```\r\nfunction add(x,v)\r\n    while x <= n do\r\n        s[x] = s[x] xor v\r\n        x = x + lowbitv(x)\r\n    end while\r\nend function\r\n\r\nfunction query(x)\r\n    ans = 0\r\n    while x > 0 do\r\n        ans = ans xor s[x]\r\n        x = x - lowbit(x)\r\n    end while\r\n    return ans\r\nend function\r\n```\r\n其中：\r\n* $\\mathrm{lowbit}(x)$ 表示 $K$ 进制下 $x$ 的最低非零位的值（例如当 $K=5$ 时，$\\mathrm{lowbit}(230_{(5)})=30_{(5)}=15_{(10)}$）\r\n* $\\mathrm{lowbitv}(x)$ 表示 $K$ 进制下 $x$ 的最低非零位的位值（即该位为 1 其它位都为 0 时的数值，例如当 $K=5$ 时，$\\mathrm{lowbitv}(230_{(5)})=10_{(5)}=5_{(10)}$）\r\n\r\n这份代码的作用是维护一个长度为 $n$ 的序列 $A$，支持单点**异或**上一个值和求前缀**异或和**。$s[i]$ 维护的是 $\\mathop{\\oplus}\\limits_{i\\in (s[i]-\\mathrm{lowbit}(s[i]),s[i]]} A_i$。（$\\oplus$ 表示按位异或）\r\n\r\nLCA 觉得这种写法十分不错，于是自己也这么写，但总是写挂的 LCA 漏打了一个字符，还把 $K$ 的值设定得大了很多。\r\n\r\n也就是说，LCA 的代码是这么写的：\r\n```\r\nfunction add(x,v)\r\n    while x <= n do\r\n        s[x] = s[x] xor v\r\n        x = x + lowbit(x) //注意，这里是 lowbit，这也是两份代码唯一的区别\r\n    end while\r\nend function\r\n\r\nfunction query(x)\r\n    ans = 0\r\n    while x > 0 do\r\n        ans = ans xor s[x]\r\n        x = x - lowbit(x)\r\n    end while\r\n    return ans\r\nend function\r\n```\r\n**注意：两个函数调用的都是 $\\mathrm{lowbit}$。**\r\n\r\n紧接着 LCA 就发现自己的代码跑得比谁都慢，他百思不得其解，只好来请你帮他解决这个问题。\r\n\r\n请写一个和 LCA 的程序的输出相同的程序。\r\n\r\n**注意，你的任务是写一个和 LCA 的程序输出相同的程序，而不是正确的程序。**"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个正整数 $n,q,K$，表示序列长度，操作数和进制的基数。**序列初始全为 0，LCA 的 s 数组也会初始化为全 0**。  \r\n接下来 $q$ 行每行格式是下列之一：  \r\n* $\\texttt{1 x v}$ 给 $A_x$ 的值异或上 $v$。LCA 会调用 $\\mathrm{add}(x,v)$。\r\n* $\\texttt{2 x}$ 查询 $\\mathop{\\oplus}\\limits_{i\\in (0,x]} A_i$。LCA 会输出一行一个整数，为调用 $\\mathrm{query}(x)$ 的结果。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 2 操作，输出一个整数表示 **LCA 程序的输出**。\r\n\r\n**注意，你的任务是写一个和 LCA 的程序输出相同的程序，而不是正确的程序。**"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n7 16 5\r\n1 1 10\r\n2 1\r\n1 4 15\r\n2 4\r\n1 6 10\r\n1 4 15\r\n2 6\r\n2 6\r\n1 6 5\r\n1 5 12\r\n2 3\r\n1 2 5\r\n1 4 5\r\n2 5\r\n1 6 0\r\n1 5 5\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n10\r\n5\r\n10\r\n10\r\n0\r\n12\r\n```\r\n\r\n#### 更多样例\r\n见附加文件或[备用网盘链接](https://pan.baidu.com/s/1bo2ydeJ)（提取码：`q5bs`）"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$1\\leq x\\leq n\\leq 10^9,1\\leq q\\leq 2\\times 10^5,2\\leq K\\leq 2\\times 10^5,0\\leq v\\leq 10^9$。\r\n\r\n**注意，你的任务是写一个和 LCA 的程序输出相同的程序，而不是正确的程序。**\r\n\r\n<!-- BEGIN: Migrated markdown table -->\r\n\r\n| Subtask # | 分值 | $n,q$ 的限制 | $K$ 的限制 |\r\n|:-:|:-:|:-:|:-:|\r\n| 1 | $17$ | $1 \\leq n, q \\leq 3000 $ | $2 \\leq K \\leq 3000 $ |\r\n| 2 | $15$ | $1 \\leq n \\leq 2\\times 10^5$ | $K=2 $ |\r\n| 3 | $19$ | $1 \\leq n \\leq 2\\times 10^5$ | $K$ 是奇数 |\r\n| 4 | $24$ | $1 \\leq n \\leq 2\\times 10^5$ | 无 |\r\n| 5 | $25$ | 无 | 无 |\r\n\r\n<!-- Migrated from original HTML table:\r\n<table class='ui table'>\r\n    <thead>\r\n        <tr>\r\n            <th style='text-align: center'>Subtask #</th>\r\n            <th style='text-align: center'> 分值 </th>\r\n            <th style='text-align: center'> $n,q$ 的限制 </th>\r\n            <th style='text-align: center'> $K$ 的限制 </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>1</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $17$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $1 \\leq n, q \\leq 3000 $ </td>\r\n            <td style='text-align: center'> $2 \\leq K \\leq 3000 $ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>2</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $15$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;' rowspan='3'> $1 \\leq n \\leq 2\\times 10^5$ </td>\r\n            <td style='text-align: center' rowspan='1'> $K=2 $ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>3</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $19$ </td>\r\n            <td style='text-align: center' rowspan='1'> $K$ 是奇数 </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>4</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $24$ </td>\r\n            <td style='text-align: center' rowspan = '2'> 无 </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>5</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $25$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;' rowspan='1'> 无 </td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n-->\r\n\r\n<!-- END: Migrated markdown table -->"}]}