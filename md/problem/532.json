{"title":"「LibreOJ β Round #5」随机数列","time_limit":2000,"memory_limit":256,"tags":["LibreOJ β Round","前缀和","数论"],"operation":{"submit":"https://loj.ac/problem/532#submit_code","submissions":"https://loj.ac/submissions?problem_id=532","statistics":"https://loj.ac/problem/532/statistics/fastest","testdata":"https://loj.ac/problem/532/testdata","discussion":"https://loj.ac/discussion/problem/532"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"你算出了结果后，LCR 发现游戏匹配的随机对手「神犇」并没有走最优决策，于是她赢得了比赛并解密了数据。\r\n\r\n现在 LCR 要将数据发送到 LOJ。然而近期网络环境不稳定，为了数据的安全传输，LCR 要在其中加入随机校验数列。\r\n\r\nLCR 的随机数列 ${X_n}$ 可以由四个参数 $A, B, C, X_0$ 描述：\r\n\r\n$$X_{n + 1} = ((A X_n + B) \\bmod C) + 1\\ (n \\in \\mathbb{N})$$\r\n\r\n传输完成后，要检测该数列的随机性以验证传输是否出现问题。于是 LCR 随机选取了序列中下标位于 $[L_1, R_1]$ 的某个元素 $X_i$，以及下标位于 $[L_2, R_2]$ 的某个元素 $X_j$，请你帮忙计算 $\\left\\lceil \\frac{X_i}{X_j} + \\frac{X_j}{X_i} \\right\\rceil$ 的期望值。\r\n\r\n为了避免精度误差，你只需要给出期望值乘以 $(R_1 - L_1 + 1)(R_2 - L_2 + 1)$ 的值对 $10^9 + 7$ （一个质数）取模的值即可。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"共一行，包含八个正整数 $A, B, C, X_0, L_1, R_1, L_2$ 和 $R_2$，相邻两个数字之间恰好有一个空格。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共一行，包含一个数字，表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n1 3 7 1 2 3 4 5\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n13\r\n```\r\n\r\n#### 样例解释 1\r\n$X = [1, 5, 2, 6, 3, 7, \\cdots]$\r\n\r\n#### 样例输入 2\r\n```plain\r\n3 5 10 1 2 3 1 2\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n12\r\n```\r\n\r\n#### 样例解释 2\r\n$X = [1, 9, 3, 5, \\cdots]$"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$1 \\leq A, B, C, X_0 \\leq 10^6, 1 \\leq L_1 \\leq R_1 \\leq 10^{18}, 1 \\leq L_2 \\leq R_2 \\leq 10^{18}$。\r\n\r\n|Subtask #|分值|$A,B,C,X_0$ 的限制|$R_1, R_2$ 的限制|\r\n|:-:|:-:|:-:|:-:|\r\n|1|$10$|$A, B, C, X_0 \\leq 10^6$|$R_1,R_2 \\leq 10^3$|\r\n|2|$20$|$A, B, C, X_0 \\leq 10^5$|$R_1,R_2 \\leq 10^5$|\r\n|3|$30$|$A, B, C, X_0 \\leq 10^5$|$R_1,R_2 \\leq 10^{18}$|\r\n|4|$40$|$A, B, C, X_0 \\leq 10^6$|$R_1,R_2 \\leq 10^{18}$|"}]}