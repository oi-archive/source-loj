{"title":"无心行挽","time_limit":2500,"memory_limit":512,"tags":["Link-Cut Tree","虚树","数据结构"],"operation":{"submit":"https://loj.ac/problem/6184#submit_code","submissions":"https://loj.ac/submissions?problem_id=6184","statistics":"https://loj.ac/problem/6184/statistics/fastest","testdata":"https://loj.ac/problem/6184/testdata","discussion":"https://loj.ac/discussion/problem/6184"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"不必做好输掉一切的准备。  \r\n所以，无畏结局。  \r\n在尽头，已经不能再做什么，来挽回。  \r\n在尽头，所有的一切都走向简化，没有了重复，没有了错杂，只剩下一片废墟。  \r\n就是说，世界曾是一副错杂的无向图，而在尽头，它已成为一个没有环的无向连通图，也就是说已成为一棵树。  \r\n这棵树有 $n$ 个节点，有 $n-1$ 条边，每条边的长度都是 $1$。  \r\n给出 $q$ 组询问，每组询问会给出 $k$ 个关键点，设 $f(u)$ 表示所有关键点中离点 $u$ 最近的关键点离 $u$ 的距离，求出最大的 $f(u)$。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个正整数 $n$ 和 $q$ 表示树的节点个数以及询问个数。  \r\n接下来 $n-1$ 行每行三个数 $u,v$ 描述一条边，表示 $u$ 和 $v$ 之间有一条长度为 $1$ 的无向边。  \r\n接下来 $q$ 组询问，每组询问第一行一个正整数 $k$ 表示这组询问中关键点的个数，第二行 $k$ 个正整数，表示这组询问的 $k$ 个关键点。  \r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共 $q$ 行，第 $i$ 行对于第 $i$ 组询问给出答案，详情见题目描述。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n7 5\r\n5 4\r\n6 5\r\n7 3\r\n7 4\r\n1 5\r\n2 4\r\n1\r\n4\r\n1\r\n6\r\n4\r\n6 5 7 2\r\n5\r\n1 5 4 3 7\r\n2\r\n2 3\r\n\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n2\r\n4\r\n1\r\n1\r\n3\r\n\r\n```\r\n\r\n#### 样例输入 2, 3\r\n见附加文件\r\n\r\n#### 样例输出 2, 3\r\n见附加文件\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"令 $S$ 表示所有询问里 $k$ 的和。  \r\n对于 $20\\%$ 的数据，$1 \\leq n,q,S \\leq 3000$。  \r\n对于另外 $30\\%$ 的数据，每组询问的 $k \\leq 5$。  \r\n对于另外 $10\\%$ 的数据，给出的树是一条链。  \r\n对于另外 $20\\%$ 的数据，$1 \\leq q \\leq 10$。  \r\n对于 $100\\%$ 的数据，$1 \\leq n,q,S \\leq 100000$。\r\n\r\n**鸣谢 Samjia 和大树与 Samjia 和矩阵的题面主角 Samjia2000 授权本 OJ 独家拥有在线测评使用权。**"}]}