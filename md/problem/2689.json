{"title":"「POI2012」节日 Festival","time_limit":1000,"memory_limit":64,"tags":["POI","2012"],"operation":{"submit":"https://loj.ac/problem/2689#submit_code","submissions":"https://loj.ac/submissions?problem_id=2689","statistics":"https://loj.ac/problem/2689/statistics/fastest","testdata":"https://loj.ac/problem/2689/testdata","discussion":"https://loj.ac/discussion/problem/2689"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 POI 2012 Stage 1. 「[Festival](https://szkopul.edu.pl/problemset/problem/p9uJo01RR9ouMLLAYroFuQ-7/site/?key=statement)」**\r\n\r\n一次比赛中，$n$ 个运动员的耗时分别为 $X_1, X_2, \\ldots, X_n$ 秒，且满足 $m_1 + m_2$ 个条件：\r\n* 给定 $A$ 和 $B$，$A$ 运动员比 $B$ 运动员耗时恰好少一秒\r\n* 给定 $C$ 和 $D$，$C$ 运动员耗时不长于 $D$ 运动员\r\n\r\n在符合条件的情况下，求所有运动员不同耗时总数的最大值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个非负整数 $n,m_1,m_2 (2 \\le n \\le 600,1 \\le m_1+m_2 \\le 100\\ 000)$，表示运动员个数、$(A,B)$ 类条件的个数和 $(C,D)$ 类条件的个数。\r\n\r\n接下来 $m_1$ 行每行两个整数 $a_i$ 和 $b_i$ 满足 $a_i \\neq b_i$，表示第一类条件，即 $a_i$ 运动员比 $b_i$ 运动员耗时恰好少一秒。\r\n\r\n接下来 $m_2$ 行每行两个整数 $c_i$ 和 $d_i$ 满足 $c_i \\neq d_i$，表示第二类条件，即 $c_i$ 运动员耗时不长于 $d_i$ 运动员。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数，表示耗时不同的运动员的数量最大值。\r\n\r\n如果没有符合条件的解，输出 `NIE`."},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4 2 2\r\n1 2\r\n3 4\r\n1 4\r\n3 1\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n3\r\n```\r\n\r\n#### 样例解释\r\n有两种不同的可能：\r\n* 三号运动员第一名，一、四号运动员并列第二名，二号运动员最后一名；\r\n* 一、三号运动员并列第一名，二、四号运动员并列第二名。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $15\\%$ 的数据保证 $n \\le 10$。\r\n\r\n对于所有数据保证 $1 \\le n \\le 600,1 \\le m_1 + m_2 \\le 100\\ 000$。"}]}