{"title":"「CCC 2014 S2」狼人游戏","time_limit":1000,"memory_limit":256,"tags":["2014","CCC","子任务"],"operation":{"submit":"https://loj.ac/problem/2821#submit_code","submissions":"https://loj.ac/submissions?problem_id=2821","statistics":"https://loj.ac/problem/2821/statistics/fastest","testdata":"https://loj.ac/problem/2821/testdata","discussion":"https://loj.ac/discussion/problem/2821"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**本题译自 [CCC 2014](https://cemc.math.uwaterloo.ca/contests/computing/2014/index.html) Stage2 Day1 T3「[Werewolf](https://cemc.math.uwaterloo.ca/contests/computing/2014/Stage%202/day1.pdf)」**\r\n\r\n和往常一样，$N$ 个机器人在玩狼人游戏，机器人从 $1$ 到 $N$ 编号。$W$ 个机器人扮演狼人，剩下的扮演市民。虽然狼人游戏包括不同的角度，但我们将只着眼于其中一个角度。\r\n\r\n机器人指控其他人是狼人并且防止其他机器人无辜地指控它。\r\n\r\n狼人知道其他人的角色以及：\r\n\r\n- 一个狼人从不指控其他狼人；\r\n\r\n- 任何狼人机器人保护的都是其他狼人机器人。\r\n\r\n市民可能会指控或保护任何类型的机器人。\r\n\r\n其他的一些限制使得题目更简单：\r\n\r\n- 没有机器人又被指控又被保护；\r\n\r\n- 没有机器人被指控或保护一次以上；\r\n\r\n- 如果有一个编号为 $A$ 机器人指控或保护编号为 $B$ 的机器人，那么我们保证$A<B$。\r\n\r\n你将知道 $N$ 个机器人间的所有指控和保护关系，并且知道狼人数为 $W$。每个机器人所扮演的角色要么是狼人要么是市民。你的目标是计算出符合上述限制的角色安排方案数。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个数 $N,W,M$，分别表示机器人数、狼人数、指控和保护关系数。\r\n\r\n接下来 $M$ 行每行描述一个关系，接下来每行都是以下两个形式之一：\r\n- `A a b`，表示机器人 $a$ 指控机器人 $b$ 是狼人。\r\n- `D a b`，表示机器人 $a$ 保护机器人 $b$。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出满足以上条件的角色安排方案数量。可想而知，结果可能非常大，所以需要对 $10^9+7$ 取模。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n2 1 1\r\nD 1 2\r\n```\r\n#### 样例输出 1\r\n```plain\r\n1\r\n```\r\n#### 样例解释 1\r\n如果机器人 $1$ 是狼人，机器人 $2$ 也必须是，那么狼人就太多了！唯一的可能是机器人 $2$ 是唯一的狼人。\r\n#### 样例输入 2\r\n```plain\r\n2 1 0\r\n```\r\n#### 样例输出 2\r\n```plain\r\n2\r\n```\r\n#### 样例输出 2\r\n没有额外的保护或指控信息的话，机器人 $1$ 和机器人 $2$ 都可能是狼人。\r\n#### 样例输入 3\r\n```plain\r\n3 2 2\r\nA 1 2\r\nD 1 3\r\n```\r\n#### 样例输出 3\r\n```plain\r\n2\r\n```\r\n#### 样例解释 3\r\n如果机器人 $1$ 是狼人，机器人 $2$ 将是市民，机器人 $3$ 也是狼人；或者机器人 $1$ 是市民，那么机器人 $2$ 和 $3$ 将是狼人。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $20\\%$ 的数据，$1\\le N\\le 20$；\r\n\r\n对于 $100\\%$ 的数据，$1\\le N\\le 200,$ $0\\le W\\le N,$ $0\\le M<N$。"}]}