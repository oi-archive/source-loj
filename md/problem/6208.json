{"title":"树上询问","time_limit":500,"memory_limit":512,"tags":["线段树","树链剖分","数据结构"],"operation":{"submit":"https://loj.ac/problem/6208#submit_code","submissions":"https://loj.ac/submissions?problem_id=6208","statistics":"https://loj.ac/problem/6208/statistics/fastest","testdata":"https://loj.ac/problem/6208/testdata","discussion":"https://loj.ac/discussion/problem/6208"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有一棵 $n$ 节点的树，根为 $1$ 号节点。每个节点有两个权值 $k_i, t_i$，初始值均为 $0$。\r\n\r\n给出三种操作：\r\n1. $\\mathrm{Add}( x , d )$ 操作：将 $x$ 到根的路径上所有点的 $k_i\\leftarrow k_i + d$\r\n2. $\\mathrm{Mul}( x , d )$ 操作：将 $x$ 到根的路径上所有点的 $t_i\\leftarrow t_i + d \\times k_i$\r\n3. $\\mathrm{Query}( x )$ 操作：询问点 $x$ 的权值 $t_x$ "},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数 $ n $。  \r\n之后的 $ n-1 $ 行，每行两个整数 $u, v$，表示 $u$ 与 $v$ 间有一条无向边。  \r\n第 $n+1$ 行一个整数 $m$ 表示操作个数。   \r\n之后的 $m$ 行，第一个数表示操作类型 $\\mathrm{opt}$；  \r\n若 $\\mathrm{opt}$ 为 $1$ 或 $2$，则接下来有两个数 $x, d$；  \r\n若 $\\mathrm{opt}$ 为 $3$，则只有一个数 $x$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每一个询问，输出一行表示询问点的 $t_i$ 值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3\r\n1 2\r\n1 3\r\n5\r\n1 1 2\r\n1 2 1\r\n2 3 10\r\n2 2 5\r\n3 1\r\n\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n45\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$ 1 \\leq n, m \\leq 100000, -10 \\leq d \\leq 10 $。   \r\n已经按照 LOJ 的运行速度调整时限。"}]}