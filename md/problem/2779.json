{"title":"「BalticOI 2018」路径","time_limit":3000,"memory_limit":1024,"tags":["2018","BalticOI"],"operation":{"submit":"https://loj.ac/problem/2779#submit_code","submissions":"https://loj.ac/submissions?problem_id=2779","statistics":"https://loj.ac/problem/2779/statistics/fastest","testdata":"https://loj.ac/problem/2779/testdata","discussion":"https://loj.ac/discussion/problem/2779"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Paths](https://boi18-day2-open.kattis.com/problems/boi18.paths)」**\r\n\r\n给定一张 $N$ 个点 $M$ 条边的无向图，每个点有一个颜色，所有点的颜色共有 $K$ 种，编号为 $1\\ldots K$。求图上有多少条长度至少为 $2$ 的简单路径，满足路径上的每一个点的颜色互不相同。\r\n\r\n路径上的点的连接顺序不同看作不同的两条路径。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含三个整数 $N$, $M$ 和 $K$。\r\n\r\n第二行包含 $N$ 个在 $1$ 到 $K$ 之间的整数，表示每个点的颜色。\r\n\r\n接下来的 $M$ 行每行两个整数 $a$ 和 $b$，表示图的一条边。\r\n\r\n数据保证图无自环无重边。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个整数表示每一个点颜色都不同的路径条数。保证答案不会超过 $10^{18}$。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例 1 输入\r\n```plain\r\n4 3 3\r\n1 2 1 3\r\n1 2\r\n2 3\r\n4 2\r\n```\r\n#### 样例 1 输出\r\n```plain\r\n10\r\n```\r\n#### 样例 1 解释\r\n<img src=\"https://gitee.com/mingqihuang/pics/raw/master/pathsfig.pdf.svg\" width = 25%>\r\n\r\n样例 1 中表达的图如上图所示。每个点的底色分别为白色（颜色 $1$）、灰色（颜色 $2$）或黑色（颜色 $3$）。共有 $10$ 条路径满足路径上的所有点的颜色都不同。它们是：``1-2``, ``2-1``, ``2-3``, ``3-2``, ``2-4``, ``4-2``, ``1-2-4``, ``4-2-1``, ``3-2-4`` 和 ``4-2-3``。\r\n\r\n注意 ``1`` 不能看作是一条路径，因为一条路径至少连接两个点。``1-2-3`` 也不满足条件，因为有两个点都是 $1$ 号颜色。\r\n#### 样例 2 输入\r\n```plain\r\n9 11 4\r\n1 2 3 4 1 2 1 2 2\r\n1 2\r\n1 3\r\n2 3\r\n2 4\r\n3 6\r\n6 2\r\n6 5\r\n4 3\r\n4 5\r\n7 8\r\n9 8\r\n```\r\n#### 样例 2 输出\r\n```plain\r\n70\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"|子任务|分值|数据范围|\r\n|:--:|:--:|:--:|\r\n|$1$|$23$|$1 \\leqslant N,M \\leqslant 100, 1 \\leqslant K \\leqslant 4$|\r\n|$2$|$20$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 3$|\r\n|$3$|$27$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 4$|\r\n|$4$|$30$|$1 \\leqslant N,M \\leqslant 100\\,000, 1 \\leqslant K \\leqslant 5$|\r\n**请注意在 LibreOJ 上共有 $5$ 个子任务，其中第一个子任务为样例。**"}]}