{"title":"「XXOI 2018」AK YOI","time_limit":1000,"memory_limit":256,"tags":["点分治","数据结构"],"operation":{"submit":"https://loj.ac/problem/6463#submit_code","submissions":"https://loj.ac/submissions?problem_id=6463","statistics":"https://loj.ac/problem/6463/statistics/fastest","testdata":"https://loj.ac/problem/6463/testdata","discussion":"https://loj.ac/discussion/problem/6463"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"z2333 在 AK 了 UOI 之后，打算去 AK YOI。\r\n\r\n但邪恶的 RQAQ 不打算让 z2333 AK YOI，因为这届 YOI 的题全部都是由 RQAQ 出的。\r\n\r\n于是 RQAQ 用**化学铁**来让 z2333 丧失秒切题的能力。\r\n\r\n但 z2333 发现自己只要花 $1$ 分钟去切一道题后，他便能恢复秒切题的能力。\r\n\r\n这个题的题目描述如下：\r\n\r\n---\r\n\r\n给定一棵树，同时给定一对 $L,R$，对于每一个点，求出所有经过这个点，且边数在 $[L,R]$ 的路径中，路径上点权和最大的那个点权和。\r\n\r\n即对于每个点 $u$，需要求出：\r\n\r\n$$\r\n\\Large f_u=\\max \\sum_{p \\in (x,y)} v_p\r\n$$\r\n\r\n其中满足：\r\n\r\n1. $(x,y)$ 是一条经过 $u$ 的简单路径；\r\n2. $L \\le |(x,y)| \\le R$。\r\n\r\n当然了，路径的端点也是要算上的。\r\n\r\n---\r\n\r\n如果你解决了这道题，z2333 会十分高兴，他会让 z6666 来传授给你如何玩玻璃球。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个整数 $n, L, R$；\r\n\r\n第二行 $n$ 个整数，表示 $v_i$；\r\n\r\n之后有 $n - 1$ 行，每行两个整数 $x, y$ 表示有一条连接着 $x,y$ 的边。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行 $n$ 个整数，分别表示 $f_i$；\r\n\r\n如果无解，输出 $-3472328296227680305$。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 1 3\r\n-1 -6 7 7 4\r\n1 2\r\n2 3\r\n3 4\r\n4 5\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n7 12 18 18 18\r\n```\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1 \\le n,x_i,y_i \\le 10^5,0 \\le |v_i| \\le 10^5,1 \\le L \\le R \\le n$。"}]}