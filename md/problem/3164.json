{"title":"「CEOI2019」立方填词","time_limit":1100,"memory_limit":1024,"tags":["CEOI","2019","DP"],"operation":{"submit":"https://loj.ac/problem/3164#submit_code","submissions":"https://loj.ac/submissions?problem_id=3164","statistics":"https://loj.ac/problem/3164/statistics/fastest","testdata":"https://loj.ac/problem/3164/testdata","discussion":"https://loj.ac/discussion/problem/3164"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [CEOI 2019](https://ceoi.sk/tasks/) Day1 T3「[Cubeword](https://ceoi.sk/static/statements/cubeword-ENG.pdf)」**\r\n\r\n立方填词是一种特殊的填词游戏。填词之前，你需要选择立方体的边长 $a$，然后你就可以建立一个有 $a^3$ 个单位立方体的立方体了。这个大立方体有 $12$ 条边。然后，你去掉所有没有接触大立方体边的单位立方体。下图展示了当 $a=6$ 时建立的最终立方体。\r\n\r\n![cubeword1.png](https://loj-img.upyun.menci.memset0.cn/2019/08/04/5d46c632b8e75.png)\r\n\r\n最后，你需要给剩下的每个单位立方体填上一个字母。对于这个立方体，填词之后，每条边上的单词都应该是有意义的。每条边都可以双向阅读，只要从一个方向读起来有意义即可。\r\n\r\n下图展示了当 $a=6$ 时的一个立方体。一些单位立方体已经填上了字母。你已经可以沿这个大立方体的三条边读到 `SUBMIT`，`ACCEPT` 和 `TURING` 三个单词了。\r\n\r\n![cubeword2.png](https://loj-img.upyun.menci.memset0.cn/2019/08/04/5d46c6338baf9.png)\r\n\r\n给定一系列有意义的单词，每个单词可以在合法的立方体的任意一条边上出现。求可以构造多少种不同的立方体对 $998244353$ 取模。\r\n\r\n如果一个立方体可以通过旋转和镜像操作变成另一个立方体，则认为这两个立方体**是不同的**。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数 $n$，表示单词的个数。\r\n\r\n接下来 $n$ 行，每行一个单词，表示可以在大立方体的边上出现的单词。单词长度大于等于 $3$，并且小于等于 $10$。\r\n\r\n保证所有单词都不同。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个整数，表示可以构造的不同立方体数对 $998244353$ 取模后的结果。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n1\r\nradar\r\n```\r\n#### 样例输出 1\r\n```plain\r\n1\r\n```\r\n#### 样例说明 1\r\n第一个样例中，唯一一种可能是立方体的所有边上的单词均为 `radar`。\r\n\r\n#### 样例输入 2\r\n```plain\r\n1\r\nrobot\r\n```\r\n#### 样例输出 2\r\n```plain\r\n2\r\n```\r\n#### 样例说明 2\r\n第二个样例中，有两种立方体，其中一个旋转后可以得到另一个立方体。立方体所有边上的单词都是 `robot`，两个立方体的不同之处在于左下角的字母是 `r` 还是 `t`。\r\n\r\n#### 样例输入 3\r\n```plain\r\n2\r\nFLOW\r\nWOLF\r\n```\r\n#### 样例输出 3\r\n```plain\r\n2\r\n```\r\n#### 样例说明 3\r\n第三个样例与第二个类似，注意阅读方向不会影响答案。\r\n\r\n#### 样例输入 4\r\n```plain\r\n2\r\nbaobab\r\nbob\r\n```\r\n#### 样例输出 4\r\n```plain\r\n4097\r\n```\r\n#### 样例说明 4\r\n第四个样例中，如果把 `bob` 填在立方体的每条边上，有一种立方体。还有 $2^{12}=4096$ 种立方体，每条边都填 `baobab`（对于 $12$ 条边中的一条，我们有两种可能的阅读顺序）。\r\n\r\n#### 样例输入 5\r\n```plain\r\n3\r\nTURING\r\nSUBMIT\r\nACCEPT\r\n```\r\n#### 样例输出 5\r\n```plain\r\n162\r\n```\r\n\r\n#### 样例输入 6\r\n```plain\r\n3\r\nMAN1LA\r\nMAN6OS\r\nAN4NAS\r\n```\r\n#### 样例输出 6\r\n```plain\r\n114\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le n\\le 10^5$。\r\n\r\n详细子任务限制及分值如下表：\r\n\r\n| 子任务编号 |                             限制                             | 分值 |\r\n| :--------: | :----------------------------------------------------------: | :--: |\r\n|    $1$     |                单词中只包含小写的 `a` 到 `f`                 | $21$ |\r\n|    $2$     |                单词中只包含小写的 `a` 到 `p`                 | $29$ |\r\n|    $3$     |       单词中包含小写的 `a` 到 `p` 和大写的 `A` 到 `P`        | $34$ |\r\n|    $4$     | 单词中包含小写的 `a` 到 `z`，大写的 `A` 到 `Z` 和数字 `0` 到 `9` | $16$ |\r\n\r\n"}]}