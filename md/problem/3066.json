{"title":"「ROI 2016 Day2」快递","time_limit":2000,"memory_limit":256,"tags":["2016","ROI"],"operation":{"submit":"https://loj.ac/problem/3066#submit_code","submissions":"https://loj.ac/submissions?problem_id=3066","statistics":"https://loj.ac/problem/3066/statistics/fastest","testdata":"https://loj.ac/problem/3066/testdata","discussion":"https://loj.ac/discussion/problem/3066"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [ROI 2016](http://neerc.ifmo.ru/school/archive/2015-2016.html) Day2 T3.** ***[Курьерская служба](http://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-roi-2016-day2.pdf)***\r\n\r\n给一棵包含 $n$ 个结点的树，结点分别编为 $1\\ldots n$ 号。  \r\n树上有 $k$ 条简单路径，路径的编号分别为 $1\\ldots k$。给出这些路径的端点 $a_i,$ $b_i$。  \r\n我们把「两条路径中的公共结点数 $-$ $1$」称作两路径的**重合长度**。  \r\n试求：哪两条简单路径的重合长度最大，并给出最大重合长度。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行：$n,k$  \r\n第二行：$n-1$ 个整数 $f_2\\ldots f_n$，$f_i$ 表示 $i$ 号结点与 $f_i$ 号结点相连。  \r\n接下来 $k$ 行：$k$ 条路径的端点。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"第一行：最大重合长度  \r\n第二行：两条边的编号，用一个空格隔开，可以以任意顺序输出。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n4 2\r\n1 2 2\r\n1 3\r\n1 4\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n1\r\n2 1\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n4 2\r\n1 2 3\r\n1 2\r\n3 4\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n0\r\n1 2\r\n```\r\n\r\n#### 样例输入 3\r\n```plain\r\n7 3\r\n1 2 2 4 5 5\r\n1 3\r\n3 7\r\n6 1\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n2\r\n2 3\r\n```\r\n\r\n#### 样例说明 3\r\n![roi16G.png](https://loj-img.upyun.menci.memset0.cn/2019/06/12/5d00f934ea7d6.png)\r\n\r\n#### 样例输入 4\r\n```plain\r\n4 3\r\n1 2 3\r\n1 4\r\n4 1\r\n1 4\r\n```\r\n\r\n#### 样例输出 4\r\n```plain\r\n3\r\n2 1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"| 子任务编号 | 分值 |   $2 ⩽ n ⩽$   | $2 ⩽ k ⩽$     | 附加条件                   |\r\n|:----------:|:----:|:-------------:|:-------------:|:--------------------------:|\r\n|      1     | 29   |     $100$     | $100$         |                            |\r\n|      2     | 12   |     $4000$    | $1000$        |                            |\r\n|      3     | 7    |     $10^5$    | $1000$        |                            |\r\n|      4     | 8    |     $10^5$    | $5000$        |                            |\r\n|      5     | 10   |     $10^5$    | $50000$       | 路径长度小于等于 $20$                |\r\n|      6     | 12   |     $10^5$    | $50000$       | 对于任意路径，路径上其中 <br> 一点一定是另一点的祖先 |\r\n|      7     |&nbsp;12&nbsp;|     $10^5$    | $50000$       |                            |\r\n|      8     | 10   | $2\\cdot 10^5$ | $2\\cdot 10^5$ |                            |"}]}