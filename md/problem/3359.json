{"title":"「BalticOI 2017 Day2」Plus Minus","time_limit":1000,"memory_limit":256,"tags":["2017","BalticOI"],"operation":{"submit":"https://loj.ac/problem/3359#submit_code","submissions":"https://loj.ac/submissions?problem_id=3359","statistics":"https://loj.ac/problem/3359/statistics/fastest","testdata":"https://loj.ac/problem/3359/testdata","discussion":"https://loj.ac/discussion/problem/3359"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [BalticOI 2017](http://www.boi2017.org/) Day2「[Plus Minus](http://www.boi2017.org/wp-content/uploads/2017/05/tasks-en.pdf)」**\r\n\r\n物理学家马修正在研究硅基矩形微芯片的量子电动力学。   \r\n这一块芯片的大小为 $n \\times m$ ，可以分成 $n \\times m$ 个电子。  \r\n我们都知道电子的状态只有正电 `+` 和负电 `-`。  \r\n所以，每一个电子都只有一个状态，`+` 或者 `-`。  \r\n马修不知道每个电子的状态，但他可以进行 $k$ 次测量。  \r\n第 $i$ 次测量他可以得到 $(y_i,x_i)$ 这个电子的状态 $s_i$。  \r\n（$s_i$ 是 `+` 或者 `-`）  \r\n马修还知道，在任意一个 $2\\times2$ 的大小的电子块中，拥有 `+` 的电子和拥有 `-` 的电子数量相等。  \r\n然后他找到了你，想让你给出有多少种电子排列的形式满足测量的结果和上述要求。  \r\n答案对 $10^9+7$ 取模。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个整数 $n,m,k$ 代表芯片的大小和测量次数。  \r\n接下来 $k$ 行每行一个字符 $s_i$ 代表这次测量得到的状态和 $y_i,x_i$ 代表测量的位置。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一行一个整数代表有多少种电子排布的形式。  \r\n答案对 $10^9+7$ 取模。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```\r\n2 4 4\r\n+ 1 1\r\n- 1 2\r\n+ 1 3\r\n- 1 4\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```\r\n2\r\n```\r\n\r\n#### 样例说明 1\r\n\r\n对于样例 $1$，有以下 $2$ 种情况：\r\n```\r\n+-+-\r\n+-+-\r\n```\r\n和\r\n```\r\n+-+-\r\n-+-+\r\n```\r\n\r\n#### 样例输入 2\r\n\r\n```\r\n3 3 3\r\n- 2 1\r\n+ 2 3\r\n+ 3 3\r\n```\r\n\r\n#### 样例输出 2\r\n\r\n```\r\n0\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^9$，$0 \\le k \\le 10^5$，$1 \\le y_i \\le n$，$1 \\le x_i \\le m$。\r\n\r\n详细子任务分值及附加限制如下：\r\n\r\n- Subtask 1（12 pts）：$n,m \\le 5$。\r\n- Subtask 2（42 pts）：$n,m \\le 1000$。\r\n- Subtask 3（46 pts）：无特殊限制。\r\n\r\n\r\n"}]}