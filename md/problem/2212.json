{"title":"「SCOI2014」方伯伯的 OJ","time_limit":1000,"memory_limit":256,"tags":["SCOI","2014","标签待整理","数据待检查"],"operation":{"submit":"https://loj.ac/problem/2212#submit_code","submissions":"https://loj.ac/submissions?problem_id=2212","statistics":"https://loj.ac/problem/2212/statistics/fastest","testdata":"https://loj.ac/problem/2212/testdata","discussion":"https://loj.ac/discussion/problem/2212"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"方伯伯正在做他的 OJ。现在他在处理 OJ 上的用户排名问题。\r\n\r\nOJ 上注册了 $n$ 个用户，编号为 $1 \\sim n$，一开始他们按照编号排名。方伯伯会按照心情对这些用户做以下四种操作，修改用户的排名和编号：\r\n\r\n1. 操作格式为 ``1 x y``，意味着将编号为 $x$ 的用户编号改为 $y$，而排名不变，执行完该操作后需要输出该用户在排名中的位置，数据保证 $x$ 必然出现在排名中，同时 $y$ 是一个当前不在排名中的编号。\r\n2. 操作格式为 ``2 x``，意味着将编号为 $x$ 的用户的排名提升到第一位，执行完该操作后需要输出执行该操作前编号为 $x$ 用户的排名。\r\n3. 操作格式为 ``3 x``，意味着将编号为 $x$ 的用户的排名降到最后一位，执行完该操作后需要输出执行该操作前编号为 $x$ 用户的排名。\r\n4. 操作格式为 ``4 k``，意味着查询当前排名为 $k$ 的用户编号，执行完该操作后需要输出当前操作用户的编号。\r\n但同时为了防止别人监听自己的工作，方伯伯对他的操作进行了加密，即将四种操作的格式分别改为了：\r\n\r\n```plain\r\n1 x+a y+a\r\n2 x+a\r\n3 x+a\r\n4 k+a\r\n```\r\n\r\n其中 $a$ 为上一次操作得到的输出，一开始 $a=0$。\r\n\r\n例如：\r\n上一次操作得到的输出是 ``5``，  \r\n这一次操作的输入为：``1 13 15``，  \r\n因为这个输入是经过加密后的，所以你应该处理的操作是``1 8 10``。\r\n\r\n现在你截获了方伯伯的所有操作，希望你能给出结果。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行包含两个用空格分隔的整数 $n$ 和 $m$，表示初始用户数和操作数。  \r\n此后有 $m$ 行，每行是一个询问，询问格式如上所示。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出包含 $m$ 行。每行包含一个整数，其中第 $i$ 行的整数表示第 $i$ 个操作的输出。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n10 10                     \r\n1 2 11                     \r\n3 13                       \r\n2 5                        \r\n3 7                         \r\n2 8                        \r\n2 10                       \r\n2 11                       \r\n3 14                       \r\n2 18                      \r\n4 9\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n2\r\n2\r\n2\r\n4\r\n3\r\n5\r\n5\r\n7\r\n8\r\n11\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100 \\%$ 的数据，$1 \\leq n \\leq 10^8,\\ 1 \\leq m \\leq 10^5$。  \r\n输入保证对于所有的操作， $x$ 必然已经出现在队列中，同时对于所有操作 ``1``，$1 \\leq y \\leq  2 \\times 10^8$，并且 $y$ 没有出现在队列中。  \r\n对于所有操作 ``4``，保证 $1 \\leq k \\leq n$。"}]}