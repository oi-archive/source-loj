{"title":"「TJOI2017」不勤劳的图书管理员","time_limit":3000,"memory_limit":512,"tags":["2017","TJOI","树套树","线段树","分块及按大小分类","数据结构"],"operation":{"submit":"https://loj.ac/problem/2639#submit_code","submissions":"https://loj.ac/submissions?problem_id=2639","statistics":"https://loj.ac/problem/2639/statistics/fastest","testdata":"https://loj.ac/problem/2639/testdata","discussion":"https://loj.ac/discussion/problem/2639"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"加里敦大学有个帝国图书馆，小豆是图书馆阅览室的一个书籍管理员。  \r\n他的任务是把书排成有序的，所以无序的书让他产生厌烦，两本乱序的书会让小豆产生这两本书页数的和的厌烦度。  \r\n现在有 $n$ 本被打乱顺序的书，在接下来 $m$ 天中每天都会因为读者的阅览导致书籍顺序改变位置。因为小豆被要求在接下来的 $m$ 天中至少要整理一次图书。    \r\n小豆想知道，如果他前 $i$ 天不去整理，第 $i$ 天他的厌烦度是多少，这样他好选择厌烦度最小的那天去整理。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个数 $n, m$，表示有 $n$ 本书和 $m$ 天。    \r\n接下来 $n$ 行，每行两个数，$a_i$ 和 $v_i$，表示第 $i$ 本书本来应该放在 $a_i$ 的位置，这本书有 $v_i$ 页，保证不会有放置同一个位置的书。    \r\n接下来 $m$ 行，每行两个数，$x_j$ 和 $y_j$，表示在第 $j$ 天的第 $x_j$ 本书会和第 $y_j$ 本书会因为读者阅读交换位置。    \r\n保证 $1 \\leq a_i, x_j, y_j \\leq n$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一共 $m$ 行，每行一个数，第 $i$ 行表示前 $i$ 天不去整理，第 $i$ 天小豆的厌烦度。因为这个数可能很大，所以将结果模 $10 ^ 9 + 7$ 后输出。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5\r\n1 1\r\n2 2\r\n3 3\r\n4 4\r\n5 5\r\n1 5\r\n1 5\r\n2 4\r\n5 3\r\n1 3\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n42\r\n0\r\n18\r\n28\r\n48\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $20\\%$ 的数据，保证 $1 \\leq n, m \\leq 5000$。  \r\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 50000, 0 \\leq v_i \\leq 10^5$。"}]}