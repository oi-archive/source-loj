{"title":"「JOISC 2014 Day1」巴士走读","time_limit":1000,"memory_limit":256,"tags":["2014","JOISC","图论","二分","搜索"],"operation":{"submit":"https://loj.ac/problem/2872#submit_code","submissions":"https://loj.ac/submissions?problem_id=2872","statistics":"https://loj.ac/problem/2872/statistics/fastest","testdata":"https://loj.ac/problem/2872/testdata","discussion":"https://loj.ac/discussion/problem/2872"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"> 感谢 PoPoQQQ 提供的翻译，已获原译者授权搬运。\r\n\r\n**题目译自 JOISC 2014 Day1 T1「[バス通学](https://www.ioi-jp.org/camp/2014/2014-sp-tasks/2014-sp-d1.pdf)」**\r\n\r\n大学生 JOI 君每天乘坐巴士走读。  \r\nJOI 君的家和学校都在 IOI 市内。IOI 市内共有 $N$ 个巴士站点，编号为 $1\\sim N$，离 JOI 家最近的站点为 $1$ 号站点，离大学最近的站点为 $N$ 号站点。  \r\nIOI 市内共有 $M$ 辆巴士，每辆巴士一天只跑一次，从某一时刻某一停靠点出发，在某一时刻到达另一个站点。运行途中不可以下车。  \r\nJOI 君每天要乘坐一次以上的巴士到达学校。我们可以无视 JOI 君换车的时间，换言之，为了换乘某个时刻从某个停靠点出发的巴士，只需要在该巴士的出发时间或之前到达站点就可以了。此外，多次在某个站点换乘也是可以的。  \r\n在这样的条件下，JOI 君想知道自己应该何时从家中出发才能按时赶到学校。然而，学校每天开始上课的时间都不同。在某 $Q$ 天里，每天到达 $N$ 号站点的最晚时间都是已知的，JOI 君想知道，他最晚何时到达 $1$ 号站点才能及时到校。  \r\n现在给你巴士的运营信息，以及这 $Q$ 天里每天到达 $N$ 号站点的最晚时间，请你求出每天 JOI 君最晚何时到达 $1$ 号站点。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个空格分隔的正整数 $N$ 和 $M$，表示 IOI 市内有 $N$ 个巴士站点和 $M$ 辆巴士。  \r\n接下来 $M$ 行，第 $i$ 行 $(1\\le i\\le M)$ 有四个空格分隔的整数 $A_i,$ $B_i,$ $X_i,$ $Y_i$ $(1\\le A_i\\le N,$ $1\\le B_i\\le N,$ $A_i≠B_i)$，表示第 $i$ 辆巴士在时刻 $X_i$ 从停靠点 $A_i$ 出发，在时刻 $Y_i$ 到达停靠点 $B_i$。时刻从半夜 12 点开始计算，单位为毫秒。  \r\n接下来一行一个整数 $Q$，含义如题目中所示。  \r\n接下来 $Q$ 行，第 $i$ 行 $(1\\le i\\le Q)$ 有一个整数 $L_i$，表示第 $i$ 天最迟 $L_i$ 时刻到达 $N$ 号站点。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $Q$ 行，第 $i$ 行 $(1\\le i\\le Q)$ 一个整数，表示 JOI 君第 $i$ 天最迟到达 $1$ 号站点的时刻。\r\n如果无法在时限内到达，输出 $\\texttt{-1}$。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5 6\r\n1 2 10 25\r\n1 2 12 30\r\n2 5 26 50\r\n1 5 5 20\r\n1 4 30 40\r\n4 5 50 70\r\n4\r\n10\r\n30\r\n60\r\n100\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n-1\r\n5\r\n10\r\n30\r\n```\r\n\r\n#### 样例说明 1\r\n无法在时刻 10 之前到达 5 号车站。\r\n为了在时刻 30 到达，您可以在时刻 5 乘坐 4 号车。\r\n为了在时刻 60 到达，您可以执行以下操作。\r\n* 在时刻 10 乘坐 1 号车。\r\n* 在时刻 25 到达 2 号车站，等待 1 ms，转 3 号车。\r\n* 在时刻 50 抵达 5 号车站。\r\n\r\n为了在时间 100 到达，您可以执行以下操作。\r\n* 在时刻 30 乘坐 5 号车。\r\n* 在时刻 40 到达 4 号车，等待 10 ms，转 6 号车。\r\n* 在时刻 70 抵达 5 号车站。\r\n\r\n#### 样例输入 2\r\n```plain\r\n3 8\r\n1 2 1 5\r\n1 3 0 1\r\n1 3 2 8\r\n2 3 2 3\r\n2 3 3 4\r\n2 3 4 5\r\n2 3 5 6\r\n2 3 6 7\r\n6\r\n3\r\n4\r\n5\r\n6\r\n7\r\n8\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n0\r\n0\r\n0\r\n1\r\n1\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$2\\le N\\le 10^5,$ $1\\le M\\le 3\\times 10^5,$ $0\\le X_i<Y_i<86400000$ $(=24\\times 60\\times 60\\times 1000),$ $1\\le Q\\le 10^5,$ $0\\le L_i<86400000$。\r\n\r\n|子任务编号|分值|$N, M$|$Q$|\r\n|-|-|-|-|\r\n|1|20|$N, M\\le 2000$|$Q=1$|\r\n|2|15|$N, M\\le 2000$||\r\n|3|15||$Q=1$|\r\n|4|50|||"}]}