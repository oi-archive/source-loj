{"title":"「LibreOJ Round #6」花火","time_limit":1000,"memory_limit":256,"tags":["LibreOJ Round","线段树","决策单调性","单调栈","数据结构","DP"],"operation":{"submit":"https://loj.ac/problem/535#submit_code","submissions":"https://loj.ac/submissions?problem_id=535","statistics":"https://loj.ac/problem/535/statistics/fastest","testdata":"https://loj.ac/problem/535/testdata","discussion":"https://loj.ac/discussion/problem/535"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"> 「Hanabi, hanabi……」\r\n>\r\n> 一听说祭典上没有烟火，Karen 一脸沮丧。\r\n>\r\n> 「有的哦…… 虽然比不上大型烟花就是了。」\r\n>\r\n> 还好 Shinobu 早有准备，Alice、Ayaya、Karen、Shinobu、Yoko 五人又能继续愉快地玩耍啦！\r\n>\r\n> 「噢……！不是有放上天的烟花嘛！」Karen 兴奋地喊道。\r\n>\r\n> 「啊等等……」Yoko 惊呼。Karen 手持点燃引信的烟花，「嗯？？」\r\n>\r\n> Yoko 最希望见到的是排列优美的烟火，当然不会放过这个机会…… 不过时间似乎已经不多了。\r\n\r\n$n$ 个烟火排成一排，从左到右高度分别为 $h_1,h_2,\\cdots,h_n$，这些高度两两不同。\r\n\r\n每次 Yoko 可以选择两个相邻的烟火交换，这样的交换可以进行任意多次。\r\n\r\n每次 Yoko 还可以选择两个不相邻的烟火交换，但这样的交换至多进行一次。\r\n\r\n你的任务是帮助 Yoko 用最少次数的交换，使这些烟火从左到右的高度递增。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含一个正整数 $n$。\r\n\r\n第二行包含 $n$ 个正整数 $h_1,h_2,\\cdots,h_n$，相邻整数之间用一个空格隔开。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个整数，表示最少的交换次数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5\r\n3 5 4 1 2\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n5\r\n```\r\n\r\n#### 样例解释\r\n一开始，$5$ 个烟火的高度依次为 $3,5,4,1,2$。\r\n\r\n第 $1$ 次，交换第 $4$ 根烟火和第 $5$ 根烟火，交换后烟火的高度依次为 $3,5,4,2,1$。\r\n\r\n第 $2$ 次，交换第 $3$ 根烟火和第 $4$ 根烟火，交换后烟火的高度依次为 $3,5,2,4,1$。\r\n\r\n第 $3$ 次，交换第 $1$ 根烟火和第 $2$ 根烟火，交换后烟火的高度依次为 $5,3,2,4,1$。\r\n\r\n第 $4$ 次，交换第 $2$ 根烟火和第 $3$ 根烟火，交换后烟火的高度依次为 $5,2,3,4,1$。\r\n\r\n第 $5$ 次，交换第 $1$ 根烟火和第 $5$ 根烟火，交换后烟火的高度依次为 $1,2,3,4,5$。\r\n\r\n可以证明这是交换次数最少的方案。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，满足 $1\\le n\\le 300,000$，$1\\le h_i\\le n$，$h_i$ 互不相同。\r\n\r\n<!-- BEGIN: Migrated markdown table -->\n\n| Subtask # | 分值 | $n$ |\n|:-:|:-:|:-:|\n| 1 | $6$ | $\\le 4$ |\n| 2 | $11$ | $\\le 8$ |\n| 3 | $16$ | $\\le 100$ |\n| 4 | $8$ | $\\le 300$ |\n| 5 | $13$ | $\\le 700$ |\n| 6 | $7$ | $\\le 2,000$ |\n| 7 | $6$ | $\\le 6,000$ |\n| 8 | $14$ | $\\le 60,000$ |\n| 9 | $19$ | $\\le 300,000$ |\n\n<!-- Migrated from original HTML table:\n<table class='ui table'>\r\n    <thead>\r\n        <tr>\r\n            <th style='text-align: center'>Subtask #</th>\r\n            <th style='text-align: center'> 分值 </th>\r\n            <th style='text-align: center'> $n$ </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>1</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $6$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 4$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>2</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $11$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 8$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>3</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $16$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 100$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>4</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $8$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 300$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>5</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $13$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 700$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>6</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $7$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 2,000$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>7</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $6$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 6,000$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>8</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $14$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 60,000$ </td>\r\n        </tr>\r\n        <tr>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'>9</td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $19$ </td>\r\n            <td style='text-align: center; border-right: rgba(34, 36, 38, 0.1) 1px solid;'> $\\le 300,000$ </td>\r\n        </tr>\r\n    </tbody>\r\n</table>\n-->\n\n<!-- END: Migrated markdown table -->"}]}