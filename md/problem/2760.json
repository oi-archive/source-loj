{"title":"「JOI 2014 Final」裁剪线","time_limit":3000,"memory_limit":256,"tags":["2014","JOI","并查集","线段树","set","离散化","扫描线"],"operation":{"submit":"https://loj.ac/problem/2760#submit_code","submissions":"https://loj.ac/submissions?problem_id=2760","statistics":"https://loj.ac/problem/2760/statistics/fastest","testdata":"https://loj.ac/problem/2760/testdata","discussion":"https://loj.ac/discussion/problem/2760"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"#### 译自 [JOI 2014 Final](https://www.ioi-jp.org/joi/2013/2014-ho/index.html) T5「[切り取り線](https://www.ioi-jp.org/joi/2013/2014-ho/2014-ho.pdf)」\r\n\r\nJOI 君对剪纸很感兴趣。今天 JOI 君也准备做剪纸。\r\n\r\n首先，JOI 君根据设计图在一张长方形的纸上画了 $N$ 条裁剪线。每条裁剪线都是一条与纸的长或宽平行的线段。\r\n\r\n从纸上切下来的所有部分都会被用作作品中的部件。可以理解的是，部件数量越多的作品制作起来越困难。JOI 君想知道，当他沿着每一条裁剪线把纸剪开之后，这张纸被分成了多少个部分。\r\n\r\n#### 任务\r\n\r\n给出纸的大小和 $N$ 条裁剪线的相关信息，请求出沿着这些裁剪线剪开之后，这张纸被分成了多少个部分。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含三个以空格分开的整数 $W,H,N$ ，$W$ 表示纸横向边的长度，$H$ 表示纸纵向边的长度，$N$ 表示裁剪线的条数。纸的左下、右下、左上、右上顶点坐标各自为 $(0,0),(W,0),(0,H),(W,H)$ 。\r\n\r\n接下来 $N$ 行中的第 $i(1\\le i\\le N)$ 行包含四个以空格分开的整数 $A_{i},B_{i},C_{i},D_{i}(0\\le A_{i}\\le C_{i}\\le W, 0\\le B_{i}\\le D_{i}\\le H)$ ，表示第 $i$ 条裁剪线是连接点 $(A_{i},B_{i})$ 和 $(C_{i},D_{i})$ 的线段。这条线段一定平行于纸的某一条边，也就是说，$A_{i}=C_{i}$ 和 $B_{i}=D_{i}$ 中恰有一个成立。而且，相互平行的裁剪线之间没有公共点，裁剪线和与之平行的边之间也没有公共点。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出到标准输出，表示纸被分成的部分个数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 输入样例 1\r\n```plain\r\n10 10 5\r\n6 0 6 7\r\n0 6 7 6\r\n2 3 9 3\r\n2 3 2 10\r\n1 9 8 9\r\n```\r\n\r\n#### 输出样例 1\r\n```plain\r\n4\r\n```\r\n\r\n#### 样例说明 1\r\n\r\n输入数据对应裁剪线位置如下图：\r\n\r\n![](https://dn-coding-net-production-file.qbox.me/d67e93c0-a2b5-11e8-a1c1-bd18bb2f78f1.png?attname=JOI2014+Final+T5-1.png&e=1535448307&token=goE9CtaiT5YaIP6ZQ1nAafd_C1Z_H2gVP8AwuC-5:g-bSzcqS1jamcIgwq6KMITy-cX0=)\r\n\r\n因此，纸会被裁剪线划分成 4 个部分。另外，本组输入数据满足子任务 4 的条件。\r\n\r\n#### 输入样例 2\r\n```plain\r\n13 7 28\r\n1 1 4 1\r\n1 1 1 3\r\n2 2 3 2\r\n2 2 2 3\r\n1 3 2 3\r\n3 2 3 6\r\n4 1 4 6\r\n3 6 4 6\r\n5 1 8 1\r\n5 1 5 6\r\n6 2 7 2\r\n6 2 6 5\r\n7 2 7 5\r\n6 5 7 5\r\n8 1 8 6\r\n5 6 8 6\r\n9 1 12 1\r\n9 1 9 2\r\n9 2 10 2\r\n12 1 12 2\r\n11 2 12 2\r\n10 2 10 5\r\n9 5 10 5\r\n9 5 9 6\r\n11 2 11 5\r\n11 5 12 5\r\n12 5 12 6\r\n9 6 12 6\r\n```\r\n\r\n#### 输出样例 2\r\n```plain\r\n5\r\n```\r\n\r\n#### 样例说明 2\r\n\r\n输入数据对应裁剪线位置如下图：\r\n\r\n![](https://dn-coding-net-production-file.qbox.me/dbbfcac0-a2b5-11e8-a1c1-bd18bb2f78f1.png?attname=JOI2014+Final+T5-2.png&e=1535448307&token=goE9CtaiT5YaIP6ZQ1nAafd_C1Z_H2gVP8AwuC-5:lCgSQW7dYO_nVBSKzCBlVEtp_3s=)\r\n\r\n因此，纸会被裁剪线划分成 5 个部分。另外，本组输入数据并不满足子任务 4 的条件。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"全部的输入数据满足以下条件：\r\n\r\n- $1\\le W\\le 10^{9}$\r\n- $1\\le H\\le 10^{9}$\r\n- $1\\le N\\le 100000$\r\n\r\n#### 子任务 1 [5 分]\r\n\r\n满足以下条件：\r\n\r\n- $W\\le 1000$\r\n- $H\\le 1000$\r\n- $N\\le 1000$\r\n\r\n#### 子任务 2 [5 分]\r\n\r\n满足以下条件：\r\n\r\n- $N\\le 1000$\r\n\r\n#### 子任务 3 [20 分]\r\n\r\n拥有公共点的不同裁剪线对数不超过 $100000$。\r\n\r\n#### 子任务 4 [20 分]\r\n\r\n从裁剪线上任意一点出发，都能沿着裁剪线走到纸的边上。\r\n\r\n#### 子任务 5 [50 分]\r\n\r\n没有额外限制。\r\n"}]}