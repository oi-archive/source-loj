{"title":"「2017 山东二轮集训 Day4」增添","time_limit":1000,"memory_limit":1024,"tags":[],"operation":{"submit":"https://loj.ac/problem/6109#submit_code","submissions":"https://loj.ac/submissions?problem_id=6109","statistics":"https://loj.ac/problem/6109/statistics/fastest","testdata":"https://loj.ac/problem/6109/testdata","discussion":"https://loj.ac/discussion/problem/6109"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有一个长度为 $ n $ 的序列，要求支持三种操作：\r\n\r\n* `1 l r x` 将 $ [l, r] $ 中的数增加 $ x $，保证 $ x \\leq 10000 $；\r\n* `2 l r x` 用 $ [l, l + x] $ 中的数对应替换 $ [r, r + x] $ 中的数；\r\n* `3 l r` 求 $ [l, r] $ 中所有数的和。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个正整数 $ n, m $ 表示序列长度和操作数。  \r\n第二行 $ n $ 个正整数表示初始序列中的数，保证每个数 $ \\leq 10000 $。  \r\n接下来 $ m $ 行，每行三或四个整数，对应一个操作。  \r\n保证操作的区间合法且为 $ [1, n] $ 的子集。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对每个操作三，单独输出一行表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4 4\r\n1 2 3 4\r\n1 2 3 4\r\n3 1 4\r\n2 1 3 1\r\n3 2 4\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n18\r\n13\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$ n \\leq 100000, m \\leq 100000 $"}]}