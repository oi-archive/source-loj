{"title":"「COCI 2014.11.29」 KAMIONI","time_limit":1000,"memory_limit":256,"tags":["2014","COCI"],"operation":{"submit":"https://loj.ac/problem/2812#submit_code","submissions":"https://loj.ac/submissions?problem_id=2812","statistics":"https://loj.ac/problem/2812/statistics/fastest","testdata":"https://loj.ac/problem/2812/testdata","discussion":"https://loj.ac/discussion/problem/2812"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [COCI 2014.11.29](http://www.hsin.hr/coci/archive/2014_2015/) T6.** ***[KAMIONI](https://hsin.hr/coci/archive/2014_2015/contest3_tasks.pdf)***\r\n\r\n有一条马路，我们将其视为一条数轴。马路上有 $N$ 辆卡车，开始时，卡车都在整点上。所有卡车一起开始移动，并且都以**同样的速率**移动。**没有卡车保持静止**。每辆卡车花 $1$ 分钟可以移动 $1$ 个单位距离。\r\n\r\n给出每辆卡车的「路线」。路线用一个含有 $k$ 个元素的数组 $A_1,A_2,\\dots,A_k$ 表示。该卡车首先 $A_1$ 开往 $A_2$，然后立即掉头开往 $A_3$，以此类推。忽略掉头的耗时。考虑到卡车会掉头，我们保证：\r\n\r\n$$A_1 < A_2 > A_3 < A_4 > \\dots\\ \\mathrm{or}\\ A_1 > A_2 < A_3 > A_4 < \\dots$$\r\n\r\n一条可能的路线为 $2→5→1→7$（给出的点要么是起点，要么是终点，要么就是掉头的位置）。开始时卡车位于 $2$，出发 $3$ 分钟后到达位置 $5$，接着掉头。卡车继续行驶到位置 $1$ ，此时距出发已过去了 $7$ 分钟。卡车再次掉头，并行驶到位置 $7$，此时距出发已经经过了 $13$ 分钟。\r\n\r\n当卡车到达路线终点后，会有神秘的外星人出现并把它带回飞船。\r\n\r\n给出这 $N$ 辆卡车的路线。现在有 $M$ 组询问，每组询问包含两辆卡车。对于每组询问，请回答这对卡车出现在同一位置的次数。位置不一定是整数，比如它们可以在位置 $2.5$ 相遇。\r\n\r\n请注意，保证每一对**询问的**（而不是随便一对）卡车：\r\n\r\n - 其中一个被外星人带走的时候，它们不会在同一位置。\r\n - 它们不会在初始时刻或是其中一个转弯的时候在同一位置。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行，两个整数 $N$ 和 $M(1 \\le N \\le 10^5,1 \\le M \\le 10^5)$，表示卡车的数量和询问的卡车的对数。\r\n\r\n以下 $N$ 行，其中第 $i$ 行表示第 $i$ 辆卡车的路线。  \r\n每行第一个整数 $K_i(1 \\le K_i \\le 3 \\cdot 10^5)$ 表示路线的长度。紧接着是 $K_i$ 个整数 $A_j(1 \\le A_j \\le 10^9)$，表示卡车 $i$ 路线上的点。给出的点要么是起点，要么是终点，要么就是掉头的位置。  \r\n所有卡车移动的总路程之和不会超过 $3 \\cdot 10 ^5$。\r\n\r\n以下 $M$ 行，其中第 $i$ 行包含两个整数 $(a_i,b_i)$，表示第 $i$ 个询问的两辆卡车。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $M$ 行，第 $i$ 行包含我们询问的第 $i$ 对卡车相遇的次数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3 3\r\n3 1 3 1\r\n2 2 1\r\n3 3 1 3\r\n1 2\r\n2 3\r\n3 1\r\n```\r\n#### 样例输出 1\r\n```plain\r\n1\r\n0\r\n2\r\n```\r\n#### 样例输入 2\r\n```plain\r\n2 1\r\n4 1 6 3 6\r\n7 3 4 2 6 5 6 1\r\n1 2\r\n```\r\n#### 样例输出 2\r\n```plain\r\n3\r\n```\r\n#### 样例输入 3\r\n```plain\r\n3 4\r\n3 1 4 2\r\n4 3 4 2 4\r\n3 4 1 3\r\n1 2\r\n2 3\r\n3 1\r\n1 3\r\n```\r\n#### 样例输出 3\r\n```plain\r\n2\r\n1\r\n2\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $50\\%$ 的数据，保证 $N \\le 10^2,K_i \\le 10^3,M \\le 10^3$。"}]}