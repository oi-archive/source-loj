{"title":"持久化序列","time_limit":1500,"memory_limit":768,"tags":["模板","平衡树","可持久化","数据结构"],"operation":{"submit":"https://loj.ac/problem/120#submit_code","submissions":"https://loj.ac/submissions?problem_id=120","statistics":"https://loj.ac/problem/120/statistics/fastest","testdata":"https://loj.ac/problem/120/testdata","discussion":"https://loj.ac/discussion/problem/120"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"这是一道模板题。\r\n\r\n您需要维护一个序列，其中需要提供以下操作：\r\n\r\n1. 插入一个数到序列的第 $ t $ 版本使其成为序列的第 $ k $ 项，这个数为 $ x $ ；\r\n2. 删除序列的第 $ t $ 版本的第 $ k $ 项；\r\n3. 查询序列的第 $ t $ 版本的第 $ k $ 项。\r\n\r\n第 $ 0 $ 个版本为空序列。修改操作不会影响被修改的版本，而总是产生一个新版本。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有一个正整数 $ n $ 表示操作的数量。\r\n\r\n接下来 $ n $ 行每行第一个正整数 $ opt $ 表示操作的类型，后面有 $ 3 $ 个整数 $ t, k, x $ 或 $ 2 $ 个整数 $ t, k $ 表示操作的参数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个查询操作输出一行一个数，表示查询的结果。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n17\r\n1 0 1 1\r\n1 1 1 2\r\n1 2 1 3\r\n2 3 2\r\n3 4 2\r\n1 4 3 4\r\n1 5 1 5\r\n3 3 2\r\n1 3 4 6\r\n1 6 3 7\r\n1 7 1 8\r\n3 8 2\r\n3 7 3\r\n2 8 4\r\n2 9 2\r\n3 11 4\r\n3 10 4\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n1\r\n2\r\n3\r\n1\r\n6\r\n4\r\n```\r\n\r\n#### 样例解释\r\n每次操作后的序列如下\r\n```plain\r\n1 | 1\r\n2 | 2 1\r\n3 | 3 2 1\r\n4 | 3 1\r\n(=> 1)\r\n5 | 3 1 4\r\n6 | 5 3 1 4\r\n(=> 2)\r\n7 | 3 2 1 6\r\n8 | 5 3 7 1 4\r\n9 | 8 3 2 1 6\r\n(=> 3)\r\n(=> 1)\r\n10 | 5 3 7 4\r\n11 | 8 2 1 6\r\n(=> 6)\r\n(=> 4)\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":" $ 1 \\leq n \\leq 3 \\times 10^5, 1 \\leq opt \\leq 3, 0 \\leq x < 10^9 $，保证所有操作合法。\r\n"}]}