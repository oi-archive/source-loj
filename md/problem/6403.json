{"title":"「ICPC World Finals 2018」赶飞机","time_limit":10000,"memory_limit":1024,"tags":["2018","ICPC","World Final"],"operation":{"submit":"https://loj.ac/problem/6403#submit_code","submissions":"https://loj.ac/submissions?problem_id=6403","statistics":"https://loj.ac/problem/6403/statistics/fastest","testdata":"https://loj.ac/problem/6403/testdata","discussion":"https://loj.ac/discussion/problem/6403"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"前往 ICPC Finals 的飞机即将起飞，并且唯一的前往机场的方式是公交车。不幸运的是，一部分公交车司机正在罢工，所以你无法确定是否能及时赶往机场。你的目标是规划你的行程来最大化赶上飞机的概率。\r\n\r\n你有一张非常详细的地图，地图上列有所有的公交车站。你在编号为 $0$ 的车站，而机场在编号为 $1$ 的车站，并且你知道每辆公交车的出发时间和到达时间，以及公交车按计划运行的概率（因为公交车司机可能会罢工）。假设各个公交车的罢工事件之间条件无关，也就是说，对于任何一辆公交车，即使你知道其它的公交车是否按计划运行，该公交车按计划运行的概率也不会改变。\r\n\r\n如果你在出发时间前到达了起点站，你便可以坐上那辆车。但如果你在出发时间时恰好到达了起点站，你就没有足够的时间上车。你无法提前预知公交车是否会按计划运行——在上车后才能判断。也就是说，如果有多辆车在同一时间出发，你只能尝试上其中的一辆车。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个整数 $m (1 \\le m \\le 10^6)$ 和 $n (2 \\le n \\le 10^6)$，分别表示公交车的数量和车站的数量。\r\n\r\n接下来一行有一个整数 $k (1 \\le k \\le 10^{18})$，表示你必须到达机场的时间。\r\n\r\n接下来 $m$ 行每行描述一个公交车。每行有两个整数 $a,b (0 \\le a,b \\lt n,a \\neq b)$，分别表示公交车的起点站和目的地。接下来两个整数 $s,t (0 \\le s \\lt t \\le k)$，表示从车站 $a$ 的出发时间和到达车站 $b$ 的时间。最后为一个实数 $p (0 \\le p \\le 1)$，小数点后不超过 $10$ 位，表示公交车按计划运行的概率。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出最优策略下赶上飞机的概率。你的答案的绝对误差不能超过 $10^{-6}$."},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n8 4\r\n1000\r\n0 1 0 900 0.2\r\n0 2 100 500 1.0\r\n2 1 500 700 1.0\r\n2 1 501 701 0.1\r\n0 3 200 400 0.5\r\n3 1 500 800 0.1\r\n3 0 550 650 0.9\r\n0 1 700 900 0.1\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n0.3124\r\n```\r\n\r\n#### 样例解释 1\r\n![schedule.png](https://i.loli.net/2018/04/20/5ad9542bb7d57.png)\r\n\r\n考虑上图所示的公交计划表。上面列出了几条公交路线的出发地、目的地以及出发时间和到达时间。你在部分公交车计划后面写上了该公交按计划运行的概率。没有写概率的公交车会以 $100\\%$ 的概率按计划运行。你可以先尝试第一辆列出的公交车。如果该公交车按计划运行，你便可以直接到达机场，无需担忧。但如果没有，则事情变得复杂起来。假如你上了第二辆公交车，则这辆车一定会出发，但等这辆车到站时你无法赶上第三辆公交车前往机场。你可以上第 $4$ 辆车，但这辆车只有 $0.1$ 的概率启动。所以更好的方案是待在 $0$ 站并乘坐第 $5$ 辆车。如果该车没有出发，你还有机会回到第 $0$ 站并乘坐最后一个公交车直接前往机场。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$1 \\le m \\le 10^6$ \r\n\r\n$2 \\le n \\le 10^6$\r\n\r\n$1 \\le k \\le 10^{18}$\r\n\r\n在不侵犯原题版权的情况下，本题面中文翻译基于[知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议](http://creativecommons.org/licenses/by-nc-sa/4.0/)发布，注明出处时需指向本题链接。"}]}