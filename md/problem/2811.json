{"title":"「COCI 2014.11.29」STOGOVI","time_limit":1000,"memory_limit":256,"tags":["2014","COCI"],"operation":{"submit":"https://loj.ac/problem/2811#submit_code","submissions":"https://loj.ac/submissions?problem_id=2811","statistics":"https://loj.ac/problem/2811/statistics/fastest","testdata":"https://loj.ac/problem/2811/testdata","discussion":"https://loj.ac/discussion/problem/2811"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [COCI 2014.11.29](http://www.hsin.hr/coci/archive/2014_2015/) T5.** ***[STOGOVI](https://hsin.hr/coci/archive/2014_2015/contest3_tasks.pdf)***\r\n\r\nMirko 正在玩栈。游戏开始时，他有一个编号为 $0$ 的空栈。在游戏中的第 $i$ 步，他会选择一个存在的编号为 $v$ 的栈，将它复制一份并进行以下其中一种操作：\r\n\r\n 1. 将数字 $i$ 加入新栈的顶部。\r\n\r\n 2. 将新栈顶部的数字删除。\r\n\r\n 3. 选择另外一个编号为 $w$ 的栈，并统计新栈与栈 $w$ 中有多少个不同的数字。\r\n\r\n新创建的栈编号为 $i$。\r\n\r\nMirko 不喜欢自己用栈模拟这个过程，所以他想要你替他写一个程序来执行这个过程。对于每个删除操作输出删除的数，且对于每个统计操作，输出统计的结果。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行，一个整数 $N(1 \\le N \\le 300\\ 000)$，表示这局游戏的步数。\r\n\r\n游戏的步骤以时间顺序按前 $N$ 个整数编号。\r\n\r\n以下 $N$ 行，第 $i$ 行表示游戏的第 $i$ 步，为以下三种格式之一：\r\n\r\n - `a v`，表示加入操作。\r\n\r\n - `b v`，表示删除操作。\r\n\r\n - `c v w`，表示统计操作。\r\n\r\n操作所涉及的编号一定在 $[0,i-1]$ 中。\r\n\r\n保证删除操作不会操作空栈。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个删除或统计操作，输出一行，表示请求的数字。按照输入文件给出的操作顺序排列。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5\r\na 0\r\na 1\r\nb 2\r\nc 2 3\r\nb 4\r\n```\r\n#### 样例输出 1\r\n```plain\r\n2\r\n1\r\n2\r\n```\r\n#### 样例解释 1\r\n开始时，我们有栈 $S_0 = \\{\\}$。\r\n第一步，我们复制 $S_0$ 并将数字 $1$ 加入到顶部，$S_1 = \\{1\\}$。\r\n第二步，我们复制 $S_1$ 并将数字 $2$ 加入到顶部，$S_2 = \\{1,2\\}$。\r\n第三步，我们复制 $S_2$ 并删除数字，$2$，$S_3 = \\{1\\}$。\r\n第四步，我们复制 $S_2$ 并编号为 $S_4$，统计 $S_4$ 与 $S_3$ 间不同的数字个数。唯一不同的数字是 $1$，所以答案为 $1$。\r\n第五步，我们复制 $S_4$ 并删除数字，$2$，$S_5 = \\{1\\}$。\r\n#### 样例输入 2\r\n```plain\r\n11\r\na 0\r\na 1\r\na 2\r\na 3\r\na 2\r\nc 4 5\r\na 5\r\na 6\r\nc 8 7\r\nb 8\r\nb 8\r\n```\r\n#### 样例输出 2\r\n```plain\r\n2\r\n2\r\n8\r\n8\r\n```"}]}