{"title":"「2019 集训队互测 Day 5」小水题","time_limit":4000,"memory_limit":1024,"tags":["集训队互测","2019","线段树","数据结构"],"operation":{"submit":"https://loj.ac/problem/3082#submit_code","submissions":"https://loj.ac/submissions?problem_id=3082","statistics":"https://loj.ac/problem/3082/statistics/fastest","testdata":"https://loj.ac/problem/3082/testdata","discussion":"https://loj.ac/discussion/problem/3082"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"<b>C<font color=red>auchySheep</font></b> 出了一道小水题。\r\n\r\n有 $n$ 个底面积相同的水槽排成一排，相邻两个水槽共用一个隔板，第 $i$ 个水槽与第 $i+1$ 个水槽之间的隔板高度为 $b_i$。最左边与最右边的隔板高度可以视为无限大。初始时所有水槽是静止的，第 $i$ 个水槽初始水位是 $a_i$。你需要维护以下两种操作：\r\n\r\n- 给定 $x$ 和 $h$，在第 $x$ 个水槽和第 $x+1$ 个水槽之间的隔板的高度 $h$ 处钻一个小孔。这之后一些水槽的水位会发生变化，你应该一直等到这些水槽恢复静止。\r\n- 给定 $x$，询问此时第 $x$ 个水槽的水位。\r\n\r\n请你完成这道充满着水的小水题吧！\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"\r\n从标准输入读入数据。\r\n\r\n第一行两个整数 $n, q$，分别表示水槽数和操作数。\r\n\r\n第二行 $n$ 个由空格隔开的实数 $a_i$，表示初始水位。\r\n\r\n第三行 $n-1$ 个由空格隔开的实数 $b_i$，表示初始隔板高度。\r\n\r\n接下来 $q$ 行每行描述一个操作：\r\n\r\n* `1 x h` 表示第一种操作，保证 $1 \\le x \\lt n$。注意 $h$ 是实数。\r\n* `2 x` 表示第二种操作，保证 $1 \\le x \\le n$。\r\n\r\n输入中出现的所有实数最多有七位小数。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"\r\n输出到标准输出中。\r\n\r\n对于第二种操作，每一行输出答案。\r\n\r\n最后一行输出 $n$ 个空格隔开的实数，表示操作结束后的每个水槽的水位。\r\n\r\n绝对误差在 $10^{-7}$ 内即可接受。\r\n\r\n注意你应该保证你的输出中只有实数（或整数），否则我们不能保证spj可以正常运行。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5 10\r\n3 1 3 1 10\r\n10 10 10 10\r\n1 1 1\r\n2 1\r\n2 2\r\n1 3 5\r\n1 4 5\r\n2 3\r\n2 4\r\n2 5\r\n1 2 0\r\n2 1\r\n```\r\n\r\n#### 样例输出 1\r\n```\r\n2.00000000\r\n2.00000000\r\n4.00000000\r\n5.00000000\r\n5.00000000\r\n2.66666667\r\n2.66666667 2.66666667 2.66666667 5.00000000 5.00000000\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n5 2\r\n6.62 5.02 1.49 4.35 4.01\r\n7.83 7.10 5.90 7.93\r\n1 3 2.91\r\n1 4 2.17\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n6.62000000 5.02000000 3.28333333 3.28333333 3.28333333\r\n```\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"在这题中，我们使用一个理想模型。即我们假设水的体积不变，并且忽视水的表面张力、摩擦力等。你可以认为钻孔之后的水位变化是符合生活常识的。你可以认为，对于两个相邻的水位 $a_i, a_{i+1}$，以及它们之间隔板存在一个高度为 $h$ 的小孔（或初始隔板高度为 $h$ ），如果有 $a_i \\gt h, a_i \\gt a_{i+1}$，那么将会有水从 $i$ 流向 $i+1$。对称地，如果有 $a_{i+1} \\gt h, a_{i+1} \\gt a_i$，那么将会有水从 $i+1$ 流向 $i$。水从 $x$ 流向 $y$ 是指 $a_x$ 不断减少，$a_y$ 不断增加，并且保持它们的和不变。\r\n\r\n出题人友情提醒： 请妥善处理浮点数运算造成的**精度误差**。\r\n\r\n对于所有测试数据，$1 \\le n, q \\le 100000$，$0 \\le a_i, h \\le 100$，对于 $1 \\le i \\lt n$，有 $b_i \\ge \\max(a_i, a_{i+1})$。输入中出现的所有实数最多有七位小数。\r\n\r\n* 子任务 $1$（$1$ 分）：$1 \\le n, q \\le 10$；\r\n* 子任务 $2$（$10$ 分）：$1 \\le n, q \\le 300$；\r\n* 子任务 $3$（$10$ 分）：$1 \\le n, q \\le 2000$，对于 $i\\gt 1$，满足 $a_i = 0$；\r\n* 子任务 $4$（$10$ 分）：$1 \\le n, q \\le 2000$；\r\n* 子任务 $5$（$30$ 分）：对于 $i>1$，满足 $a_i = 0$；\r\n* 子任务 $6$（$39$ 分）：无特殊限制。\r\n"}]}