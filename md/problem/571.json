{"title":"「LibreOJ Round #11」Misaka Network 与 Accelerator","time_limit":3000,"memory_limit":1024,"tags":["LibreOJ Round","2-SAT"],"operation":{"submit":"https://loj.ac/problem/571#submit_code","submissions":"https://loj.ac/submissions?problem_id=571","statistics":"https://loj.ac/problem/571/statistics/fastest","testdata":"https://loj.ac/problem/571/testdata","discussion":"https://loj.ac/discussion/problem/571"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"一方通行出事了。\r\n\r\n现在计划用 Misaka Network 的来弥补一方通行的计算力。Misaka Network 由 $N$ 个个体组成，个体之间由 $N-1$ 条边连接，边连接的两个个体可以通过脑电波互通信息。Misaka Network 的构造保证任意个体能够直接或间接通信，即构成一棵树。\r\n\r\n现在要让一方通行接入这个网络，一方通行可以选择一部分个体，并与这些个体之间通信。但是出于稳定性要求，有一些限制条件，每个条件给出 $a, \\mathrm{type}$：\r\n* $\\mathrm{type} = 0$：如果一方通行不和 $a$ 号个体直接通信，那么他不能和任何距离 $a$ 在 $[L,R]$ 之间的个体直接通信\r\n* $\\mathrm{type} = 1$：如果一方通行不和 $a$ 号个体直接通信，那么他必须和所有距离 $a$ 在 $[L,R]$ 之间的个体直接通信\r\n* $\\mathrm{type} = 2$：如果一方通行决定和 $a$ 号个体直接通信，那么他不能和任何距离 $a$ 在 $[L,R]$ 之间的个体直接通信\r\n* $\\mathrm{type} = 3$：如果一方通行决定和 $a$ 号个体直接通信，那么他必须和所有距离 $a$ 在 $[L,R]$ 之间的个体直接通信\r\n\r\n其中 $L, R$ 都是 Misaka Network 的参数，各个限制都是一样的。\r\n\r\n如果一种通信方案能满足所有条件，那么一方通行就能成功接入网络。一方通行想知道是否能够成功接入网络。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行四个整数 $N, M, L, R$。\r\n\r\n接下来 $N-1$ 行，每行两个整数 $u, v$，表示 $u$ 号个体和 $v$ 号个体之间有一条边。\r\n\r\n接下来 $M$ 行，每行两个整数 $a, \\mathrm{type}$，表示一组限制条件。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一行一个字符串 `YES` 或者 `NO`。若为 `NO`，表示一方通行无论如何都无法接入网络，否则为 `YES`。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3 2 1 2\r\n1 2\r\n1 3\r\n2 1\r\n3 1\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\nYES\r\n```\r\n\r\n#### 样例解释 1\r\n一种可行的方案是和所有个体都建立直接通信\r\n\r\n#### 样例输入 2\r\n```plain\r\n3 4 1 2\r\n1 2\r\n1 3\r\n1 0\r\n1 1\r\n1 2\r\n1 3\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\nNO\r\n```\r\n\r\n#### 样例 3\r\n见附加文件。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据 $1 \\leq N,M \\leq 50000$，$1 \\leq L \\leq R \\leq 50000$。\r\n\r\n|子任务编号|分值|$N,M$| 特殊性质|\r\n|:------------:|:----:|:------------:|:--------:|:--------:|:--------:|\r\n|1|$15$|$\\leq 20$|-|\r\n|2|$15$|$\\leq 1000$|-|\r\n|3|$35$|$\\leq 10000$|-|\r\n|4|$10$|$\\leq 50000$|保证输入是一条链|\r\n|5|$25$|$\\leq 50000$|-|\r\n"}]}