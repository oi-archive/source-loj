{"title":"「JOI Open 2019」三级跳","time_limit":4000,"memory_limit":512,"tags":["JOI","2019"],"operation":{"submit":"https://loj.ac/problem/3153#submit_code","submissions":"https://loj.ac/submissions?problem_id=3153","statistics":"https://loj.ac/problem/3153/statistics/fastest","testdata":"https://loj.ac/problem/3153/testdata","discussion":"https://loj.ac/discussion/problem/3153"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T1 「[三段跳び](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2019/jumps/2019-open-jumps-statement.pdf) / [Triple Jump](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2019/jumps/2019-open-jumps-statement-en.pdf)」**\r\n\r\n有一条很长的路，被划分为 $N$ 段并从 $1$ 到 $N$ 编号。每一段都一个坚固程度，第 $i$ 段路的坚固程度为 $A_i$。\r\n\r\nJOI 君是一位有天赋的体育明星。他将在这条路上进行三级跳。一次三级跳包含三次连续的跳跃动作。设 $a,b,c$ 为 JOI 君进行三级跳时三个起跳点的所在段，那么需要满足以下条件：\r\n- $a<b<c$。即：起跳点所在段需要严格递增；\r\n- $b-a\\le c-b$。即：第一次的跳跃距离应该不大于第二次的跳跃距离。\r\n\r\nJOI 君将进行 $Q$ 次三级跳。第 $j$ 次三级跳的所有起跳点所在段编号都在 $L_j$ 到 $R_j$ 范围内。换句话说，必须保证 $L_j\\le a<b<c\\le R_j$。\r\n\r\nJOI 君想在更坚固的段上起跳。对于每次三级跳，JOI 君想知道起跳点的最大坚固程度之和。\r\n\r\n写一个程序，在给定路的段数和每次三级跳的信息的情况下，计算对于每次三级跳，起跳点的最大坚固程度之和。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数 $N$，表示路的段数；\r\n\r\n第二行 $N$ 个整数 $A_i$，第 $i$ 个数表示第 $i$ 段路的坚固程度；\r\n\r\n第三行一个整数 $Q$，表示 JOI 君进行了 $Q$ 次三级跳；\r\n\r\n接下来 $Q$ 行，每行两个整数 $L_j,R_j$，表示每次三段跳进行的区间。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $Q$ 行，第 $j\\ (1\\le j\\le Q)$ 行表示对第 $j$ 个询问做出的回答。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5\r\n5 2 1 5 3\r\n3\r\n1 4\r\n2 5\r\n1 5\r\n```\r\n#### 样例输出 1\r\n```plain\r\n12\r\n9\r\n12\r\n```\r\n#### 样例说明 1\r\n对于第一次三级跳，JOI 君在 $1,2,4$ 段起跳，最大坚固程度之和为 $5+2+5=12$；\r\n\r\n对于第二次三级跳，JOI 君在 $3,4,5$ 段起跳，最大坚固程度之和为 $1+5+3=9$，如果他在 $2,4,5$ 段起跳，得到的坚固程度之和为 $10$，但这不满足 $b-a\\le c-b$，因此舍去；\r\n\r\n对于第三次三级跳，JOI 君在 $1,2,4$ 段起跳，最大坚固程度之和为 $5+2+5=12$，如果他在 $1,4,5$ 段起跳，得到的坚固程度之和为 $13$，但这不满足 $b-a\\le c-b$，因此舍去。\r\n\r\n#### 样例输入 2\r\n```plain\r\n5\r\n5 4 4 5 4\r\n1\r\n1 5\r\n```\r\n#### 样例输出 2\r\n```plain\r\n14\r\n```\r\n#### 样例说明 2\r\n这组数据满足子任务 $3$ 的限制条件。\r\n\r\n#### 样例输入 3\r\n```plain\r\n15\r\n12 96 100 61 54 66 37 34 58 21 21 1 13 50 81\r\n12\r\n1 15\r\n3 12\r\n11 14\r\n1 13\r\n5 9\r\n4 6\r\n6 14\r\n2 5\r\n4 15\r\n1 7\r\n1 10\r\n8 13\r\n```\r\n#### 样例输出 3\r\n```plain\r\n277\r\n227\r\n72\r\n262\r\n178\r\n181\r\n174\r\n257\r\n208\r\n262\r\n262\r\n113\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$3\\le N\\le 5\\times 10^5,1\\le Q\\le 5\\times 10^5,1\\le A_i\\le 10^9,1\\le L_j\\lt L_j+2\\le R_j\\le N$。\r\n\r\n详细子任务附加限制及分值如下表：\r\n\r\n| 子任务编号 |              附加限制               | 分值 |\r\n| :--------: | :---------------------------------: | :--: |\r\n|    $1$     |            $N,Q\\le 100$             | $5$  |\r\n|    $2$     |         $N\\le 5\\times 10^3$         | $14$ |\r\n|    $3$     | $N\\le 2\\times 10^5,Q=1,L_1=1,R_1=N$ | $27$ |\r\n|    $4$     |             无附加限制              | $54$ |\r\n\r\n"}]}