{"title":"「JOISC 2016 Day 4」危险的滑冰","time_limit":3000,"memory_limit":256,"tags":["2016","JOISC","最短路","图论","搜索"],"operation":{"submit":"https://loj.ac/problem/2738#submit_code","submissions":"https://loj.ac/submissions?problem_id=2738","statistics":"https://loj.ac/problem/2738/statistics/fastest","testdata":"https://loj.ac/problem/2738/testdata","discussion":"https://loj.ac/discussion/problem/2738"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOISC 2016](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/index.html) Day4 T1 「[危険なスケート](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/2016-sp-d4.pdf)」**\r\n\r\nJOI 君喜欢在自然形成的大冰场上滑冰。\r\n\r\n这个冰场可以用一个南北 $R$ 格，东西 $C$ 格的矩形表示。从北起第 $r$ 行，从西起第 $c$ 列的单元格表示为 $(r,c)$。对于每个单元格，要么 JOI 君可以通过，要么有冰块阻挡，JOI 君不能通过。此外，在矩形四周的单元格内都有冰块，所以滑冰者不能从冰场里滑出去。也就是说，$(i,1),(i,C)\\ (1\\le i\\le R)$ 和 $(1,j),(R,j)\\ (1\\le j\\le C)$ 这些单元格都是有冰块的。\r\n\r\nJOI 君不太会滑冰，在冰场里滑冰时，他会向东西南北四个方向之一蹬一下所处方格，然后停在恰好要撞上冰块之前的一个方格中。从一次蹬冰开始到停下来结束称为一次移动。如果蹬冰方向的相邻格有冰块，就不能向那个方向移动。\r\n\r\n一天，当 JOI 滑冰时，他发现当他蹬一下冰后，那个方格上就会出现冰块。冰块不会因为 JOI 通过某个格子而产生，只会因为蹬冰而产生。继续呆在这个冰场上十分危险，所以 JOI 君想尽快离开这个冰场。\r\n\r\nJOI 君目前在 $(r_1,c_1)$，为了从这个冰场离开，他需要停在出口 $(r_2,c_2)$ 上。请帮 JOI 计算至少需要移动多少次才能从目前位置离开冰场。由于冰场状况和你目前的位置的不同，JOI 君有可能无论如何移动都无法停在出口。注意 JOI 君必须要停在出口上，滑过出口是不可以的。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数 $R,C$，表示这个冰场南北有 $R$ 格，东西有 $C$ 格；\r\n\r\n接下来 $R$ 行，每行 $C$ 个字符，字符只包含 `.` 和 `#` 两种。第 $r$ 行第 $c$ 个字符如果是 `.`，表示这个格子可以通过，如果是 `#` 则表示这个格子上有冰块，不能通过；\r\n\r\n接下来一行两个整数 $r_1,c_1$，表示 JOI 君目前在 $(r_1,c_1)$ 处；\r\n\r\n\r\n接下来一行两个整数 $r_2,c_2$，表示出口在 $(r_2,c_2)$ 处。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数，如果 JOI 君能从冰场离开，则输出最少移动次数，否则输出 $-1$。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5 5\r\n#####\r\n#...#\r\n#...#\r\n#...#\r\n#####\r\n2 2\r\n3 3\r\n```\r\n#### 样例输出 1\r\n```plain\r\n4\r\n```\r\n#### 样例说明 1\r\n对于样例一，初始状态如下图，其中白色方形表示冰块，`J` 表示 JOI 君的初始位置，`E` 表示出口位置。\r\n\r\n![skate1.png](https://loj-img.upyun.menci.memset0.cn/2020/01/15/5e1df23e05f82.png)\r\n\r\n首先，JOI 君向东移动，之后冰场状态如下图：\r\n\r\n![skate2.png](https://loj-img.upyun.menci.memset0.cn/2020/01/15/5e1df23d5be71.png)\r\n\r\n之后，JOI 君按顺序向西，南，北移动，最后停在了出口处。所以输出 $4$，因为不可能在 $3$ 步或以下停在出口处。\r\n\r\n#### 样例输入 2\r\n```plain\r\n8 6\r\n######\r\n#..#.#\r\n##...#\r\n#....#\r\n#.#..#\r\n#....#\r\n##...#\r\n######\r\n4 3\r\n6 4\r\n```\r\n#### 样例输出 2\r\n```plain\r\n5\r\n```\r\n#### 样例输入 3\r\n```plain\r\n5 5\r\n#####\r\n#.#.#\r\n#.#.#\r\n#.#.#\r\n#####\r\n2 2\r\n4 4\r\n```\r\n#### 样例输出 3\r\n```plain\r\n-1\r\n```\r\n#### 样例输入 4\r\n```plain\r\n3 3\r\n###\r\n#.#\r\n###\r\n2 2\r\n2 2\r\n```\r\n#### 样例输出 4\r\n```plain\r\n0\r\n```\r\n#### 样例说明 4\r\n在样例 4 中，注意 JOI 君目前所在地可以是出口，最少移动次数为 $0$。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，满足 $3\\le R,C\\le 10^3,1\\le r_1,r_2\\le R,1\\le c_1,c_2\\le C$。输入保证 $(i,1),(i,C)\\ (1\\le i\\le R)$ 和 $(1,j),(R,j)\\ (1\\le j\\le C)$ 这些单元格都是冰块，并且 $(r_1,c_1)$ 和 $(r_2,c_2)$ 这两个单元格没有冰块。\r\n\r\n详细子任务及附加条件如下表：\r\n\r\n|子任务编号|附加条件|分值|\r\n|:-:|:-:|:-:|\r\n|$1$|$R,C\\le 10$，并且保证答案小于等于 $10$|$13$|\r\n|$2$|$R,C\\le 200$|$65$|\r\n|$3$|无附加限制|$22$|"}]}