{"title":"「PKUWC2018」随机游走","time_limit":1000,"memory_limit":512,"tags":["2018","状态压缩","概率与期望","DP"],"operation":{"submit":"https://loj.ac/problem/2542#submit_code","submissions":"https://loj.ac/submissions?problem_id=2542","statistics":"https://loj.ac/problem/2542/statistics/fastest","testdata":"https://loj.ac/problem/2542/testdata","discussion":"https://loj.ac/discussion/problem/2542"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给定一棵 $n$ 个结点的树，你从点 $x$ 出发，每次等概率随机选择一条与所在点相邻的边走过去。\r\n\r\n有 $Q$ 次询问，每次询问给定一个集合 $S$，求如果从 $x$ 出发一直随机游走，直到点集 $S$ 中所有点都至少经过一次的话，期望游走几步。\r\n\r\n特别地，点 $x$（即起点）视为一开始就被经过了一次。\r\n\r\n答案对 $998244353 $ 取模。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个正整数 $n,Q,x$。\r\n\r\n接下来 $n-1$ 行，每行两个正整数 $(u,v)$ 描述一条树边。\r\n\r\n接下来 $Q$ 行，每行第一个数 $k$ 表示集合大小，接下来 $k$ 个互不相同的数表示集合 $S$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $Q$ 行，每行一个非负整数表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n3 5 1\r\n1 2\r\n2 3\r\n1 1\r\n1 3\r\n2 2 3\r\n3 1 2 3\r\n2 1 2\r\n```\r\n\r\n##### 样例输出\r\n\r\n```plain \r\n0\r\n4\r\n4\r\n4\r\n1\r\n```\r\n#### 样例解释\r\n样例给的树是一条长度为 $3$ 的链，且起点是链的一端，所以答案只跟最远的那个点有关。\r\n\r\n当最远的点是 $2$ 时，显然只需要 $1$ 步就行了。\r\n\r\n当最远的点是 $3$ 时，通过计算可得期望 $4$ 步到达。\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $20\\%$ 的数据，有 $1\\leq n,Q\\leq 5$。\r\n\r\n另有 $10\\%$ 的数据，满足给定的树是一条链。\r\n\r\n另有 $10\\%$ 的数据，满足对于所有询问有 $k=1$。\r\n\r\n另有 $30\\%$ 的数据，满足 $1\\leq n\\leq 10 ,Q=1$。\r\n\r\n对于 $100\\%$ 的数据，有 $1\\leq n\\leq 18$，$1\\leq Q\\leq 5000$，$1\\leq k\\leq n$。"}]}