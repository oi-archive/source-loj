{"title":"「ROI 2017 Day 1」前往大都会","time_limit":4000,"memory_limit":512,"tags":["2017","ROI","凸包","图论","DP"],"operation":{"submit":"https://loj.ac/problem/2769#submit_code","submissions":"https://loj.ac/submissions?problem_id=2769","statistics":"https://loj.ac/problem/2769/statistics/fastest","testdata":"https://loj.ac/problem/2769/testdata","discussion":"https://loj.ac/discussion/problem/2769"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [ROI 2017](http://neerc.ifmo.ru/school/archive/2016-2017.html) Day 1 T4.** ***[Путешествие в Метрополис](http://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-roi-2017-day1.pdf)***\r\n\r\n某国有编号为 $1$ 到 $n$ 的 $n$ 座城市，还有编号为 $1$ 到 $m$ 的 $m$ 条铁路线。$i$ 号铁路线被沿途 $(s_i+1)$ 座城市分为 $s_i$ 段。$i$ 号铁路线从起点到终点依次经过 $v_{\\large i,1},$ $v_{\\large i,2},$ $\\dots,$ $v_{\\large i,s}$ 号城市，城市 $v_{\\large i,j}$ 通过这条线路到城市 $v_{\\large i,j+1}$ 花费的时间为 $t_{\\large i,j}$。**注意，本题中铁路线均为单向。**  \r\n现在，你位于 $1$ 号城市，你想要坐火车前往 $n$ 号城市，途中可以换乘。你希望花费的时间最少，并且在花费时间最少的情况下使经过任意两个相邻城市所花费时间的平方和尽可能大，保证给你的图是一个连通图。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行，两个整数 $n,m$，表示有 $n$ 个城市，$m$ 条铁路线。  \r\n以下 $m$ 行，每行描述一条铁路线：  \r\n开头一个整数 $s_i$，之后 $(2s_i+1)$ 个整数：$v_{\\large i,1},$ $t_{\\large i,1},$ $v_{\\large i,2},$ $t_{\\large i,2},$ $v_{\\large i,3}$ $\\dots$ $t_{\\large i,s_i},$ $v_{\\large i,s_i+1}$。  "},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一行，两个整数 $time,score$，表示最少花费时间与最大的平方和。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n2 1\r\n1 1 3 2\r\n```\r\n#### 样例输出 1\r\n```plain\r\n3 9\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n5 2\r\n4 1 3 2 3 3 5 5 10 4\r\n3 4 2 2 1 3 4 1\r\n```\r\n#### 样例输出 2\r\n```plain\r\n9 35\r\n```\r\n\r\n#### 样例说明 2\r\n样例 2 如图所示。  \r\n\r\n<div style=\"text-align: center;\">\r\n<img src=\"https://gitee.com/mingqihuang/pics/raw/master/www.alltoall.net_trains-2_2gnvdVfPWm.svg\" width=\"40%\" style=\"margin: 0 auto;\">  \r\n</div>\r\n\r\n从 $1$ 号城市乘坐 $1$ 号线直达 $5$ 号城市并非最佳方案（无法达到最短时间）。  \r\n最佳方案：\r\n* 从 $1$ 号城市乘坐 $1$ 号线到 $2$ 号城市；\r\n* 换乘 $2$ 号线，坐到 $3$ 号城市；\r\n* 再换乘 $1$ 号线，坐到 $5$ 号城市。\r\n\r\n此时，平方和为 $3^2 + 1^2 + 5^2 = 35$。  \r\n注意，这组样例不属于子任务 1 和子任务 2。\r\n\r\n#### 样例输入 3\r\n```plain\r\n5 2\r\n3 1 1 2 2 3 3 4\r\n3 2 2 3 3 4 4 5\r\n```\r\n#### 样例输出 3\r\n```plain\r\n10 82\r\n```\r\n\r\n#### 样例说明 3\r\n无论是在中途哪一站转 2 号线，结果都一样。平方和为 $1^2+9^2=82$。  \r\n注意，这组样例同样不属于子任务 1 和子任务 2。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$2 ⩽ n ⩽ 10^6,$ $1 ⩽ m ⩽ 10^6,$ $1 ⩽ v_{\\large i,j} ⩽ n,$ $1 ⩽ t_{\\large i,j} ⩽ 1000,$ $1 ⩽ \\sum s_i ⩽ 10^6$。\r\n\r\n|子任务|分值|$n$|$s_i$|\r\n|:-:|:-:|:-:|:-:|\r\n|1|10|$n ⩽ 10$|$\\sum s_i ⩽ 20, s_i = 1$|\r\n|2|&nbsp;10&nbsp;|$n ⩽ 1000$|$\\sum s_i ⩽ 1000, s_i = 1$|\r\n|3|17|$n ⩽ 1000$|$\\sum s_i ⩽ 1000$|\r\n|4|&nbsp;17&nbsp;|$n ⩽ 1000$|$\\sum s_i ⩽ 10^5$|\r\n|5|19|$n ⩽ 10^4$|$\\sum s_i ⩽ 2×10^5$|\r\n|6|&nbsp;19&nbsp;|$n ⩽ 2×10^5$|$\\sum s_i ⩽ 2×10^5$|\r\n|7|8|$n ⩽ 10^6$|$\\sum s_i ⩽ 10^6$|"}]}