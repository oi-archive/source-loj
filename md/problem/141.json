{"title":"回文子串","time_limit":1000,"memory_limit":256,"tags":["模板","字符串"],"operation":{"submit":"https://loj.ac/problem/141#submit_code","submissions":"https://loj.ac/submissions?problem_id=141","statistics":"https://loj.ac/problem/141/statistics/fastest","testdata":"https://loj.ac/problem/141/testdata","discussion":"https://loj.ac/discussion/problem/141"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"这是一道模板题。\r\n\r\n给定一个字符串 $ s $ 以及 $ Q $ 个操作。您需要编写一个程序以支持下列几种操作：\r\n\r\n1. 在字符串 $ s $ 的末尾添加一个字符串；\r\n2. 在字符串 $ s $ 的前端添加一个字符串的 **反序**；\r\n3. 查询字符串 $ s $ 的所有非空回文子串的数量。\r\n\r\n$ s $ 的两个子串视为不同，当且仅当这两个子串的长度不同或者这两个子串在 $ s $ 中的起始位置不同。\r\n$ s $ 的反序字符串定义为将 $ s $ 中前后对称位置的字符两两对调位置后形成的字符串。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入文件第一行包含一个字符串 $ s $。\r\n\r\n输入文件第二行包含一个整数 $ Q $，表示操作的数量。\r\n\r\n接下来 $ Q $ 行，每行首先包含一个整数 $ op $，其含义如下所示：\r\n\r\n+ 1：在字符串 $ s $ 的末尾添加一个字符串；\r\n+ 2：在字符串 $ s $ 的前端添加一个字符串的 **反序**；\r\n+ 3：查询字符串 $ s $ 的所有非空回文子串的数量。\r\n\r\n若 $ op $ 为 1 或 2，则接下来会给出一个字符串 $ t $，表示要在末尾或前端添加的字符串。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 $ op $ 为 3 的操作，分别在单独的一行上输出此时 $ s $ 中非空回文子串的数量。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入1\r\n```plain\r\naaa\r\n1\r\n3\r\n```\r\n\r\n#### 样例输出1\r\n```plain\r\n6\r\n```\r\n\r\n#### 样例输入2\r\n```plain\r\na\r\n5\r\n3\r\n1 bba\r\n3\r\n2 ab\r\n3\r\n```\r\n\r\n#### 样例输出2\r\n```plain\r\n1\r\n6\r\n10\r\n```\r\n\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 100\\% $ 的测试数据，保证有：\r\n\r\n初始时 $ 0 < |s| \\leq 10^5 $，$ 0 < Q \\leq 10^5 $，$ 0 < |t| < 1000 $ 且操作序列结束时有 $ 0 < |s| \\leq 4 \\times 10^5 $。"}]}