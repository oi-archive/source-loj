{"title":"「NOI2007」 货币兑换","time_limit":1000,"memory_limit":256,"tags":["NOI","早于 2010","平衡树","CDQ 分治","DP"],"operation":{"submit":"https://loj.ac/problem/2353#submit_code","submissions":"https://loj.ac/submissions?problem_id=2353","statistics":"https://loj.ac/problem/2353/statistics/fastest","testdata":"https://loj.ac/problem/2353/testdata","discussion":"https://loj.ac/discussion/problem/2353"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"小 $Y$ 最近在一家金券交易所工作。该金券交易所只发行交易两种金券： $A$ 纪念券（以下简称 $A$ 券）和 $B$ 纪念券（以下简称 $B$ 券）。每个持有金券的顾客都有一个自己的帐户。金券的数目可以是一个实数。每天随着市场的起伏波动，两种金券都有自己当时的价值，即每一单位金券当天可以兑换的人民币数目。我们记录第 $K$ 天中 $A$ 券和 $B$ 券的价值分别为 $A_K$ 和 $B_K$（元/单位金券）。为了方便顾客，金券交易所提供了一种非常方便的交易方式：比例交易法。比例交易法分为两个方面：\r\n - 卖出金券：顾客提供一个 $[0,100]$ 内的实数 $\\text{OP}$ 作为卖出比例，其意义为：将 $\\text{OP}\\%$ 的 $A$ 券和 $\\text{OP}\\%$ 的 $B$ 券以当时的价值兑换为人民币；\r\n - 买入金券：顾客支付 $\\text{IP}$ 元人民币，交易所将会兑换给用户总价值为 $\\text{IP}$ 的金券，并且，满足提供给顾客的 $A$ 券和 $B$ 券的比例在第 $K$ 天恰好为 $\\text{Rate}_K$ ；例如，假定接下来 $3$ 天内的 $A_k , B_k , \\text{Rate}_K$ 的变化分别为：     \r\n\r\n![dd(1).png](https://i.loli.net/2018/02/12/5a8146be1354d.png)\r\n\r\n假定在第一天时，用户手中有 $100$ 元人民币但是没有任何金券。用户可以执行以下的操作：\r\n\r\n![dd(2).png](https://i.loli.net/2018/02/12/5a8146be23a4c.png)\r\n\r\n注意到，同一天内可以进行多次操作。小 $Y$ 是一个很有经济头脑的员工，通过较长时间的运作和行情测算，他已经知道了未来 $N$ 天内的 $A$ 券和 $B$ 券的价值以及 $\\text{Rate}$ 。他还希望能够计算出来，如果开始时拥有 $S$ 元钱，那么 $N$ 天后最多能够获得多少元钱。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入第一行两个正整数 $N , S$ ，分别表示小 $Y$ 能预知的天数以及初始时拥有的钱数。   \r\n接下来 $N$ 行，第 $K$ 行三个实数 $A_K , B_K , \\text{Rate}_K$ ，意义如题目中所述。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"只有一个实数 $\\text{MaxProfit}$ ，表示第 $N$ 天的操作结束时能够获得的最大的金钱数目。答案与标准答案的绝对误差不超过 $10^{-3}$ 即视为答案正确。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n3 100\r\n1 1 1\r\n1 2 2\r\n2 2 3\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n225.000\r\n```\r\n\r\n#### 样例解释\r\n![dd(3).png](https://i.loli.net/2018/02/12/5a8146be2d7a6.png)"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"#### 数据范围\r\n对于 $40\\%$ 的测试数据，满足 $N \\le 10$ 。   \r\n对于 $60\\%$ 的测试数据，满足 $N \\le 1000$ 。    \r\n对于 $100\\%$ 的测试数据，满足 $ 1 \\le N \\le 10^5 , 0<A_K \\le 10 , 0<B_K \\le 10 , 0<\\text{Rate}_K \\le 100 , \\text{MaxProfit} \\le 10^9$ 。    \r\n\r\n#### 提示\r\n - 输入文件可能很大，请采用快速的读入方式。\r\n - 必然存在一种最优的买卖方案满足：每次买进操作使用完所有的人民币；每次卖出操作卖出所有的金券。\r\n"}]}