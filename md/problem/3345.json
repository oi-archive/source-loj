{"title":"「APIO2020」粉刷墙壁","time_limit":1500,"memory_limit":512,"tags":["APIO","2020","贪心","DP","复杂度分析"],"operation":{"submit":"https://loj.ac/problem/3345#submit_code","submissions":"https://loj.ac/submissions?problem_id=3345","statistics":"https://loj.ac/problem/3345/statistics/fastest","testdata":"https://loj.ac/problem/3345/testdata","discussion":"https://loj.ac/discussion/problem/3345"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"注意：**在 LibreOJ 上，由于语言限制，目前只支持以下语言的提交：**\r\n- C++ 11\r\n- C++ 11 (Clang)\r\n- C++ 11 (NOI)\r\n- C++ 17\r\n- C++ 17 (Clang)\r\n\r\n\r\n距离上一次 Pak Dengklek 在他的家中粉刷墙壁已经过了一段时间，所以他想重新粉刷一次。 他家的墙壁由 $N$ 段组成， 它们从 $0$ 到 $N - 1$ 编号。本题中我们假设存在 $K$ 种不同的颜色，颜色用从 $0$ 到 $K - 1$ 的整数表示（例如, 红色用 $0$ 表示, 蓝色用 $1$ 表示，以此类推）。Pak Dengklek 希望用第 $C_i$ 种颜色来粉刷第 $i$ 段的墙壁。\r\n\r\n为了粉刷墙壁, Pak Dengklek 雇用了一家有 $M$ 个承包商的承包商公司，承包商从 $0$ 到 $M - 1$ 编号。对 Pak Dengklek 来说不幸的是，承包商只愿意粉刷他们自己喜欢的颜色。具体来说，第 $j$ 个承包商喜欢 $A_j$ 种颜色，并且只想用下列颜色来粉刷墙壁：第 $B_{j,0}$ 种颜色，第 $B_{j,1}$ 种颜色，$\\ldots$，或第 $B_{j, A_j -1}$ 种颜色。\r\n\r\nPak Dengklek 可以给承包商公司提出一些要求。在单个要求中，Pak Dengklek 将给出两个参数 $x$ 和 $y$，其中 $0 \\le x \\lt M, 0 \\le y \\le N - M$。承包商公司将会指派第 $((x + l) \\bmod M)$ 个承包商粉刷第 $(y + l)$ 段墙壁，其中 $0 \\le l \\lt M$。如果存在一个 $l$ 使得第 $((x + l) \\bmod M)$ 个承包商不喜欢第 $C_{y+l}$ 种颜色，那么该要求将无效。\r\n\r\nPak Dengklek 需要为每个要求付费，因此他想知道为了使墙壁中每个段都能用自己预期的颜色粉刷，他至少要提出多少个要求，或是确认他的预期无法达到。每一段墙壁可以被粉刷多次，但必须保证每次粉刷的颜色都是 Pak Dengklek 所预期的。\r\n\r\n#### 实现细节\r\n\r\n你必须引用 `paint.h` 头文件。\r\n\r\n你必须实现 `minimumInstructions` 函数：\r\n\r\n```cpp\r\nint minimumInstructions(int N, int M, int K, std::vector<int> C, std::vector<int> A, std::vector<std::vector<int>> B)\r\n```\r\n\r\n该函数将被评测库恰好调用一次。\r\n- $N$：一个整数表示墙壁的段数。\r\n- $M$：一个整数表示承包商的数量。\r\n- $K$：一个整数表示颜色的种数。\r\n- $C$：一个长度为 $N$ 的整数序列，表示每段墙壁预期的颜色。\r\n- $A$：一个长度为 $M$ 的整数序列，表示承包商喜欢的颜色数。\r\n- $B$：一个长度为 $M$ 的每个元素为序列的序列，表示承包商喜欢的具体颜色。\r\n\r\n该函数必须返回一个整数，表示 Pak Dengklek 为了让墙壁按预期粉刷所需要提出的最小要求数；若预期无法达到则返回 $-1$。\r\n\r\n\r\n#### 样例评测库\r\n\r\n样例评测库将读入以下格式的数据：\r\n\r\n```plain\r\nN M K\r\nC[0] C[1] ... C[N-1]\r\nA[0] B[0][0] B[0][1] ... B[0][A[0]-1]\r\nA[1] B[1][0] B[1][1] ... B[1][A[1]-1]\r\n.\r\n.\r\n.\r\nA[M-1] B[M-1][0] B[M-1][1] ... B[M-1][A[M-1]-1]\r\n```\r\n\r\n样例评测库将输出函数 `minimumInstructions` 的返回值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"下面的输入输出是对于样例评测库而言的。\r\n\r\n#### 样例输入 1\r\n\r\n```plain\r\n8 3 5\r\n3 3 1 3 4 4 2 2\r\n3 0 1 2\r\n2 2 3\r\n2 3 4\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n3\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n$N = 8, M = 3, K = 5, C = [3, 3, 1, 3, 4, 4, 2, 2], A = [3, 2, 2], B = [[0, 1, 2], [2, 3], [3, 4]]$。Pak Dengklek 可以提出下列的要求。\r\n\r\n$x = 1, y = 0.$ 这是一个有效的要求，第一个承包商可以粉刷第零段墙壁，第二个承包商可以粉刷第一段墙壁，第零个承包商可以粉刷第二段墙壁。  \r\n$x = 0, y = 2.$ 这是一个有效的要求，第零个承包商可以粉刷第二段墙壁，第一个承包商可以粉刷第三段墙壁，第二个承包商可以粉刷第四段墙壁。  \r\n$x = 2, y = 5.$ 这是一个有效的要求，第二个承包商可以粉刷第五段墙壁，第零个承包商可以粉刷第六段墙壁，第一个承包商可以粉刷第七段墙壁。\r\n\r\n容易看出 Pak Dengklek 不能用少于 $3$ 个的要求来达到预期，因此 `minimumInstructions(8, 3, 5, [3, 3, 1, 3, 4, 4, 2, 2], [3, 2, 2], [[0, 1, 2], [2, 3], [3, 4]])` 应该返回 $3$。\r\n\r\n#### 样例输入 2\r\n\r\n```plain\r\n5 4 4\r\n1 0 1 2 2\r\n2 0 1\r\n1 1\r\n1 2\r\n1 3\r\n```\r\n\r\n#### 样例输出 2\r\n\r\n```plain\r\n-1\r\n```\r\n\r\n#### 样例解释 2\r\n\r\n$N = 5, M = 4, K = 4, C = [1, 0, 1, 2, 2]$。由于第三个承包商只喜欢第 $3$ 种颜色但没有任何一段墙壁能被该颜色粉刷，Pak Dengklek 无法给出任何有效指令。因此 `minimumInstructions(5, 4, 4, [1, 0, 1, 2, 2], [2, 1, 1, 1], [[0, 1], [1], [2], [3]])` 应该返回 $-1$。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $0 \\le k \\lt K$, 令 $f(k)$ 表示喜欢第 $k$ 种颜色的承包商数量。\r\n\r\n- $1 \\le N \\le 100\\,000$  \r\n- $1 \\le M \\le \\min(N, 50\\,000)$  \r\n- $1 \\le K \\le 100\\,000$  \r\n- $0 \\le C_i \\lt K$  \r\n- $1 \\le A_j \\le K$  \r\n- $0 \\le B_{j,0} \\lt B_{j,1} \\lt \\ldots \\lt B_{j,A_j-1} \\lt K$  \r\n- $\\sum f(k)^2 \\le 400\\,000$\r\n\r\n| 子任务 |                         附加限制                          | 分值  |\r\n| :----: | :-------------------------------------------------------: | :---: |\r\n|  $1$   |                        $f(k)\\le 1$                        | $12$  |\r\n|  $2$   | $N \\le 500$, $M \\le \\min(N, 200)$, $\\sum f(k)^2 \\le 1000$ | $15$  |\r\n|  $3$   |             $N \\le 500$, $M \\le \\min(N, 200)$             | $13$  |\r\n|  $4$   |           $N \\le 20\\,000$, $M \\le \\min(N, 2000)$            | $23$  |\r\n|  $5$   |                        无附加限制                         | $37$  |"}]}