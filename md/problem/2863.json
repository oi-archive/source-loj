{"title":"「IOI2018」组合动作","time_limit":1000,"memory_limit":268,"tags":["2018","IOI"],"operation":{"submit":"https://loj.ac/problem/2863#submit_code","submissions":"https://loj.ac/submissions?problem_id=2863","statistics":"https://loj.ac/problem/2863/statistics/fastest","testdata":"https://loj.ac/problem/2863/testdata","discussion":"https://loj.ac/discussion/problem/2863"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"你在玩一个动作游戏。游戏控制器有 $4$ 个按键，`A`、`B`、`X` 和 `Y`。在游戏中，你用组合动作来赚金币。你可以依次按这些按键来完成一个组合动作。\r\n这个游戏有一个隐藏的按键序列，可以表示为由这 $4$ 个字符组成的串 $S$。你并不知道这个串 $S$，但是你知道它的长度为 $N$。\r\n\r\n**你还知道，$S$ 的首字符不会在串中重复出现**。例如，$S$ 可以是“`ABXYY`”或者“`XYYAA`”，但不能是“`AAAAA`”或“`BXYBX`”。\r\n\r\n你可以依次按最多 $4N$ 个按键来完成一个组合动作。串 $p$ 为你所按的按键序列。你用这个组合动作赚到的金币数量，等于同时为 $p$ 之子串和 $S$ 之前缀的最长字符串的长度。串 $t$ 的子串定义为 $t$ 中的连续字符序列（可以为空）。$t$ 的前缀定义为 $t$ 的子串，其或者为空，或者包含 $t$ 的首字符。\r\n\r\n例如，如果 $S$ 是“`ABXYY`”，而 $p$ 是“`XXYYABYABXAY`”，你会得到 $3$ 个金币，因为“`ABX`”是可作为 $p$ 的子串的 $S$ 的前缀中最长的。\r\n\r\n你的任务是，用少量的组合动作，找出隐藏字符串 $S$。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"你需要实现下面的函数：\r\n\r\n```\r\nstring guess_sequence(int N)\r\n```\r\n\r\n* `N`：串 $S$ 的长度。\r\n* 对每个测试用例，该函数被调用恰好一次。\r\n* 该函数应返回串 $S$。\r\n\r\n你的程序可以调用下面的函数：\r\n\r\n```\r\nint press(string p)\r\n```\r\n\r\n* `p`：你的按键序列。\r\n* `p` 必须是长度为从 $0$ 到 $4N$ 的串（包括 $0$ 和 $4N$）。`p` 的每个字符必须是 `A`、`B`、`X` 或者 `Y`。\r\n* 对每个测试用例，你调用该函数的次数不能超过 $8\\ 000$ 次。\r\n* 该函数的返回结果是，当按出按键序列 `p` 后你赚到的金币数量。\r\n\r\n如果不满足上面的条件，你的程序将被判为 `Wrong  Answer`。否则，你的程序将被判为 `Accepted`，而你的得分将根据 `press` 的调用次数来计算（参见子任务）。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"设 $S$ 为“`ABXYY`”。评测程序调用了 `guess_sequence(5)`。数据交互过程的例子如下所示：\r\n\r\n|调用|返回值|\r\n|:-|:-|\r\n|`press(\"XXYYABYABXAY\")`|$3$|\r\n|`press(\"ABXYY\")`|$5$|\r\n|`press(\"ABXYYABXYY\")`|$5$|\r\n|`press(\"\")`|$0$|\r\n|`press(\"X\")`|$0$|\r\n|`press(\"BXYY\")`|$0$|\r\n|`press(\"YYXBA\")`|$1$|\r\n|`press(\"AY\")`|$1$|\r\n\r\n对于 `press` 的第 $1$ 次调用，“`ABX`”是“`XXYYABYABXAY`”的子串，而“`ABXY`”不是，因此返回 $3$。\r\n\r\n对于 `press` 的第 $3$ 次调用，“`ABXYY`”本身是“`ABXYYABXYY`”的子串，因此返回 $5$。\r\n\r\n对于 `press` 的第 $6$ 次调用，除了空串以外没有“`ABXYY`”的其他前缀可以是“`BXYY`”的子串，因此返回 $0$。\r\n\r\n最后，`guess_sequence(5)` 应当返回“`ABXYY`”。\r\n\r\n附件压缩包中的文件 `sample-01-in.txt` 对应于本例。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"* $1\\le N\\le 2\\ 000$\r\n* 串 $S$ 的每个字符必须是 `A`、`B`、`X` 或 `Y`。\r\n* $S$ 的首字符不会再 $S$ 中重复出现。\r\n\r\n在本题中，评测程序**不是**适应性的。意思是说，在评测程序开始运行的时候 $S$ 就固定下来，而且不依赖于你的程序所做的询问。\r\n\r\n#### 子任务\r\n\r\n1. （5分）$N=3$\r\n2. （95分）没有附加限制。对该子任务，你在每个测试用例上的得分将计算如下。设 $q$ 为调用 `press` 的次数。\r\n * 如果 $q\\le N+2$，你的得分为 $95$。\r\n * 如果 $N+2<q\\le N+10$，你的得分为 $95-3(q-N-2)$。\r\n * 如果 $N+10<q\\le 2N+1$，你的得分为 $25$。\r\n * 如果 $\\max\\{N+10,2N+1\\}<q\\le 4N$，你的得分为 $5$。\r\n * 否则，你的得分为 $0$。\r\n\r\n注意，你在每个子任务上的得分，等于你在该子任务下所有测试用例上的最低得分。\r\n\r\n#### 评测程序示例\r\n\r\n评测程序示例将读取如下格式的输入：\r\n\r\n* 第 $1$ 行：$S$\r\n\r\n如果你的程序被判为 `Accepted`，评测系统示例将打印出 `Accepted:  q`，这里 `q` 为函数 `press` 的调用次数。\r\n\r\n如果你的程序被判为 `Wrong Answer`，它打印出 `Wrong Answer: MSG`。各类 `MSG` 的含义如下：\r\n\r\n* `invalid press`：输入到 `press` 的值 `p` 是无效的。也就是说，`p` 的长度不在 $0$ 到 $4N$ 之间（含 $0$ 和 $4N$），或者 `p` 的某些字符不是 `A`、`B`、`X` 和 `Y`。\r\n* `too many moves`：函数 `press` 的调用次数超过 $8\\ 000$ 次。\r\n* `wrong guess`：`guess_sequence` 返回的不是 $S$。"}]}