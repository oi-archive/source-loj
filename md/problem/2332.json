{"title":"「JOI 2017 Final」焚风现象","time_limit":200,"memory_limit":256,"tags":["2017","JOI","差分","子任务"],"operation":{"submit":"https://loj.ac/problem/2332#submit_code","submissions":"https://loj.ac/submissions?problem_id=2332","statistics":"https://loj.ac/problem/2332/statistics/fastest","testdata":"https://loj.ac/problem/2332/testdata","discussion":"https://loj.ac/discussion/problem/2332"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOI 2017 Final](https://www.ioi-jp.org/joi/2016/2017-ho/) T1「[フェーン現象](https://www.ioi-jp.org/joi/2016/2017-ho/2017-ho.pdf) / [Foehn Phenomena](https://www.ioi-jp.org/joi/2016/2017-ho/2017-ho-en.pdf)」**\r\n\r\n> 焚风是是由于空气作绝热下沉运动时，因温度升高湿度降低而形成的一种干热风。焚风常出现在山脉背风坡，由山地引发的过山气流在背风坡下沉，使过山气流变得干热的一种风。在高压区，空气下沉也可产生焚风。\r\n\r\nIOI 王国永远刮着海风。风从地点 $0$ 依次吹到地点 $1$，地点 $2$ ……直到地点 $N$，共 $N+1$ 个地点。JOI 君住在地点 $N$。地点 $0$ 的海拔 $A_0=0$，地点 $i$ 的海拔为 $A_i$。  \r\n地表风的温度随海拔升降而变化。地点 $0$ 在海边，温度为 $0$ 度；对于任一地点 $ i$，从地点 $i$ 吹到地点 $i+1$ 的风的温差仅取决于两地的海拔差。具体来说：\r\n* 如果 $A_i=A_{i+1}$，风的温度不变；\r\n* 如果 $A_i<A_{i+1}$，风每爬升 $1$ 米，温度就会下降 $S$ 度；\r\n* 如果 $A_i> A_{i+1}$，风每下沉 $1$ 米，温度就会升高 $T$ 度。\r\n\r\nIOI 国的地壳运动很强烈。你得到了 $Q$ 天来地壳运动的数据。在第 $j$ 日，地点 $L_j, L_j+1, \\ldots, R_j$ 的海拔升高了 $X_j$，注意 $X_j$ 可能是负数。  \r\n你的任务是，计算每天地壳运动后 JOI 君住所的温度。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有四个整数 $N, Q, S, T$，用空格分隔。  \r\n在接下来的 $N+1$ 行中，第 $i$ 行 $(1\\leqslant i\\leqslant N+1)$ 有一个整数 $A_{i-1}$。  \r\n在接下来的 $Q$ 行中，第 $j$ 行 $(1\\leqslant j\\leqslant Q)$ 有三个整数 $L_j, R_j, X_j$，用空格分隔。  \r\n输入的所有数的含义见题目描述。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共 $Q$ 行，第 $j$ 行 $(1\\leqslant j\\leqslant Q)$ 有一个整数，表示第 $j$ 日地壳运动后  JOI 君住所的温度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3 5 1 2\r\n0\r\n4\r\n1\r\n8\r\n1 2 2\r\n1 1 -2\r\n2 3 5\r\n1 2 -1\r\n1 3 5\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n-5\r\n-7\r\n-13\r\n-13\r\n-18\r\n```\r\n\r\n#### 样例解释 1\r\n最初，地点 $0,1,2,3$ 的海拔分别是 $0,4,1,8$。第一天地壳运动后，海拔分别为 $0,6,3,8$。 此时，风的温度分别为 $0,-6,0,-5$。\r\n\r\n#### 样例输入 2\r\n```plain\r\n2 2 5 5\r\n0\r\n6\r\n-1\r\n1 1 4\r\n1 2 8\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n5\r\n-35\r\n```\r\n\r\n#### 样例输入 3\r\n```plain\r\n7 8 8 13\r\n0\r\n4\r\n-9\r\n4\r\n-2\r\n3\r\n10\r\n-9\r\n1 4 8\r\n3 5 -2\r\n3 3 9\r\n1 7 4\r\n3 5 -1\r\n5 6 3\r\n4 4 9\r\n6 7 -10\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n277\r\n277\r\n322\r\n290\r\n290\r\n290\r\n290\r\n370\r\n\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $30\\%$ 的数据，$N, Q\\leqslant 2000$；  \r\n对于另外 $10\\%$ 的数据，$S=T$；  \r\n对于所有数据，$1\\leqslant N, Q\\leqslant 2\\times 10^5, 1\\leqslant S, T\\leqslant 10^6;$ $A_0=0, |A_i|\\leqslant 10^6(1\\leqslant i\\leqslant N);$ $1\\leqslant L_j\\leqslant R_j\\leqslant N, $ $|X_j|\\leqslant 10^6$ $(1\\leqslant j\\leqslant Q)$。"}]}