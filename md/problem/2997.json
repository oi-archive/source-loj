{"title":"「JOISC 2015 Day 1」卡片占卜","time_limit":1000,"memory_limit":256,"tags":["2015","JOISC","最短路","差分"],"operation":{"submit":"https://loj.ac/problem/2997#submit_code","submissions":"https://loj.ac/submissions?problem_id=2997","statistics":"https://loj.ac/problem/2997/statistics/fastest","testdata":"https://loj.ac/problem/2997/testdata","discussion":"https://loj.ac/discussion/problem/2997"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [JOISC 2015](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/index.html) Day1 T4「[IOIOI カード占い](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/2015-sp-d1.pdf) / [IOIOI Cards](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/2015-sp-d1.pdf)」**\r\n\r\nK 理事长是占卜好手，他精通各种形式的占卜。今天，他要用正面写着 `I` ，背面写着 `O` 的卡片占卜一下日本 IOI 国家队的选手选择情况。\r\n\r\n占卜的方法如下：\r\n\r\n1. 首先，选取五个正整数 $A,B,C,D,E$；\r\n2. 然后，拿出 $A+B+C+D+E$ 张卡片摆成一排，从左至右摆成 $A$ 张正面，$B$ 张反面，$C$ 张正面，$D$ 张反面，$E$ 张正面的形式。也就是说，从左到右依次摆 $A$ 张 `I`，$B$ 张 `O`，$C$ 张 `I`，$D$ 张 `O`，$E$ 张 `I`；\r\n3. 再从预先确定的 $N$ 种操作中选择 $1$ 种及以上，然后按照自己喜欢的顺序进行操作，同样的操作可以进行 $1$ 次及以上。第 $i$ 种操作是「把从左到右第 $L_i$ 张卡片到第 $R_i$ 张卡片（包括两端）翻过来」，因为需要用手操作，所以翻 $1$ 张牌需要花费 $1$ 秒，完成一次操作需要花费 $R_i-L_i+1$ 秒；\r\n4. 操作后，如果所有牌都是正面朝上的，占卜就结束了。\r\n\r\n因为这种占卜比较费时，所以 K 理事长在占卜之前想知道占卜能否结束，如果能结束，他想知道占卜的最小耗时。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行，五个正整数 $A,B,C,D,E$，意义如题目描述；\r\n\r\n第二行，一个正整数 $N$，意义如题目描述；\r\n\r\n接下来 $N$ 行描述操作，一行两个正整数 $L_i,R_i$，意义如题目描述。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行，如果占卜能够结束，则输出一个正整数，表示占卜的最小耗时；如不能，输出 $-1$。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n1 2 3 4 5\r\n3\r\n2 3\r\n2 6\r\n4 10\r\n```\r\n#### 样例输出 1\r\n```plain\r\n12\r\n```\r\n#### 样例说明 1\r\n最初的卡片序列为 `IOOIIIOOOOIIIII`；  \r\n先进行第二个操作，卡片序列变为 `IIIOOOOOOOIIIII`，花费 $5$ 秒；  \r\n再进行第三个操作，卡片序列变为 `IIIIIIIIIIII`，这个操作花费 $7$ 秒，一共花费 $12$ 秒。  \r\n可以证明，$12$ 秒为占卜的最小耗时，因此输出 $12$。\r\n\r\n#### 样例输入 2\r\n```plain\r\n1 1 1 1 1\r\n1\r\n1 1\r\n```\r\n#### 样例输出 2\r\n```plain\r\n-1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部测试点，满足 $1\\le A,B,C,D,E,N\\le 10^5,1\\le L_i\\le R_i\\le A+B+C+D+E$。\r\n\r\n具体子任务限制及分数如下表：\r\n\r\n| Subtask |       限制        | 得分 |\r\n| :-----: | :---------------: | :--: |\r\n|   $1$   |     $N\\le 10$     | $15$ |\r\n|   $2$   | $A,B,C,D,E\\le 50$ | $50$ |\r\n|   $3$   |    无追加限制     | $35$ |\r\n"}]}