{"title":"蓝宝石魔塔","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://loj.ac/problem/6567#submit_code","submissions":"https://loj.ac/submissions?problem_id=6567","statistics":"https://loj.ac/problem/6567/statistics/fastest","testdata":"https://loj.ac/problem/6567/testdata","discussion":"https://loj.ac/discussion/problem/6567"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"你在玩一个奇怪的魔塔，这个魔塔的设定是这样的：\r\n\r\n- 地图为一张 $n$ 个点，$n-1$ 条边的简单无向连通图；\r\n\r\n- 你初始在 $1$ 号点，该位置为空地，而其它的点要么有一个蓝宝石，要么有一个怪物；\r\n\r\n- 你初始具有 $A$ 点攻击和 $D$ 点防御，每个蓝宝石能够给你增加一定的防御；\r\n\r\n- 当你与怪物接触时会发生战斗，若怪物具有 $h$ 点生命、$a$ 点攻击和 $d$ 点防御，则你在此次战斗中会受到 $(\\lceil\\frac h{A-d}\\rceil-1)\\times(a-D)$ 点伤害。**注意：这个公式与一般的魔塔有所不同，当 $D>a$ 时该伤害应为负值而不是 $0$ ，相当于给你回复相应的生命值**\r\n\r\n- 当一个非空地节点的蓝宝石被吃掉或怪物被打败时，该节点也会变成空地；\r\n\r\n- 你可以沿着边在空地上任意穿梭，或从空地走向相连的蓝宝石节点或怪物节点并触发对应事件；\r\n\r\n- 当所有节点都变为空地时，游戏结束。\r\n\r\n现在，你拥有无限的生命值，他想知道游戏结束时受到的伤害总和的最小值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行：一个整数 $c$ ，表示测试点编号。特殊地，样例的测试点编号为 $0$ 。\r\n\r\n第二行：三个整数 $n$ 、$A$ 、$D$ ，分别表示节点数目、初始攻击和初始防御。\r\n\r\n接下来的 $n-1$ 行，每行两个整数 $x_i$ 和 $y_i$ ，表示 $x_i$ 和 $y_i$ 之间有一条无向边。保证给出的是一棵树。\r\n\r\n接下来的 $n-1$ 行，每行若干个整数，分别表示 $2\\sim n$ 号节点的类型。具体地：\r\n\r\n- 第一个数 $\\text{opt}$ ，表示节点类型；\r\n- 若 $\\text{opt}=1$ ，接下来输入一个整数 $v_i$ ，表示该点处有一个增加 $v_i$ 防御的蓝宝石；若 $\\text{opt}=2$ ，接下来输入三个整数 $h_i$ 、$a_i$ 、$d_i$ ，表示该点处有一个 $h_i$ 生命、$a_i$ 攻击、$d_i$ 防御的怪物。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数，表示最小伤害总和。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n0\r\n6 5 3\r\n1 2\r\n1 3\r\n1 4\r\n2 5\r\n3 6\r\n2 15 20 3\r\n2 10 10 4\r\n1 2\r\n1 1\r\n1 1\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n141\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n先吃掉 $4$ 号点的宝石，此时状态 $5/5$ ；  \r\n再打掉 $2$ 号点的怪物，受到伤害 $105$；  \r\n再吃掉 $5$ 号点的宝石，此时状态 $5/6$ ；  \r\n再打掉 $3$ 号点的怪物，受到伤害 $36$ ；  \r\n最后吃掉 $6$ 号点的宝石，此时状态 $5/7$ 。\r\n\r\n#### 样例输入 2\r\n\r\n```plain\r\n0\r\n6 5 3\r\n1 2\r\n1 3\r\n1 4\r\n2 5\r\n3 6\r\n2 15 20 3\r\n2 10 10 4\r\n1 2\r\n1 1\r\n1 2\r\n```\r\n\r\n#### 样例输出 2\r\n\r\n```plain\r\n136\r\n```\r\n\r\n#### 样例解释 2\r\n\r\n先吃掉 $4$ 号点的宝石，此时状态 $5/5$ ；  \r\n再打掉 $3$ 号点的怪物，受到伤害 $45$；  \r\n再吃掉 $6$ 号点的宝石，此时状态 $5/7$ ；  \r\n再打掉 $2$ 号点的怪物，受到伤害 $91$ ；  \r\n最后吃掉 $5$ 号点的宝石，此时状态 $5/8$ 。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"| 测试点编号  | $n\\le$   | 约定                                                  |\r\n| :-----------: | :--------: | :------------------------------------------------------------: |\r\n| $1$ | $10$ |                                                            |\r\n| $2\\sim 4$ | $1000$ |                                                            |\r\n| $5\\sim 6$ | $100000$ | 蓝宝石数目不超过 $10$                                        |\r\n| $7\\sim 11$ | $100000$ | 除 $1$ 号点外其余点度数不超过 $2$ ，且蓝宝石仅出现在叶子节点 |\r\n| $12\\sim 16$ | $100000$ | 除 $1$ 号点外其余点度数不超过 $2$                            |\r\n| $17\\sim 18$ | $100000$ |                                                            |\r\n| $19\\sim 20$ | $300000$ |                                                            |\r\n\r\n对于 $100\\%$ 的数据，$1\\le A,D,h,a,d\\le 10^5$ ，$d<A$ ，$1\\le v\\le 10^3$ 。"}]}