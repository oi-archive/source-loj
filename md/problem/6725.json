{"title":"「CodePlus #7」六元环","time_limit":5000,"memory_limit":512,"tags":["CodePlus","2020","Link-Cut Tree","笛卡尔树 / Kruskal 重构树","数据结构"],"operation":{"submit":"https://loj.ac/problem/6725#submit_code","submissions":"https://loj.ac/submissions?problem_id=6725","statistics":"https://loj.ac/problem/6725/statistics/fastest","testdata":"https://loj.ac/problem/6725/testdata","discussion":"https://loj.ac/discussion/problem/6725"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"qwqwq。\r\n\r\n------------\r\n\r\n给定序列 $a_0, a_1, \\dots, a_n, a_{n+1}$；满足 $a_0 = a_{n+1} = +\\infty$，$a_1, a_2, \\dots, a_n$ 在输入中给出；\r\n\r\n对 $1\\le x\\le n$，称 $\\max_{0\\le i<x, a_i\\ge a_x} i$ 和 $x$ 是相邻的，且 $\\min_{x< i\\le n+1, a_i>a_x} i$ 和 $x$ 是**相邻**的；如果 $x$ 和 $y$ 相邻，则 $y$ 和 $x$ 也相邻；\r\n\r\n如果 $0 \\le b_1, b_2, b_3, b_4, b_5, b_6\\le n+1$，且 $b_i$ 和 $b_{i+1}$ 相邻，$b_1$ 和 $b_6$ 相邻，$b_i$ 互不相同，则称集合 $\\{b_1,b_2,b_3,b_4,b_5,b_6\\}$ 是一个六元环（即判断两个六元环是否相同时，不考虑 $b_i$ 的顺序）。\r\n\r\n共有 $m$ 次修改操作，每次修改操作给出 $x\\ y$，将 $a_x$ 改为 $a_x + y$；每次修改后要求输出六元环的个数；\r\n\r\n以上提到的所有数值为整数，且 $1\\le n, m\\le 5\\times 10^5, 1\\le x\\le n,1\\le a_i, y\\le 10^9$。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数 $n$；\r\n\r\n第二行 $n$ 个整数表示 $a_1, a_2, \\dots, a_n$；\r\n\r\n第三行一个整数 $m$；接下来 $m$ 行，每行两个整数 $x\\ y$ 表示一次修改操作。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共 $m$ 行，每行一个整数，表示每次修改后的六元环个数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n\r\n```plain\r\n6\r\n1 2 5 4 3 6\r\n4\r\n1 8\r\n3 6\r\n5 10\r\n2 7\r\n```\r\n\r\n#### 样例输出\r\n\r\n```plain\r\n3\r\n0\r\n1\r\n1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"| 子任务 | 分数 |              限制              |\r\n| :----: | :--: | :----------------------------: |\r\n|  $1$   | $10$ |      $\\max (n,m)\\le 100$       |\r\n|  $2$   | $10 $ |      $\\max (n,m)\\le 2000$      |\r\n|  $3$   | $20$ |     $\\max (n,m)\\le 50000$      |\r\n|  $4$   | $20 $ | for each operation, $x\\le 100$ |\r\n|  $5$   | $20$ | for each operation, $y\\le 10$  |\r\n|  $6$   | $20 $ |                                |\r\n\r\n"}]}