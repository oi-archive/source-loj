{"title":"「NOI2016」优秀的拆分","time_limit":1500,"memory_limit":512,"tags":["2016","NOI","枚举","字符串","复杂度分析"],"operation":{"submit":"https://loj.ac/problem/2083#submit_code","submissions":"https://loj.ac/submissions?problem_id=2083","statistics":"https://loj.ac/problem/2083/statistics/fastest","testdata":"https://loj.ac/problem/2083/testdata","discussion":"https://loj.ac/discussion/problem/2083"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"如果一个字符串可以被拆分为 $\\text{AABB}$ 的形式，其中 $\\text{A}$ 和 $\\text{B}$ 是任意**非空**字符串，则我们称该字符串的这种拆分是优秀的。  \r\n例如，对于字符串 $ \\texttt{aabaabaa} $ ，如果令 $\\text{A}=\\texttt{aab}$，$\\text{B}=\\texttt{a}$，我们就找到了这个字符串拆分成 $\\text{AABB}$ 的一种方式。\r\n\r\n一个字符串可能没有优秀的拆分，也可能存在不止一种优秀的拆分。  \r\n比如我们令 $\\text{A}=\\texttt{a}$，$\\text{B}=\\texttt{baa}$，也可以用 $\\text{AABB}$ 表示出上述字符串；但是，字符串 $\\texttt{abaabaa}$ 就没有优秀的拆分。\r\n\r\n现在给出一个长度为 $n$ 的字符串 $S$，我们需要求出，在它所有子串的所有拆分方式中，优秀拆分的总个数。这里的子串是指字符串中连续的一段。\r\n\r\n以下事项需要注意：\r\n\r\n1. 出现在不同位置的相同子串，我们认为是不同的子串，它们的优秀拆分均会被记入答案。\r\n2. 在一个拆分中，允许出现 $\\text{A}=\\text{B}$。例如 $\\texttt{cccc}$ 存在拆分 $\\text{A}=\\text{B}=\\texttt{c}$。\r\n3. 字符串本身也是它的一个子串。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"每个输入文件包含多组数据。  \r\n输入文件的第一行只有一个整数 $T$，表示数据的组数。  \r\n接下来 $T$ 行，每行包含一个仅由英文小写字母构成的字符串 $S$，意义如题所述。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $T$ 行，每行包含一个整数，表示字符串 $S$ 所有子串的所有拆分中，总共有多少个是优秀的拆分。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4\r\naabbbb\r\ncccccc\r\naabaabaabaa\r\nbbaabaababaaba\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n3\r\n5\r\n4\r\n7\r\n```\r\n\r\n#### 样例解释\r\n\r\n我们用 $S[i, j]$ 表示字符串 $S$ 第 $i$ 个字符到第 $j$ 个字符的子串（从 $1$ 开始计数）。\r\n\r\n第一组数据中，共有三个子串存在优秀的拆分：  \r\n$S[1,4]=\\texttt{aabb}$，优秀的拆分为 $\\text{A}=\\texttt{a}$，$\\text{B}=\\texttt{b}$；  \r\n$S[3,6]=\\texttt{bbbb}$，优秀的拆分为 $\\text{A}=\\texttt{b}$，$\\text{B}=\\texttt{b}$；  \r\n$S[1,6]=\\texttt{aabbbb}$，优秀的拆分为 $\\text{A}=\\texttt{a}$，$\\text{B}=\\texttt{bb}$。  \r\n而剩下的子串不存在优秀的拆分，所以第一组数据的答案是 $3$。\r\n\r\n第二组数据中，有两类，总共四个子串存在优秀的拆分：  \r\n对于子串 $S[1,4]=S[2,5]=S[3,6]=\\texttt{cccc}$，它们优秀的拆分相同，均为 $\\text{A}=\\texttt{c}$，$\\text{B}=\\texttt{c}$，但由于这些子串位置不同，因此要计算三次；  \r\n对于子串 $S[1,6]=\\texttt{cccccc}$，它优秀的拆分有两种：$\\text{A}=\\texttt{c}$，$\\text{B}=\\texttt{cc}$ 和 $\\text{A}=\\texttt{cc}$，$\\text{B}=\\texttt{c}$，它们是相同子串的不同拆分，也都要计入答案。  \r\n所以第二组数据的答案是 $3+2=5$。\r\n\r\n第三组数据中，$S[1,8]$ 和 $S[4,11]$ 各有两种优秀的拆分，其中 $S[1,8]$ 是问题描述中的例子，所以答案是 $2+2=4$。\r\n\r\n第四组数据中，$S[1,4]$，$S[6,11]$，$S[7,12]$，$S[2,11]$，$S[1,8]$ 各有一种优秀的拆分，$S[3,14]$ 有两种优秀的拆分，所以答案是 $5+2=7$。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部的测试点，$1 \\leq T \\leq 10, \\ n \\leq 30000$。\r\n\r\n各测试点具体限制如下：\r\n\r\n|测试点|$n\\le$|特殊性质|\r\n|:-:|:-:|:-:|\r\n|$1,~2$|$300$|$S$ 中所有字符相同|\r\n|$3,~4$|$2000$|$S$ 中所有字符相同|\r\n|$5,~6$|$10$|无特殊限制|\r\n|$7,~8$|$20$|无特殊限制|\r\n|$9,~10$|$30$|无特殊限制|\r\n|$11,~12$|$50$|无特殊限制|\r\n|$13,~14$|$100$|无特殊限制|\r\n|$15$|$200$|无特殊限制|\r\n|$16$|$300$|无特殊限制|\r\n|$17$|$500$|无特殊限制|\r\n|$18$|$1000$|无特殊限制|\r\n|$19$|$2000$|无特殊限制|\r\n|$20$|$30000$|无特殊限制|"}]}