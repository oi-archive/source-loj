{"title":"「LibreOJ Round #6」花团","time_limit":3000,"memory_limit":256,"tags":["LibreOJ Round","背包 DP","线段树分治","分治"],"operation":{"submit":"https://loj.ac/problem/534#submit_code","submissions":"https://loj.ac/submissions?problem_id=534","statistics":"https://loj.ac/problem/534/statistics/fastest","testdata":"https://loj.ac/problem/534/testdata","discussion":"https://loj.ac/discussion/problem/534"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"> 「Alice —— !」「Karen —— !」\r\n>\r\n> Alice 和 Karen 家边的大花坛给了她们无尽的欢乐。\r\n>\r\n> 这天 Karen 想重新规划一下花坛在一年里的外观。但是由于花朵各有其花期，而且花市上的选择实在太多了，所以她把问题进行了一些抽象，希望擅长程序设计的你可以为她解决。\r\n\r\n物品集合 $S$ 初始为空，按时间递增顺序依次给出 $q$ 次操作，操作如下：\r\n\r\n* $\\texttt{1 v w e}$ 表示在 $S$ 中加入一个体积为 $v$ 价值为 $w$ 的物品，第 $e$ 次操作结束之后移除该物品。\r\n* $\\texttt{2 v}$ 表示询问。你需要回答：\r\n    1. 当前 $S$ 是否存在一个子集使得子集中物品体积和为 $v$。\r\n    2. 当前 $S$ 的所有物品体积和为 $v$ 的子集中，价值和最大是多少（空集的价值和为 0）。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行三个正整数 $q,\\text{maxv},T$ 表示操作数、最大可能的 $v$、及是否强制在线。\r\n\r\n接下来 $q$ 行每行描述一个操作。  \r\n设修正值 $d=T\\times \\text{lastans}$。这里 $\\text{lastans}$ 表示上次询问的**两个答案的异或和**，若没有上次询问则 $\\text{lastans}=0$。  \r\n则第 $i$ 行中，第一个整数 $\\text{op}$ 表示操作类型；  \r\n若操作类型为 $1$，则接下来三个整数 $v',w',e'$ 表示加入一个体积为 $v_i=v'-d$，价值为 $w_i=w'-d$，在第 $e_i=e'-d$ 时间后被移除的物品；  \r\n若操作类型为 $2$，则接下来一个整数 $v'$ 表示询问 $v_i=v'-d$。  \r\n一行中相邻整数以单个空格分隔。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个询问（$2$ 类型的操作）输出一行两个整数 $e$ 和 $\\text{maxw}$，由空格分隔。\r\n\r\n若不存在这样的子集，$e=\\text{maxw}=0$；  \r\n否则 $e=1$，$\\text{maxw}$ 为最大的价值和。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n12 10 0\r\n1 1 1 12\r\n1 6 0 12\r\n1 10 7 8\r\n1 3 8 7\r\n2 6\r\n2 9\r\n2 10\r\n2 10\r\n2 10\r\n1 3 2 11\r\n2 4\r\n2 4\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n1 0\r\n1 8\r\n1 9\r\n1 7\r\n0 0\r\n1 3\r\n0 0\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n19 20 1\r\n1 2 19 11\r\n2 2\r\n1 27 27 22\r\n1 20 34 36\r\n2 29\r\n1 9 8 9\r\n1 5 19 8\r\n1 1 15 19\r\n2 3\r\n1 36 40 54\r\n1 37 50 52\r\n2 40\r\n2 62\r\n1 1 17 16\r\n1 1 7 16\r\n1 13 16 18\r\n1 9 11 19\r\n2 10\r\n2 34\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n1 19\r\n0 0\r\n1 34\r\n1 46\r\n0 0\r\n1 26\r\n0 0\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$1\\le q\\le 15000,1\\le v_i\\le \\text{maxv}\\le 15000,0\\le w_i\\le 15000,i\\le e_i\\le q$。\r\n\r\n对于每个测试点，若问题 1 回答全对，则得 $40\\%$ 的分数；若问题 2 回答全对，则另得 $60\\%$ 的分数。每个子任务的得分是其中各测试点的最小值。  \r\n注意，即使你只回答了一个问题，每次仍要输出两个整数，以免答案错位。\r\n\r\n|Subtask #|分值|$q,v$ 的限制|$T$ 的限制|\r\n|:-:|:-:|:-:|:-:|\r\n|1|$15$|$q\\le 18,v\\le 15000$|$T=0$|\r\n|2|$20$|$q,v\\le 1000$|$T\\in\\{0,1\\}$|\r\n|3|$20$|$q,v\\le 6000$|$T=0$|\r\n|4|$20$|$q,v\\le 10000$|$T=0$|\r\n|5|$25$|$q,v\\le 15000$|$T\\in\\{0,1\\}$|"}]}