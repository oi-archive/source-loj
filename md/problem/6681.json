{"title":"yww 与树上的回文串","time_limit":2000,"memory_limit":512,"tags":["原创","AC 自动机","点分治","hash","字符串"],"operation":{"submit":"https://loj.ac/problem/6681#submit_code","submissions":"https://loj.ac/submissions?problem_id=6681","statistics":"https://loj.ac/problem/6681/statistics/fastest","testdata":"https://loj.ac/problem/6681/testdata","discussion":"https://loj.ac/discussion/problem/6681"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给一棵树，每条边上有一个字符，求有多少对 $(x,y)(x<y)$，满足 $x$ 到 $y$ 路径上的边上的字符按顺序组成的字符串为回文串。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有一个整数：$n$；\r\n\r\n接下来 $n-1$ 行，第 $i$ 行有三个整数 $x_i,y_i,z_i$，表示有一条连接 $x_i$ 和 $y_i$ 的边，边上的字符为 $z_i$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出满足要求的点对数量。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"### 样例一\r\n\r\n#### 样例输入\r\n\r\n```plain\r\n4\r\n1 2 0\r\n1 3 0\r\n1 4 1\r\n```\r\n\r\n#### 样例输出\r\n\r\n```plain\r\n4\r\n```\r\n\r\n#### 样例解释\r\n\r\n满足条件的有：$(1,2),(1,3),(1,4),(2,3)$。\r\n\r\n### 样例二\r\n\r\n见下发文件中的 `ex_string2.in` 与 `ex_string2.out`。\r\n### 样例三\r\n\r\n见下发文件中的 `ex_string3.in` 与 `ex_string3.out`。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"子任务 $1[5\\ \\text{pts}]$：$n\\leq 10$；\r\n\r\n子任务 $2[15\\ \\text{pts}]$：$n\\leq 5000$；\r\n\r\n子任务 $3[15\\ \\text{pts}]$：对于所有的边，$x_i=i,y_i=i+1$；\r\n\r\n子任务 $4[25\\ \\text{pts}]$：对于所有的边，$y_i=i+1,x_i$ 在 $[1,i]$ 之间随机。\r\n\r\n子任务 $5[40\\ \\text{pts}]$：无特殊限制。\r\n\r\n对于所有数据：$1\\leq n\\leq 50000,1\\leq x_i,y_i\\leq n,z_i\\in\\{0,1\\}$。"}]}