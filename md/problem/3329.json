{"title":"「WC2020」有根树","time_limit":4000,"memory_limit":512,"tags":["WC","2020","数据结构"],"operation":{"submit":"https://loj.ac/problem/3329#submit_code","submissions":"https://loj.ac/submissions?problem_id=3329","statistics":"https://loj.ac/problem/3329/statistics/fastest","testdata":"https://loj.ac/problem/3329/testdata","discussion":"https://loj.ac/discussion/problem/3329"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给定一棵包含 $n$ 个结点的有根树，结点从 $1\\sim n$ 编号，$1$ 号点为根结点。小明有一个结点集合 $S$，对于 $S$ 中的结点 $u$，他定义 $w_u$ 的值为 $u$ 的子树中（包括 $u$ 本身）被包含在集合 $S$ 内的结点数，为了方便叙述，对于不在 $S$ 中的结点，我们认为其 $w_u=0$。\r\n\r\n接下来，小明需要你选择一个包含根结点的连通块 $C$。记 $a$ 表示连通块 $C$ 中被包含在集合 $S$ 内的结点数，$b$ 表示不在连通块 $C$ 中的结点的 $w$ 值最大值，若不存在不在 $C$ 中的结点，则 $b = 0$，小明希望你能最小化 $\\max(a,b)$。\r\n\r\n小明觉得这个问题还比较简单，所以还给出了 $q$ 次操作，每次会令集合 $S$ 加入或删除一个结点，请你对每次操作后的集合 $S$ 给出 $\\max(a,b)$ 的最小值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个正整数 $n$ 表示结点数。\r\n\r\n接下来 $n-1$ 行，每行两个整数 $x,y$，表示树上的一条边 $(x,y)$。\r\n\r\n接下来一行一个正整数 $q$ 表示操作数。\r\n\r\n接下来 $q$ 行，每行两个数 $t,v$ 表示一次操作。若 $t=1$ 则该操作为将结点 $v$ 加入 $S$，保证操作前 $v \\notin S$。若 $t=2$ 则该操作为将结点 $v$ 从 $S$ 中删去，保证操作前 $v\\in S$。 初始时 $S$ 为空集。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"每次操作后，输出一行一个整数表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n5\r\n1 2\r\n1 3\r\n1 4\r\n2 5\r\n5\r\n1 4\r\n1 1\r\n1 2\r\n1 5\r\n2 2\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n1\r\n1\r\n1\r\n2\r\n1\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n第一次操作后 $S=\\{4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=0,b=1$。\r\n\r\n第二次操作后 $S=\\{1,4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\r\n\r\n第三次操作后 $S=\\{1,2,4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\r\n\r\n第四次操作后 $S=\\{1,2,4,5\\}$，一个选择方案为 $C=\\{1,2\\}$，此时 $a=2,b=1$。\r\n\r\n第五次操作后 $S=\\{1,4,5\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\r\n\r\n#### 样例 2\r\n\r\n见附加文件中的 `tree2.in` 与 `tree2.ans`。\r\n\r\n#### 样例 3\r\n\r\n见附加文件中的 `tree3.in` 与 `tree3.ans`。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有测试点：$1\\le n\\le 5\\times 10^5$，$1\\le q\\le 10^6$，$1\\le x,y,v\\le n$，$t\\in \\{1,2\\}$。\r\n\r\n\r\n| 测试点编号  | $n\\leq$        | $q\\leq$        | 特殊限制 |\r\n| :-----------: | :--------------: | :--------------: | :--------: |\r\n| $1\\sim 2$   | $100$          | $500$          | 无       |\r\n| $3\\sim 4$   | $2\\times 10^4$ | $2\\times 10^4$ |    无|\r\n| $5\\sim 6$   | $10^5$         | $2\\times 10^5$ | A        |\r\n| $7\\sim 8$   | $2\\times 10^5$ | $4\\times 10^5$ | B        |\r\n| $9\\sim 11$  | $2\\times 10^5$ | $4\\times 10^5$       | C              | \r\n| $12\\sim 16$ | $2\\times 10^5$ | $4\\times 10^5$ | 无             | \r\n| $17\\sim 20$ | $5\\times 10^5$ | $10^6$         |         无 |\r\n\r\n\r\n表格中特殊限制一栏符号的含义为：\r\n\r\nA：任意时刻集合 $S$ 的大小不超过 $50$。\r\n\r\nB：树的形态是一条链且 $1$ 号结点度数为 $1$。\r\n\r\nC：树上每个结点的双亲结点编号小于它本身，$n=q$ 且第 $i$ 次操作为将 $i$ 号点加入 $S$。"}]}