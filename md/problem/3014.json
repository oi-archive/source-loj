{"title":"「JOI 2019 Final」独特的城市","time_limit":2000,"memory_limit":256,"tags":["JOI","2019","树的直径","数据结构","子任务"],"operation":{"submit":"https://loj.ac/problem/3014#submit_code","submissions":"https://loj.ac/submissions?problem_id=3014","statistics":"https://loj.ac/problem/3014/statistics/fastest","testdata":"https://loj.ac/problem/3014/testdata","discussion":"https://loj.ac/discussion/problem/3014"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [JOI 2019 Final](https://www.ioi-jp.org/joi/2018/2019-ho/index.html) T5「[珍しい都市](https://www.ioi-jp.org/joi/2018/2019-ho/2019-ho-t5.pdf) / [Unique Cities](https://www.ioi-jp.org/joi/2018/2019-ho/2019-ho-t5-en.pdf)」**\r\n\r\nJOI 国有 $N$ 个城市，城市从 $1$ 到 $N$ 编号。这些城市被 $N-1$ 条双向道路连接，第 $i$ 条路连接两个城市 $A_i$ 和 $B_i$。从任何城市出发，可以到达所有城市。\r\n\r\nJOI 国有些特产，每种特产的编号都在 $1$ 到 $M$ 之间（包括 $1$ 和 $M$），但是 $1$ 到 $M$ 的某些整数可能不代表 JOI 国的特产。JOI 国的每个城市都产一种特产。$j$ 城产的特产是 $C_j$。多个城市可能产相同的特产。\r\n\r\n我们定义两个城市之间的距离为从一个城市到另一个城市需要经过的最少道路数，对于城市 $x\\ (1\\le x\\le N)$，我们定义城市 $y\\ (1\\le y\\le N,y\\neq x)$ 是**独特的城市**当且仅当对于任何一个城市 $z\\ (1\\le z\\le N,z\\neq x,z\\neq y)$，$x$ 与 $y$ 间的距离不等于 $x$ 与 $z$ 之间的距离。\r\n\r\nJOI 国交通部部长 K 先生想知道对于城市 $j\\ (1\\le j\\le N)$ 的**独特的城市**一共能产多少种特产。\r\n\r\n给出 JOI 国的道路信息与每个城市产的特产，写一个程序计算对于每个城市的**独特的城市**，一共能产多少种特产。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数 $N,M$，意义如题目描述。\r\n\r\n接下来 $N-1$ 行，每行两个整数 $A_i,B_i$，意义如题目描述。\r\n\r\n最后一行 $N$ 个正整数，第 $j$ 个为 $C_j$，意义如题目描述。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $N$ 行，第 $j\\ (1\\le j\\le N)$ 行表示对于城市 $j\\ (1\\le j\\le N)$ 的**独特的城市**一共能产多少种特产。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5 4\r\n1 2\r\n2 3\r\n3 4\r\n3 5\r\n1 2 1 2 4\r\n```\r\n#### 样例输出 1\r\n```plain\r\n2\r\n0\r\n1\r\n1\r\n1\r\n```\r\n#### 样例说明 1\r\n对于城市 $1$，它的独特城市是城市 $2,3$，城市 $2$ 产特产 $2$，城市 $3$ 产特产 $1$，一共产两种特产，因此答案是 $2$；  \r\n对于城市 $2$，没有独特城市，因此输出 $0$；  \r\n对于城市 $3$，它的独特城市是城市 $1$，城市 $1$ 产特产 $1$，因此答案是 $1$；  \r\n对于城市 $4$，它的独特城市是城市 $1,3$，城市 $1$ 产特产 $1$，城市 $3$ 产特产 $1$，一共产一种特产，因此答案是 $1$；  \r\n对于城市 $5$，它的独特城市是城市 $1,3$，城市 $1$ 产特产 $1$，城市 $3$ 产特产 $1$，一共产一种特产，因此答案是 $1$；\r\n\r\n注意，没有编号为 $3$ 的特产。\r\n\r\n#### 样例输入 2\r\n```plain\r\n7 1\r\n1 2\r\n2 3\r\n3 4\r\n4 5\r\n5 6\r\n6 7\r\n1 1 1 1 1 1 1\r\n```\r\n#### 样例输出 2\r\n```plain\r\n1\r\n1\r\n1\r\n0\r\n1\r\n1\r\n1\r\n```\r\n#### 样例说明 2\r\n本组样例符合子任务 $2$ 的限制。\r\n\r\n#### 样例输入 3\r\n```plain\r\n10 10\r\n2 6\r\n5 8\r\n10 8\r\n1 4\r\n10 6\r\n4 5\r\n10 7\r\n6 9\r\n3 7\r\n1 2 3 4 5 6 7 8 9 10\r\n```\r\n#### 样例输出 3\r\n```plain\r\n4\r\n3\r\n4\r\n2\r\n0\r\n2\r\n2\r\n0\r\n3\r\n2\r\n```\r\n#### 样例说明 3\r\n本组样例符合子任务 $3$ 的限制。\r\n\r\n#### 样例输入 4\r\n```plain\r\n22 12\r\n9 6\r\n12 13\r\n4 20\r\n21 22\r\n3 19\r\n2 9\r\n6 18\r\n18 11\r\n18 3\r\n16 2\r\n6 4\r\n3 17\r\n16 10\r\n8 16\r\n22 1\r\n16 14\r\n15 8\r\n9 21\r\n2 12\r\n21 5\r\n12 7\r\n1 1 4 8 4 11 7 6 7 11 6 11 10 4 7 5 3 12 9 6 12 2\r\n```\r\n#### 样例输出 4\r\n```plain\r\n2\r\n0\r\n1\r\n1\r\n1\r\n1\r\n1\r\n0\r\n0\r\n1\r\n2\r\n0\r\n1\r\n1\r\n2\r\n0\r\n2\r\n1\r\n2\r\n3\r\n0\r\n0\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le N\\le 2\\times 10^5,1\\le M\\le N,1\\le A_i,B_i\\le N\\ (A_i\\neq B_i,1\\le i\\le N-1),1\\le C_j\\le M\\ (1\\le j\\le M)$，并且保证从一个城市永远可以通过道路到达任何一个城市。\r\n\r\n详细子任务及附加限制如下表：\r\n\r\n|Subtask|附加限制|分值|\r\n|:-:|:-:|:-:|\r\n|1|$N\\le 2000$|4|\r\n|2|$M=1$|32|\r\n|3|$M=N,C_j=j\\ (1\\le j\\le N)$|&nbsp;32&nbsp;|\r\n|4|无|32|\r\n"}]}