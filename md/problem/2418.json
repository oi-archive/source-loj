{"title":"「USACO 2016 US Open, Platinum」Bull in a China Shop","time_limit":6000,"memory_limit":256,"tags":["2016","USACO Contest"],"operation":{"submit":"https://loj.ac/problem/2418#submit_code","submissions":"https://loj.ac/submissions?problem_id=2418","statistics":"https://loj.ac/problem/2418/statistics/fastest","testdata":"https://loj.ac/problem/2418/testdata","discussion":"https://loj.ac/discussion/problem/2418"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [USACO 2016 US Open Contest, Platinum](http://usaco.org/index.php?page=open16results) Problem 2. [Bull in a China Shop](http://usaco.org/index.php?page=viewproblem2&cpid=649)**\r\n\r\n> A bull in a China Shop 是一个英语俗语，表示与他人打交道时行为笨拙的人。\r\n\r\n农夫 John 想买一个玻璃牛。它可用一个 $N\\times M$ 的字符矩阵表示，如下图所示。小写字母是玻璃牛上不同的颜色，而 `.` 则表示背景。\r\n```plain\r\n...............\r\n...............\r\nx..x...........\r\nxxxx...........\r\nxxxxaaaaaaa...\r\n.xx.aaaaaaaaa..\r\n....aaaaaaa.aa.\r\n....ll...ll....\r\n....vv...vv....\r\n...............\r\n```\r\n不幸的是，正当他要付款时，一头牛冲进商店，撞翻了架子。架子上的许多玻璃制品——包括这个艺术品——都碎了。这个艺术品被摔成了三个碎片，且很快与地上的 $K$ 片碎片混在了一起。每个碎片按如上的方式描述。\r\n求：在这 $K$ 片碎片中，取三个碎片能还原他意欲购买的牛 的方案有多少种。\r\n地面上的碎片可能被垂直或水平翻转，且翻转度数是 $90°$ 的整数倍。因此，给出 $K$ 个由以上方法描述的碎片，你需要找到三片碎片，使得这三片碎片组合起来能形成原来的形状。碎片能被水平翻转，垂直翻转，旋转 $90°$ 的整数倍。当拼接完毕后，你的图像应完全符合原图。 "},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个数 $K$，接下来将有 $K+1$ 片碎片，第一片描述原图，接下来 $K$ 片是碎片。  \r\n每个描述的第一行有两个数 $R$ 与 $C$，接下来由 $R$ 行 $C$ 列小写字母描述每个网格，整个碎片互相连通，且至少有一个非空格。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出三元组 $(i, j, k)\\ (i<j<k)$ 使得 $i, j, k$ 三片能形成原图的数量。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5\r\n5 5\r\naaaaa\r\n..a..\r\nbbabb\r\n..a..\r\naaaaa\r\n3 5\r\n..abb\r\n..a..\r\naaaaa\r\n5 2\r\na.\r\na.\r\naa\r\na.\r\na.\r\n1 2\r\nbb\r\n1 5\r\nbbabb\r\n2 5\r\naaaaa\r\n..a..\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n3\r\n```\r\n\r\n#### 样例解释\r\n$(0, 1, 2),(0, 2, 4),(1, 3, 4)$ 三种。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$4 \\le K \\le 100, 3 \\le N,M \\le 500, 1 \\le R,C \\le 100$。"}]}