{"title":"「NOI2012」迷失游乐园","time_limit":1000,"memory_limit":512,"tags":["NOI","2012"],"operation":{"submit":"https://loj.ac/problem/2673#submit_code","submissions":"https://loj.ac/submissions?problem_id=2673","statistics":"https://loj.ac/problem/2673/statistics/fastest","testdata":"https://loj.ac/problem/2673/testdata","discussion":"https://loj.ac/discussion/problem/2673"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"放假了，小 Z 觉得呆在家里特别无聊，于是决定一个人去游乐园玩。进入游乐园后，小 Z 看了看游乐园的地图,发现可以将游乐园抽象成**有 $n$ 个景点、$m$ 条道路的无向连通图，且该图中至多有一个环（即 $m$ 只可能等于 $n$ 或者 $n-1$）**。\r\n\r\n小 Z 现在所在的大门也正好是一个景点。小 Z 不知道什么好玩，于是他决定，从当前位置出发，每次随机去一个和当前景点有道路相连的景点，并且**同一个景点不去两次（包括起始景点）**。贪玩的小 Z 会一直游玩，直到当前景点的相邻景点都已经访问过为止。\r\n\r\n小 Z 所有经过的景点按顺序构成一条非重复路径，他想知道这条路径的**期望长度**是多少？\r\n\r\n小 Z 把游乐园的抽象地图画下来带回了家，可是忘了标哪个点是大门，他只好假设每个景点都可能是大门（即每个景点作为起始点的概率是一样的）。同时，他每次在选择下一个景点时会**等概率地随机**选择一个**还没去过的相邻景点**。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行是两个整数 $n$ 和 $m$，分别表示景点数和道路数。\r\n\r\n接下来 $m$ 行，每行三个整数 $X_i , Y_i , W_i$，分别表示第 $i$ 条路径的两个景点为 $X_i , Y_i$，路径长 $W_i$。所有景点的编号从 $1$ 至 $n$，两个景点之间至多只有一条道路。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共一行，包含一个实数，即路径的期望长度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4 3\r\n1 2 3\r\n2 3 1\r\n3 4 4\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n6.00000000\r\n```\r\n\r\n#### 样例解释\r\n样例数据中共有 $6$ 条不同的路径：\r\n\r\n| 路径 | 长度 | 概率 |\r\n| :-: | :-: | :-: |\r\n| $1 \\rightarrow 4$ | $8$ | $\\frac 14$ |\r\n| $2 \\rightarrow 1$ | $3$ | $\\frac 18$ |\r\n| $2 \\rightarrow 4$ | $5$ | $\\frac 18$ |\r\n| $3 \\rightarrow 1$ | $4$ | $\\frac 18$ |\r\n| $3 \\rightarrow 4$ | $4$ | $\\frac 18$ |\r\n| $4 \\rightarrow 1$ | $8$ | $\\frac 14$ |\r\n\r\n因此期望长度 $= \\frac84 + \\frac38 + \\frac58 + \\frac48 + \\frac48 + \\frac84 = 6.00$."},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$1 \\le W_i \\le 100$。\r\n\r\n| 测试点编号 | $n$ | $m$ | 备注 |\r\n| :-: | :-: | :-: | :-: |\r\n| 1 | $n = 10$ | $m = n - 1$ | 保证图是链状 |\r\n| 2 | $n = 100$ | $m = n - 1$ | 只有节点 $1$ 的度数大于 2 |\r\n| 3 | $n = 1000$ | $m = n - 1$ | - |\r\n| 4 | $n = 100000$ | $m = n - 1$ | - |\r\n| 5 | $n = 100000$ | $m = n - 1$ | - |\r\n| 6 | $n = 10$ | $m = n$ | - |\r\n| 7 | $n = 100$ | $m = n$ | 环中节点个数 $\\le 5$ |\r\n| 8 | $n = 1000$ | $m = n$ | 环中节点个数 $\\le 10$ |\r\n| 9 | $n = 100000$ | $m = n$ | 环中节点个数 $\\le 15$ |\r\n| 10 | $n = 100000$ | $m = n$ | 环中节点个数 $\\le 20$ |"}]}