{"title":"「CEOI2011」Traffic","time_limit":5000,"memory_limit":128,"tags":["2011","CEOI"],"operation":{"submit":"https://loj.ac/problem/2516#submit_code","submissions":"https://loj.ac/submissions?problem_id=2516","statistics":"https://loj.ac/problem/2516/statistics/fastest","testdata":"https://loj.ac/problem/2516/testdata","discussion":"https://loj.ac/discussion/problem/2516"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"在平面直角坐标系上有 $n$ 个点，其中第 $i$ 个点的坐标是 $(x_i,y_i)$ ，所有点在一个以 $(0,0)$ 和 $(A,B)$ 为相对顶点的矩形内。  \r\n如果 $x_i=0$ ，那么我们称这个点在西侧。如果 $x_i=A$ ，那么我们称这个点在东侧。  \r\n这些点之间有 $m$ 条边，每条边可能是有向边也可能是无向边，保证边在交点以外的任何地方不相交。  \r\n现在请你求出，对于每一个西侧的点，能够沿着边到达多少东侧的点。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行四个空格隔开的数 $n,m,A,B$ 。  \r\n接下来 $n$ 行，每行两个空格隔开的数 $x_i,y_i$ 。  \r\n接下来 $m$ 行，每行三个空格隔开的数 $c_i,d_i,k_i$ ，表示一条 $c_i$ 和 $d_i$ 之间的边。如果 $k_i=1$ ，那么表示这条边是有向边，方向为 $c_i$ 指向 $d_i$ ，否则这条边是无向边。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出有若干行，每行一个数表示答案。请按照 $y$ 从大到小的顺序输出所有点对应的答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5 3 1 3\r\n0 0\r\n0 1\r\n0 2\r\n1 0\r\n1 1\r\n1 4 1\r\n1 5 2\r\n3 5 2\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n2\r\n0\r\n2\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n12 13 7 9\r\n0 1\r\n0 3\r\n2 2\r\n5 2\r\n7 1\r\n7 4\r\n7 6\r\n7 7\r\n3 5\r\n0 5\r\n0 9\r\n3 9\r\n1 3 2\r\n3 2 1\r\n3 4 1\r\n4 5 1\r\n5 6 1\r\n9 3 1\r\n9 4 1\r\n9 7 1\r\n9 12 2\r\n10 9 1\r\n11 12 1\r\n12 8 1\r\n12 10 1\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n4\r\n4\r\n0\r\n2\r\n```\r\n\r\n#### 样例解释 2\r\n![pic.png](https://i.loli.net/2018/04/18/5ad725326df6f.png)"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $30\\%$ 的数据，有 $n,m\\le 6\\ 000$。  \r\n对于 $100\\%$ 的数据，有 $1\\le n\\le 300\\ 000;0\\le m\\le 900\\ 000;1\\le A,B\\le 10^9;0\\le x_i\\le A;0\\le y_i\\le B;1\\le c_i,d_i\\le n;k_i\\in \\{1,2\\}$。保证西侧的点至少有一个，保证每一个无序对 $\\{c_i,d_i\\}$ 只会出现一次。"}]}