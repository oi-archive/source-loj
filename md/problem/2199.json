{"title":"「ZJOI2014」消棋子","time_limit":2000,"memory_limit":256,"tags":["ZJOI","2014","标签待整理","数据待检查"],"operation":{"submit":"https://loj.ac/problem/2199#submit_code","submissions":"https://loj.ac/submissions?problem_id=2199","statistics":"https://loj.ac/problem/2199/statistics/fastest","testdata":"https://loj.ac/problem/2199/testdata","discussion":"https://loj.ac/discussion/problem/2199"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"消棋子是一个有趣的游戏。游戏在一个 $r \\times c$ 的棋盘上进行。棋盘的每个格子，要么是空，要么是一种颜色的棋子。同一种颜色的棋子恰好有两个。每一轮，玩家可以选择一个空格子 $(x, y)$，并选择上下左右四个方向中的两个方向，如果在这两个方向上均存在有棋子的格子，而且沿着这两个方向上第一个遇到的棋子颜色相同，那么，我们将这两个棋子拿走，并称之为合法的操作。否则称这个操作不合法，游戏不会处理这个操作。游戏的目的是消除尽量多的棋子。\r\n \r\n给出这样一个游戏和一个人的玩法。你需要： \r\n1. 指出此人能消去多少棋子。 \r\n2. 给出一种能消去最多棋子的方案。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行给出了整数 $r, c$。  \r\n第二行给出了整数 $n$，表示不同颜色数。  \r\n接下来 $n$ 行，第 $i$ 行含四个整数 $a_i, b_i, c_i, d_i$，表示颜色为 $i$ 的两个格子分别是 $(a_i, b_i),\\ (c_i, d_i)$。  \r\n然后是一个整数 $m$，表示此人的操作数。接下来 $m$ 行，每行有两个整数和两个字母，代表了他选择的格子，以及两个方向。我们用“``UDLR``”分别表示上下左右。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"第一行输出此人能消去多少棋子。  \r\n第二行含一个整数 $k$，表示你给出的方案的操作数。  \r\n接下来 $k$ 行，每行两个整数和两个字母，代表你选择的格子以及两个方向。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4 4 \r\n4 \r\n1 1 1 4 \r\n1 2 3 4 \r\n1 3 3 2 \r\n4 1 2 3\r\n6 \r\n2 3 U R \r\n2 1 D R \r\n2 2 L R \r\n2 4 L D \r\n3 1 L R \r\n3 3 L U\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n2\r\n4\r\n4 3 L U\r\n3 3 L U\r\n3 2 R U\r\n1 2 L R\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$1\\leq r,c,n \\leq 10^5$，数据保证答案的操作数 $0\\leq k \\leq 10^6$。"}]}