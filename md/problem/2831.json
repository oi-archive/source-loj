{"title":"「JOISC 2018 Day 1」道路建设","time_limit":1000,"memory_limit":256,"tags":["2018","JOISC","图论"],"operation":{"submit":"https://loj.ac/problem/2831#submit_code","submissions":"https://loj.ac/submissions?problem_id=2831","statistics":"https://loj.ac/problem/2831/statistics/fastest","testdata":"https://loj.ac/problem/2831/testdata","discussion":"https://loj.ac/discussion/problem/2831"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"#### 译自 [JOISC 2018](https://www.ioi-jp.org/camp/2018/2018-sp-tasks/index.html) Day1 T1「[高速道路の建設](https://www.ioi-jp.org/camp/2018/2018-sp-tasks/index.html) / [Construction of Highway](https://www.ioi-jp.org/camp/2018/2018-sp-tasks/day1/construction-en.pdf)」\r\n\r\nJOI 王国里有 $N$ 座城市，从 $1$ 到 $N$ 编号。$1$ 号城市是首都。每个城市都有一个叫作「活跃度」的权值，第 $i(1\\le i\\le N)$ 座城市的活跃度初始值是 $C_{i}$。\r\n\r\nJOI 王国里的每条道路双向连接两个不同的城市。开始时 JOI 王国里没有道路。你规划了 $N-1$ 个道路建设项目。第 $j(1\\le j\\le N-1)$ 个项目会按以下方式完成：\r\n\r\n1. 指定两座城市 $A_{j}$ 和 $B_{j}$，要求能沿着此时已经建设的道路从城市 $1$ 走到城市 $A_{j}$，且不能从城市 $1$ 走到城市 $B_{j}$。\r\n2. 建设一条连接城市 $A_{j}$ 和 $B_{j}$ 的道路。建设过程的费用等于满足以下条件的城市对 $(s,t)$ 的个数：\r\n    - $s$ 和 $t$ 在从城市 $1$ 到城市 $A_{j}$ 的最短路径上；\r\n    - 当一个人从城市 $1$ 走到 $A_{j}$ 时，他会在经过 $t$ 之前经过 $s$；\r\n    - $s$ 的活跃度严格大于 $t$ 的活跃度。  \r\n  在这里，「从城市 $1$ 到城市 $A_{j}$ 的最短路径上的城市」包括 $1$ 和 $A_{j}$ 。注意从城市 $1$ 到城市 $A_{j}$ 的最短路径是唯一的。\r\n3. 将从城市 $1$ 到城市 $A_{j}$ 的最短路径上的所有城市的活跃度改变为城市 $B_{j}$ 的活跃度。\r\n\r\n你想知道每一次建设的费用。\r\n\r\n#### 任务\r\n\r\n给出城市和道路建设的数据，请编程求出每一次建设的费用。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入数据的第一行包含一个整数 $N$，表示 JOI 王国有 $N$ 座城市。\r\n\r\n第二行包含 $N$ 个以空格分开的整数 $C_{1},C_{2},\\dots, C_{N}$，表示第 $i(1\\le i\\le N)$ 座城市的初始活跃度是 $C_{i}$。\r\n\r\n接下来 $N-1$ 行中的第 $j$ 行包含两个以空格分开的整数 $A_{j}$ 和 $B_{j}$，表示第 $j$ 次道路建设所指定的两个端点编号分别为 $A_{j}$ 和 $B_{j}$。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出到标准输出，共 $N-1$ 行，第 $j(1\\le j\\le N-1)$ 行包含一个整数表示第 $j$ 次道路建设的费用。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 输入样例 1\r\n```plain\r\n5\r\n1 2 3 4 5\r\n1 2\r\n2 3\r\n2 4\r\n3 5\r\n```\r\n\r\n#### 输出样例 1\r\n```plain\r\n0\r\n0\r\n0\r\n2\r\n```\r\n\r\n#### 样例说明 1\r\n\r\n在输入样例 1 中，道路建设按照以下方式执行：\r\n\r\n- 在第一次建设中，没有满足条件的城市对 $(s,t)$，所以费用为 $0$。建设一条连接城市 $1$ 和 $2$ 的道路之后，城市 $1$ 的活跃度变为 $2$。\r\n- 在第二次建设中，也没有满足条件的城市对 $(s,t)$，所以费用为 $0$。建设一条连接城市 $2$ 和 $3$ 的道路之后，城市 $1$ 和 $2$ 的活跃度变为 $3$。\r\n- 在第三次建设中，仍然没有满足条件的城市对 $(s,t)$，所以费用为 $0$。建设一条连接城市 $2$ 和 $4$ 的道路之后，城市 $1$ 和 $2$ 的活跃度变为 $4$。\r\n- 在第四次建设中，有两对满足条件的城市：$(s,t)=(1,3),(2,3)$，所以费用为 $2$。建设一条连接城市 $3$ 和 $5$ 的道路之后，城市 $1,2$ 和 $3$ 的活跃度变为 $5$。\r\n\r\n#### 输入样例 2\r\n```plain\r\n10\r\n1 7 3 4 8 6 2 9 10 5\r\n1 2\r\n1 3\r\n2 4\r\n3 5\r\n2 6\r\n3 7\r\n4 8\r\n5 9\r\n6 10\r\n```\r\n\r\n#### 输出样例 2\r\n```plain\r\n0\r\n0\r\n0\r\n1\r\n1\r\n0\r\n1\r\n2\r\n3\r\n```\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"全部的输入数据满足以下条件：\r\n\r\n- $1\\le N\\le 100000$\r\n- $1\\le C_{i}\\le 10^{9} (1\\le i\\le N)$\r\n- $1\\le A_{j}\\le N(1\\le j\\le N-1)$\r\n- $1\\le B_{j}\\le N(1\\le j\\le N-1)$\r\n- 对于第 $j(1\\le j\\le N-1)$ 次建设，能沿着此时已经建设的道路从城市 $1$ 走到城市 $A_{j}$，且不能从城市 $1$ 走到城市 $B_{j}$。\r\n\r\n#### 子任务 1（7 分）\r\n\r\n$N\\le 500$。\r\n\r\n#### 子任务 2（9 分）\r\n\r\n$N\\le 4000$。\r\n\r\n#### 子任务 3（84 分）\r\n\r\n没有额外限制。"}]}