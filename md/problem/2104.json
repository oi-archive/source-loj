{"title":"「TJOI2015」棋盘","time_limit":1000,"memory_limit":256,"tags":["2015","TJOI","矩阵","状态压缩","DP"],"operation":{"submit":"https://loj.ac/problem/2104#submit_code","submissions":"https://loj.ac/submissions?problem_id=2104","statistics":"https://loj.ac/problem/2104/statistics/fastest","testdata":"https://loj.ac/problem/2104/testdata","discussion":"https://loj.ac/discussion/problem/2104"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"为了提高智商，ZJY 去新世界旅游了。可是旅游过后的 ZJY 杯具地发现，要打开通往原来世界的门，必须要解开门上面画的谜题。\r\n\r\n谜题是这样的：有一个 $n$ 行 $m$ 列的棋盘，棋盘上可以放很多特殊的棋子，每个棋子的攻击范围是 $3$ 行 $p$ 列。输入数据用一个 $3 \\times p$ 的矩阵给出了棋子攻击范围的模板，棋子被默认在模板中的第一行，第 $k$ 列，模板中棋子能攻击到的位置标记为 ``1``，不能攻击到的位置是 ``0`` $(1 \\leq p \\leq m, 0 \\leq k <p)$。输入数据保证模板中的第一行第 $k$ 列是 ``1``。\r\n\r\n打开门的密码是这样的：在要求棋子互相不能攻击到的前提下，摆放棋子的方案数。注意什么棋子都不摆也算作一种可行方案。由于方案数可能很大，而密码为 $32$ 位的二进制密码，所以 ZJY 仅需要知道方案对 $2^{32}$ 取余的结果即可。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入数据的第一行为两个整数 $n$，$m$ 表示棋盘大小。  \r\n第二行为两个整数 $p$，$k$，表示攻击范围模板的大小，以及棋子在模板中的位置。  \r\n接下来三行，每行 $p$ 个数，表示攻击范围的模版。每个数字后面一个空格。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一个整数，表示可行方案 $\\bmod 2^{32}$ 的结果。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n2 2\r\n3 1\r\n0 1 0\r\n1 1 1\r\n0 1 0\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n7\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$1 \\leq n \\leq 10^6, \\ 1 \\leq m \\leq 6$"}]}