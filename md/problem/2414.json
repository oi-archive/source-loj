{"title":"「JOI Open 2017」高尔夫","time_limit":5000,"memory_limit":1024,"tags":["2017","JOI","线段树"],"operation":{"submit":"https://loj.ac/problem/2414#submit_code","submissions":"https://loj.ac/submissions?problem_id=2414","statistics":"https://loj.ac/problem/2414/statistics/fastest","testdata":"https://loj.ac/problem/2414/testdata","discussion":"https://loj.ac/discussion/problem/2414"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [JOI Open 2017](https://contests.ioi-jp.org/open-2017/index.html) T3 「ゴルフ / Golf」**\r\n\r\n平面的第一象限上有 $N$ 个矩形障碍，矩形的两组对边分别平行于 $x$ 轴和 $y$ 轴。矩形 $i(1\\le i\\le N)$ 的左下角是 $(A_i, C_i)$，右上角是 $(B_i, D_i)$。  \r\nJOI 君需要将一个高尔夫球从 $(S,T)$ 打到 $(U,V)$，保证这两点不同，保证这两点不在障碍内或障碍的边界上。  \r\nJOI 君只能朝平行于 $x$ 轴或平行与 $y$ 轴的方向击球（JOI 君可以跟着移动）。球可以经过边界，但不能进入障碍物内部。球撞进障碍物后会停下（JOI 君仍然可以朝远离障碍物的方向击球）。  \r\n求最少要击球多少次，才能将高尔夫球打进 $(U,V)$。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有四个整数 $S, T, U, V$。  \r\n第二行有一个整数 $N$。  \r\n在接下来的 $N$ 行中，每行有四个整数 $A_i, B_i, C_i, D_i$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行，一个整数，表示最少击球次数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3 5 8 6\r\n1\r\n5 6 2 8\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n3\r\n```\r\n\r\n#### 样例解释 1\r\n$(3,5) → (3,2) → (8,2) → (8,6)$\r\n\r\n#### 样例输入 2\r\n```plain\r\n1 1 1 10\r\n3\r\n5 6 2 8\r\n1 2 2 3\r\n8 10 3 5\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n1\r\n```\r\n\r\n#### 样例输入 3\r\n```plain\r\n20 68 85 74\r\n5\r\n30 70 14 100\r\n5 24 15 67\r\n75 86 75 79\r\n75 90 19 62\r\n93 98 26 58\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n4\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$1\\le S, T, U, V\\le 10^9, 1\\le N\\le 10^5, 1\\le A_i<B_i\\le 10^9, 1\\le C_i<D_i\\le 10^9,$ $(S,T)≠(U,V)$。  \r\n子任务 #1（10 分）：$S, T, U, V, N, B_i, D_i\\le 1000$；  \r\n子任务 #2（20 分）：$N\\le 1000$；  \r\n子任务 #3（70 分）：没有额外限制。"}]}