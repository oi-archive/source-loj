{"title":"「JOISC 2015 Day1」有趣的家庭菜园 2","time_limit":1000,"memory_limit":256,"tags":["2015","JOISC","线段树","DP"],"operation":{"submit":"https://loj.ac/problem/2996#submit_code","submissions":"https://loj.ac/submissions?problem_id=2996","statistics":"https://loj.ac/problem/2996/statistics/fastest","testdata":"https://loj.ac/problem/2996/testdata","discussion":"https://loj.ac/discussion/problem/2996"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [JOISC 2015](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/index.html) Day1 T3「[たのしいたのしい家庭菜園](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/2015-sp-d1.pdf) / [Growing Vegetables is Fun 2](https://www.ioi-jp.org/camp/2015/2015-sp-tasks/2015-sp-d1.pdf)」**\r\n\r\nJOI 君成为了家庭菜园领域的专业人士，每年，他都在自己的菜园内种 IOI 草。如果在冬季种植 IOI 草，到春天它就会长到一定的高度。一些 IOI 草会在秋天结出美丽的果实。我们收获这些结果的 IOI 草，没有结果的 IOI 草会在冬天凋亡。\r\n\r\nJOI 君的菜园按东西方向划为 $N$ 块田。从西向东第 $i$ 块田种植着 IOI 草 $i$。IOI 草 $i$ 在春天生长到 $H_i$ 高度，之后不生长。如果 IOI 草 $i$ 结出果实，将以 $P_i$ 元的价格卖出。没有结果的 IOI 草将不会被卖出。\r\n\r\n春天的时候，JOI 君去了他的菜园，并决定拔去一些 IOI 草使得秋天收益最大。拔去 IOI 草 $i$ 需要 $C_i$ 元。拔去的 IOI 草将会凋亡。IOI 草只能在春天拔，不能在夏天或秋天拔。\r\n\r\nIOI 草是一种在夏季需要大量阳光的植物。如果在菜园编号较小或较大的田里种植较高的 IOI 草，这样的话位于中间的 IOI 草就不会结果。也就是说，当 IOI 草 $i$ 未被拔走的时候，IOI 草 $i$ 在秋天能够结果当且仅当夏天时第 $1\\ldots i-1$ 块田中没有比 IOI 草 $i$ 高的 IOI 草，或者第 $i+1\\ldots N$ 块田中没有比 IOI 草 $i$ 高的 IOI 草。\r\n\r\nJOI 君获得的利润是卖出 IOI 草获得的收益减去拔去 IOI 草付出的钱。JOI 君最多能获得多少利润？\r\n\r\n给出 JOI 君的菜园的情况和田里种植 IOI 草的情况，请求出 JOI 君获得的最大利润。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"从标准输入读入以下内容：\r\n\r\n第一行，一个整数 $N$，表示 JOI 的菜园有 $N$ 块田。\r\n\r\n接下来 $N$ 行，第 $i$ 行有三个整数 $H_i,P_i,C_i$，用一个空格分隔。表示 IOI 草 $i$ 在春天长到 $H_i$ 高度，秋天如果结果能卖 $P_i$ 元，拔去这株 IOI 草要花 $C_i$ 元。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数到标准输出，表示 JOI 获得利润的最大值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n7\r\n22 60 30\r\n46 40 30\r\n36 100 50\r\n11 140 120\r\n38 120 20\r\n24 90 60\r\n53 50 20\r\n```\r\n#### 样例输出 1\r\n```plain\r\n320\r\n```\r\n#### 样例说明 1\r\n考虑 IOI 草 $2$ 和 IOI 草 $7$ 被拔去的情况。剩下的 IOI 草如下表所示：\r\n\r\n| IOI 草的编号 | IOI 草的高度 | 秋天是否会结果 |\r\n| :----------: | :----------: | :------------: |\r\n|     $1$      |     $22$     |       ○        |\r\n|     $3$      |     $36$     |       ○        |\r\n|     $4$      |     $11$     |       ×        |\r\n|     $5$      |     $38$     |       ○        |\r\n|     $6$      |     $24$     |       ○        |\r\n\r\nIOI 草 $1,3,5,6$ 的卖出价格分别为 $60,100,120,90$ 元。拔去 IOI 草 $2,7$ 的花费分别为 $30,20$ 元，JOI 君的总利润为 $60+100+120+90-30-20=320$ 元，是利润最大的情况。\r\n\r\n#### 样例输入 2\r\n```plain\r\n5\r\n18 150 180\r\n18 380 250\r\n18 140 170\r\n17 180 900\r\n14 150 520\r\n```\r\n#### 样例输出 2\r\n```plain\r\n1000\r\n```\r\n#### 样例说明 2\r\n在这组样例中，无需拔去任何 IOI 草，所有 IOI 草到秋天都会结果。\r\n\r\n#### 样例输入 3\r\n```plain\r\n8\r\n52 156 59\r\n15 166 185\r\n16 122 115\r\n24 161 154\r\n44 252 678\r\n32 225 557\r\n44 155 254\r\n59 57 253\r\n```\r\n#### 样例输出 3\r\n```plain\r\n854\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$3\\le N\\le 10^5,1\\le H_i,P_i,C_i\\le 10^9$。\r\n\r\n详细子任务附加限制及分值如下：\r\n\r\n| 子任务编号 |                      附加条件                      | 分值 |\r\n| :--------: | :------------------------------------------------: | :--: |\r\n|    $1$     |                     $N\\le 20$                      | $10$ |\r\n|    $2$     |                     $N\\le 300$                     | $10$ |\r\n|    $3$     |                $N\\le 5\\times 10^3$                 | $10$ |\r\n|    $4$     | 对于所有输入满足 $H_i\\neq H_j\\ (1\\le i\\lt j\\le N)$ |   $50$   |\r\n|    $5$     |                     无附加限制                     |    $20$  |\r\n\r\n"}]}