{"title":"「JOISC 2020 Day2」有趣的 Joitter 交友","time_limit":3000,"memory_limit":1024,"tags":["JOISC","2020","启发式合并"],"operation":{"submit":"https://loj.ac/problem/3275#submit_code","submissions":"https://loj.ac/submissions?problem_id=3275","statistics":"https://loj.ac/problem/3275/statistics/fastest","testdata":"https://loj.ac/problem/3275/testdata","discussion":"https://loj.ac/discussion/problem/3275"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOISC 2020](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day2 T2「[ジョイッターで友達をつくろう](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/joitter2.pdf) / [Making Friends on Joitter is Fun](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/joitter2-en.pdf)」**\r\n\r\n$\\texttt{Joitter}$ 是一款社交软件，你可以在这里和你的朋友分享你的高光时刻。\r\n\r\n在 $\\texttt{Joitter}$ 中，你可以关注别的用户。举例来说，当用户 $a$ 关注了另外一个用户 $b$ ，用户 $a$ 可以在时间轴上阅读用户 $b$ 的帖子。在这种情况下，用户 $b$ 有可能关注用户 $a$ ，也可能不关注用户 $a$ 。当然，用户 $a$ 不能关注 Ta 自己或者关注用户 $b$ 超过一次。\r\n\r\n一共有 $N$ 个用户已经开始使用 $\\texttt{Joitter}$ ，一开始他们没有关注任何其他用户。\r\n\r\n从现在起，持续 $M$ 天，在第 $i$ 天会发生用户 $A_i$ 关注用户 $B_i$ 的事件（$1 \\le i \\le M$）。\r\n\r\n$\\texttt{Joitter}$ 官方正在计划在这 $M$ 天中举行一场活动，这场活动有如下的步骤：\r\n\r\n1. 选择一个用户 $x$ 。\r\n2. 同时选择一个被 $x$ 关注的用户 $y$ 。\r\n3. 选择一个用户 $z$ ，要求满足 $z$ 不是 $x$ ，$x$ 没有关注 $z$ ，且 $y$ 和 $z$ 互相关注。\r\n4. 让 $x$ 关注 $z$\r\n5. 重复上述步骤，直到无法选出三元组 $(x,y,z)$\r\n\r\n$\\texttt{Joitter}$ 官方仍然还没有决定何时开始举办这个活动。所以他们想要知道，$\\forall i \\in [1,m]$，若活动在第 $i$ 天开始，活动结束后每个用户关注其他用户数量和的最大值是多少。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"从标准输入中读入以下内容：\r\n\r\n第一行两个整数 $N,M$；\r\n\r\n接下来 $M$ 行，每行两个整数 $A_i,B_i$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $M$ 行到标准输出，第 $i$ 行输出若活动在第 $i$ 天开始，活动结束后每个用户关注其他用户数量和的最大值是多少。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n4 6\r\n1 2\r\n2 3\r\n3 2\r\n1 3\r\n3 4\r\n4 3\r\n```\r\n#### 样例输出 1\r\n```plain\r\n1\r\n2\r\n4\r\n4\r\n5\r\n9\r\n```\r\n#### 样例说明 1\r\n\r\n第一天，用户 $1$ 关注了用户 $2$。在这天活动结束的话，没有任何其他用户会关注其他人。所以总和是 $1$。\r\n\r\n第二天，用户 $2$ 关注了用户 $3$。在这天活动结束的话，没有任何其他用户会关注其他人。所以总和是 $2$。\r\n\r\n第三天，用户 $3$ 关注了用户 $2$。在这天活动结束的话，用户 $1$ 会关注用户 $3$。所以总和是 $4$，并且它是总和的可能最大值。\r\n\r\n第四天，用户 $1$ 关注了用户 $3$。在这天活动结束的话，没有任何其他用户会关注其他人。所以总和是 $4$。\r\n\r\n第五天，用户 $3$ 关注了用户 $4$。在这天活动结束的话，没有任何其他用户会关注其他人。所以总和是 $5$。\r\n\r\n第六天，用户 $4$ 关注了用户 $3$。在这天活动结束的话，用户 $1$ 会关注用户 $4$，用户 $2$ 会关注用户 $4$，用户 $4$ 会关注用户 $2$。所以总和是 $9$，并且它是总和的可能最大值。\r\n\r\n#### 样例输入 2\r\n```plain\r\n6 10\r\n1 2\r\n2 3\r\n3 4\r\n4 5\r\n5 6\r\n6 5\r\n5 4\r\n4 3\r\n3 2\r\n2 1\r\n```\r\n#### 样例输出 2\r\n```plain\r\n1\r\n2\r\n3\r\n4\r\n5\r\n7\r\n11\r\n17\r\n25\r\n30\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$2\\le N\\le 10^5,1\\le M\\le 3\\times 10^5$，保证：\r\n- $1\\le A_i,B_i\\le N\\ (1\\le i\\le M)$；\r\n- $A_i\\neq B_i\\ (1\\le i\\le M)$；\r\n- $(A_i,B_i)\\neq (A_j,B_j)\\ (1\\le i\\lt j\\le M)$。\r\n\r\n详细子任务及附加限制如下表：\r\n\r\n| 子任务编号 |      附加限制       | 分值 |\r\n| :--------: | :-----------------: | :--: |\r\n|    $1$     |      $N\\le 50$      | $1$  |\r\n|    $2$     | $N\\le 2\\times 10^3$ | $16$ |\r\n|    $3$     |     无附加限制      | $83$ |\r\n\r\n"}]}