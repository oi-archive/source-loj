{"title":"「JOISC 2019 Day4」矿物","time_limit":1000,"memory_limit":256,"tags":["JOISC","2019","分治","交互题"],"operation":{"submit":"https://loj.ac/problem/3041#submit_code","submissions":"https://loj.ac/submissions?problem_id=3041","statistics":"https://loj.ac/problem/3041/statistics/fastest","testdata":"https://loj.ac/problem/3041/testdata","discussion":"https://loj.ac/discussion/problem/3041"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOISC 2019](https://www.ioi-jp.org/camp/2019/2019-sp-tasks/index.html) Day4 T3「[鉱物](https://www.ioi-jp.org/camp/2019/2019-sp-tasks/day4/minerals.pdf) / [Minerals](https://www.ioi-jp.org/camp/2019/2019-sp-tasks/day4/minerals-en.pdf)」**\r\n\r\nJOI 教授的实验室正在研究 $N$ 种矿物。每种矿物有两个样本，一共有 $2N$ 个样本，编号为 $1\\sim 2N$。\r\n\r\n一天，助手 Bitaro 不小心弄掉了这个装有 $2N$ 个样本的箱子，他不知道哪两个样本是同一种矿物的样本了。\r\n\r\n这个实验室有一台设备，可以通过测量每种矿物吸收光的波长，统计出插入这个设备的矿石种类数。Bitaro 决定利用这台设备给这 $2N$ 个样本中属于相同矿石种类的两两配对。起初，设备中没有矿石样本。Bitaro 可以如下操作：\r\n- 向设备中插入一个矿石样本，Bitaro 可以知道设备中有多少种矿石样本；\r\n- 从设备中拔出一个矿石样本，Bitaro 可以知道设备中有多少种矿石样本；\r\n\r\n这样 JOI 教授就不会找 Bitaro 的麻烦了。Bitaro 总共可以操作最多 $10^6$ 次。\r\n\r\n给出矿物种类数，写一个程序，利用这台设备给相同矿物种类样本配对。\r\n\r\n#### 实现细节\r\n你需要提交一个文件，包含 `minerals.h` 并使用以下函数：\r\n```cpp\r\nvoid Solve(int N)\r\n```\r\n对于每组数据，这个函数调用且仅调用一次。参数 `N` 代表 $N$，即矿物种类数。\r\n\r\n你的程序可以调用以下函数：\r\n```cpp\r\nint Query(int x)\r\n```\r\n\r\n对于你指定的样本编号，如果设备中有这个样本，则将其抽出，否则将其插入，返回设备中矿石样本种类数。\r\n- 对于你通过参数 `x` 指定的样本编号 $x$，必须保证 $1\\le x\\le 2N$，否则程序将被判为 **Wrong Answer [1]**；\r\n- `Query()` 函数不能调用超过 $10^6$ 次，否则程序将被判为 **Wrong Answer [2]**；\r\n\r\n```cpp\r\nvoid Answer(int a, int b)\r\n```\r\n利用这个函数，你可以回答相同矿石种类的矿石样本编号，意味着 $a$ 和 $b$ 号样本矿石种类相同。必须保证 $1\\le a,b\\le 2N$，否则程序将被判为 **Wrong Answer [3]**；如果重复回答同一对矿石，将被判为 **Wrong Answer [4]**，如果 $a$ 与 $b$ 并不属于同一种矿石，将被判为 **Wrong Answer [5]**。\r\n\r\n`Answer()` 函数必须被调用 $N$ 次，否则程序将被判为 **Wrong Answer [6]**。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"交互程序从标准输入中读入以下内容：\r\n\r\n第一行一个正整数 $N$，表示矿石种类数；\r\n\r\n接下来 $N$ 行，每行两个正整数 $X_i,Y_i$，表示编号为 $X_i$ 与 $Y_i$ 的矿石种类相同。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"交互程序将向标准输出输出以下内容：\r\n\r\n如果你的程序正确，将输出 `Accepted: 100`；\r\n\r\n否则，将输出类似 `Wrong Answer [1]` 的内容。如果有多种错误，程序将只输出一个。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4\r\n1 5\r\n2 6\r\n3 4\r\n7 8\r\n```\r\n#### 样例交互过程\r\n|        调用         |          调用          | 返回值 |\r\n| :-----------------: | :--------------------: | :----: |\r\n| $\\texttt{Solve}(4)$ |      <!-- 233 -->      |        |\r\n|    <!-- 233 -->     |  $\\texttt{Query}(1)$   |  $1$   |\r\n|    <!-- 234 -->     |  $\\texttt{Query}(2)$   |  $2$   |\r\n|    <!-- 233 -->     |  $\\texttt{Query}(5)$   |  $2$<!-- 233 -->   |\r\n|    <!-- 234 -->     |  $\\texttt{Query}(2)$   |  $1$   |\r\n|    <!-- 233 -->     | $\\texttt{Answer}(3,4)$ | （无） |\r\n|    <!-- 234 -->     | $\\texttt{Answer}(5,1)$ | （无） |\r\n|    <!-- 233 -->     | $\\texttt{Answer}(8,7)$ | （无） |\r\n|    <!-- 234 -->     | $\\texttt{Answer}(2,6)$ | （无） |\r\n\r\n\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le N\\le 4.3\\times 10^4,1\\le X_i,Y_i\\le 2N$，保证每一个数对两两本质不同。\r\n\r\n详细子任务附加条件及分值如下表：\r\n\r\n| 子任务 |                           附加限制                           | 分值 |\r\n| :----: | :----------------------------------------------------------: | :--: |\r\n|  $1$   |                          $N\\le 100$                          | $6$  |\r\n|  $2$   | $N\\le 1.5\\times 10^4,1\\le X_i\\le N,N+1\\le Y_i\\le 2N\\ (1\\le i\\le N)$ | $25$ |\r\n|  $3$   |                    $N\\le 1.5\\times 10^4$                     | $9$  |\r\n|  $4$   |                    $N\\le 3.8\\times 10^4$                     | $30$ |\r\n|  $5$   |                    $N\\le 3.9\\times 10^4$                     | $5$  |\r\n|  $6$   |                     $N\\le 4\\times 10^4$                      | $5$  |\r\n|  $7$   |                    $N\\le 4.1\\times 10^4$                     | $5$  |\r\n|  $8$   |                    $N\\le 4.2\\times 10^4$                     | $5$  |\r\n|  $9$   |                          无附加限制                          | $10$ |\r\n\r\n"}]}