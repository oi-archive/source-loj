{"title":"「JOISC 2014 Day1」历史研究","time_limit":4000,"memory_limit":512,"tags":["2014","JOISC","分块及按大小分类"],"operation":{"submit":"https://loj.ac/problem/2874#submit_code","submissions":"https://loj.ac/submissions?problem_id=2874","statistics":"https://loj.ac/problem/2874/statistics/fastest","testdata":"https://loj.ac/problem/2874/testdata","discussion":"https://loj.ac/discussion/problem/2874"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 JOISC 2014 Day1 T3「[歴史の研究](https://www.ioi-jp.org/camp/2014/2014-sp-tasks/2014-sp-d1.pdf)」**\r\n\r\nIOI 国历史研究的大牛——JOI 教授，最近获得了一份被认为是古代 IOI 国的住民写下的日记。JOI 教授为了通过这份日记来研究古代 IOI 国的生活，开始着手调查日记中记载的事件。  \r\n日记中记录了连续 $N$ 天发生的事件，每天发生一件事件。  \r\n事件有种类之分。第 $i$ 天发生的事件的种类用一个整数 $X_i$ 表示，$X_i$ 越大，事件的规模就越大。  \r\nJOI 教授决定用如下的方法分析这些日记：\r\n1. 选择日记中连续的一些天作为分析的时间段；\r\n2. 事件种类 $t$ 的重要度为 $t$ 与这段时间内重要度为 $t$ 的事件数的乘积；\r\n3. 计算出所有事件种类的重要度，输出其中的最大值。\r\n\r\n请制作一个帮助教授分析的程序，每次给出分析的区间，你需要输出重要度的最大值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个空格分隔的整数 $N$ 和 $Q$，表示日记一共记录了 $N$ 天，询问有 $Q$ 次。  \r\n接下来一行 $N$ 个空格分隔的整数 $X_1\\dots X_N$，$X_i$ 表示第 $i$ 天发生的事件的种类。  \r\n接下来 $Q$ 行，第 $i$ 行有两个空格分隔整数 $A_i$ 和 $B_i$，表示第 $i$ 次询问的区间为 $[A_i,B_i]$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $Q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问的最大重要度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5 5\r\n9 8 7 8 9\r\n1 2\r\n3 4\r\n4 4\r\n1 4\r\n2 4\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n9\r\n8\r\n8\r\n16\r\n16\r\n```\r\n\r\n#### 样例说明 1\r\n这本日记由五天组成，日记中写的事件类型是 $7,8,9$ 之一。\r\n\r\n|时间区间|事件种类 $7$ 的重要性|事件种类 $8$ 的重要性|事件种类 $9$ 的重要性|$\\max$|\r\n|-|-|-|-|-|\r\n|$[1,2]$|$7×0 = 0$|$8×1 = 8$|$9×1 = 9$|$9$|\r\n|$[3,4]$|$7×1 = 7$|$8×1 = 8$|$9×0 = 0$|$8$|\r\n|$[4,4]$|$7×0 = 0$|$8×1 = 8$|$9×0 = 0$|$8$|\r\n|$[1,4]$|$7×1 = 7$|$8×2 = 16$|$9×1 = 9$|$16$|\r\n|$[2,4]$|$7×1 = 7$|$8×2 = 16$|$9×0 = 0$|$16$|\r\n\r\n#### 样例输入 2\r\n```plain\r\n8 4\r\n9 9 19 9 9 15 9 19\r\n1 4\r\n4 6\r\n3 5\r\n5 8\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n27\r\n18\r\n19\r\n19\r\n```\r\n\r\n#### 样例说明 2\r\n这组样例属于子任务 #3。\r\n\r\n#### 样例输入 3\r\n```plain\r\n12 15\r\n15 9 3 15 9 3 3 8 16 9 3 17\r\n2 7\r\n2 5\r\n2 2\r\n1 12\r\n4 12\r\n3 6\r\n11 12\r\n1 7\r\n2 6\r\n3 5\r\n3 10\r\n7 10\r\n1 4\r\n4 8\r\n4 8\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n18\r\n18\r\n9\r\n30\r\n18\r\n15\r\n17\r\n30\r\n18\r\n15\r\n18\r\n16\r\n30\r\n15\r\n15\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据，$1\\le N, Q\\le 10^5,$ $1\\le X_i\\le 10^9 (1\\le i\\le N)$。\r\n\r\n\r\n|子任务编号|分值|附加条件|\r\n|-|-|-|-|\r\n|1|5|$N, Q\\le 100$|\r\n|2|10|$N, Q\\le 5000$|\r\n|3|25|没有 $i, j$ $(1≤i≤Q, 1≤j≤Q, i≠j)$，使得 $A_i≤A_j≤B_j≤B_i$。|\r\n|4|60|无|"}]}