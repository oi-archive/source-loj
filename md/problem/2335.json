{"title":"「JOI 2017 Final」足球","time_limit":3000,"memory_limit":256,"tags":["2017","JOI","最短路","图论","子任务"],"operation":{"submit":"https://loj.ac/problem/2335#submit_code","submissions":"https://loj.ac/submissions?problem_id=2335","statistics":"https://loj.ac/problem/2335/statistics/fastest","testdata":"https://loj.ac/problem/2335/testdata","discussion":"https://loj.ac/discussion/problem/2335"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOI 2017 Final](https://www.ioi-jp.org/joi/2016/2017-ho/) T4「[サッカー](https://www.ioi-jp.org/joi/2016/2017-ho/2017-ho.pdf) / [Soccer](https://www.ioi-jp.org/joi/2016/2017-ho/2017-ho-en.pdf)」**\r\n\r\n> 「假定球滚动时可以穿过其他球员」这句是在未修改数据的前提下，为了严谨我补上的，原题没有提这一点。如果撞到其他球员就停下的话似乎做法不同？\r\n\r\n你是 JOI 联赛中一所声名卓著的足球俱乐部的经理。\r\n\r\n俱乐部有 $N$ 名球员，编号为 $1\\ldots N$。球员们每天都刻苦地进行训练，剑指联赛冠军。足球场可视为一个底为 $W$ 米，高 $H$ 米的长方形，底平行于东西方向，高平行于南北方向。如果某个点向北走 $i$ 米，再向西走 $j$ 米恰好到达球场的西北角，这个点可用坐标 $(i, j)$ 来表示。\r\n\r\n练习结束后，你要回收练习用的足球。开始回收时，所有球员都在足球场上，球员 $i (1\\leqslant i\\leqslant N)$ 位于 $(S_i, T_i)$，球在球员 $1$ 脚下。你正和球员 $N$ 一起站在 $(S_N, T_N)$，并准备回收球。球员们把球传到 $(S_N, T_N)$ 时，你才会回收球。\r\n\r\n你可以指挥球员，但某些操作会提升球员的**疲劳度**。一个球员不能同时进行多项操作。  \r\n你可以指挥控球的球员进行如下操作：\r\n* **踢球**。在东西南北四个方向中任选一个，并指定一个正整数 $p$，该球员将球朝指定方向踢出恰好 $p$ 米。**假定球滚动时可以穿过其他球员**。该球员不会移动，且自动停止控球，疲劳度上升 $A\\times p+B$。\r\n* **运球**。在东西南北四个方向中任选一个，该球员带球，朝指定方向移动 $1$ 米。该球员仍然控球，疲劳度上升 $C$。\r\n* **停止控球**。该球员的疲劳度不改变。\r\n\r\n你可以指挥没有控球的球员进行如下操作：\r\n* **移动**。在东西南北四个方向中任选一个，该球员朝指定方向移动 $1$ 米，疲劳度上升 $C$。\r\n* **控球**。如果该球员所在的位置恰好有球，且没有其他球员控球，该球员才能控球。该球员的疲劳度不改变。\r\n\r\n球员和球有可能跑出场外，一个位置上可能有多个球员。  \r\n一天的训练结束后，球员们非常疲惫。你想知道在回收球的过程中，所有球员上升的疲劳度之和的最小值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个整数 $H, W$，用空格分隔。  \r\n第二行有三个整数 $A, B, C$，用空格分隔。  \r\n第三行有一个整数 $N$。  \r\n在接下来的 $N$ 行中，第 $i$ 行 $(1\\leqslant i\\leqslant N)$有两个整数 $S_i, T_i$，用空格分隔。  \r\n输入的所有数的含义见题目描述。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一行，一个整数，表示在回收球的过程中，所有球员上升的疲劳度之和的最小值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n6 5\r\n1 3 6\r\n3\r\n1 1\r\n0 4\r\n6 5\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n26\r\n```\r\n\r\n#### 样例解释 1\r\n在这组样例中，球场、球员、球处于如图所示的状态。图中，黑框空心圆圈表示球员，实心圆表示球，你在 $(6,5)$。\r\n\r\n<img src=\"http://www.z4a.net/images/2017/12/10/JOI2017T4-1.png\" width = \"25%\" height = \"25%\" alt=\"初始状态\" align=center />\r\n\r\n最优解如下：\r\n1. 球员 $1$ 把球向东踢出 $3$ 米。疲劳度上升了 $1\\times 3+3=6$，球移动到 $(1,4)$。\r\n2. 球员 $2$ 向南移动 $1$ 米。疲劳度又上升了 $6$。\r\n3. 球员 $2$ 开始控球。\r\n4. 球员 $2$ 向东运球 $1$ 米。疲劳度又上升了 $6$。\r\n5. 球员 $2$ 把球向南踢出 $5$ 米，疲劳度上升了 $1\\times 5+3=8$，球移动到 $(6,5)$。\r\n\r\n此时，疲劳度之和为 $6+6+6+8=26$。没有更好的方案。\r\n\r\n<img src=\"http://www.z4a.net/images/2017/12/10/JOI2017T4-2.png\"  alt=\"最优解\" align=center />\r\n\r\n#### 样例输入 2\r\n```plain\r\n3 3\r\n0 50 10\r\n2\r\n0 0\r\n3 3\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n60\r\n```\r\n\r\n#### 样例解释 2\r\n在最优解中，不需要踢球。\r\n\r\n#### 样例输入 3\r\n```plain\r\n4 3\r\n0 15 10\r\n2\r\n0 0\r\n4 3\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n45\r\n```\r\n\r\n#### 样例输入 4\r\n```plain\r\n4 6\r\n0 5 1000\r\n6\r\n3 1\r\n4 6\r\n3 0\r\n3 0\r\n4 0\r\n0 4\r\n```\r\n\r\n#### 样例输出 4\r\n```plain\r\n2020\r\n```\r\n\r\n#### 样例解释 4\r\n注意这组样例中有多个球员在同一位置的情况。\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $5\\%$ 的数据，$N=2$。  \r\n对于另外 $30\\%$ 的数据，$N\\leqslant 1000, A=0$。  \r\n对于所有数据，$1\\leqslant H,W\\leqslant 500, 0\\leqslant A, B, C\\leqslant 10^9, 2\\leqslant N\\leqslant 10^5, 0\\leqslant S_i\\leqslant H, 0\\leqslant T_i\\leqslant W(1\\leqslant i\\leqslant N), (S_1, T_1)\\neq(S_N, T_N)$。"}]}