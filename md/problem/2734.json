{"title":"「JOISC 2016 Day 2」女装大佬","time_limit":2000,"memory_limit":256,"tags":["2016","JOISC","前缀和","贪心"],"operation":{"submit":"https://loj.ac/problem/2734#submit_code","submissions":"https://loj.ac/submissions?problem_id=2734","statistics":"https://loj.ac/problem/2734/statistics/fastest","testdata":"https://loj.ac/problem/2734/testdata","discussion":"https://loj.ac/discussion/problem/2734"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**题目译自 [JOISC 2016](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/index.html) Day2 T3 「[トイレ](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/2016-sp-d2.pdf)」**  \r\n\r\n> 题面魔改原因：原题是男选手太多所以要借用女厕所 →_→ 译者表示无法接受\r\n\r\nIOI 的队服有两种，一种男装，一种是女装。然而很遗憾，所有参赛队伍中并没有女生，只有女装大佬。现在 IOI 设置了两个发放点，一个点只发放男装，另一个点只发放女装。\r\n\r\n现在，所有队伍总共 $2N$ 个参赛队员，他们排成一列来领取队服，领取队服的规则如下：  \r\n1. 当前队首是女装大佬，如果领取女装的地方是空的，那么他就会领取女装，否则如果领取男装的地方是空的，他会去领取男装；   \r\n2. 当前队首是正常男生，如果领取男装的地方是空的，那么他会领取男装，否则如果女装位空着，他就发挥绅♂士精神，给身后的最前面的女装大佬让位，让他先领取女装。  \r\n\r\n已知任意一个人领取队服都需要**一分钟**的时间，现在你需要重排所有人的顺序，使他们在 $N$ 分钟内领完队服 。   \r\n\r\n定义一个人的 Dark 值为：在重排队伍之前在他后面，且重排队伍之后在他前面的人的数量。   \r\n你现在需要找出重排后整个队伍**最大的 Dark 值**至少为多少。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行为一个数 $N$ ，为领完队服的时限，同时 $2N$ 代表着总领队服人数，需要注意的是，这不意味着正常男生和女装大佬刚好各占 $N$ 个；     \r\n第二行为一个数 $M$，指队伍共有 $M$ 种；    \r\n之后的 $M$ 行，第 $i$ 行包括一个字符串和一个数字，描述该队伍的组成，其中 `M` 表示正常男生，`F` 表示女装大佬，之后的一个数字，表示该字符串连续出现了几次。所有字符串长度乘上出现次数的和等于 $2N$。  \r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一个数，表示重排后最大 Dark 值的最小值，如果在 $N$ 分钟内不能完成领取队服的任务，输出 $-1$。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n6\r\n1\r\nFFFMMMMMMFFF 1\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n2\r\n```\r\n\r\n#### 样例解释 1\r\n重排之后排列是这样的：`FMMFFMMMMFFF`。  \r\n对于第四和第五个女装大佬，因为有两个男生跑到了他们前面，所以他们的不满度都上升 $2$。   \r\n这是最小的方法，因为你找不出更小的方案。\r\n\r\n#### 样例输入 2\r\n```plain\r\n6\r\n1\r\nMMFFMMMMFFMF 1\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n-1\r\n```\r\n\r\n#### 样例输入 3\r\n```plain\r\n6\r\n1\r\nMFFFMFMMFFFM 1\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n0\r\n```\r\n\r\n#### 样例输入 4\r\n```plain\r\n6\r\n4\r\nM 1\r\nF 2\r\nFM 2\r\nMFFFM 1\r\n```\r\n\r\n#### 样例输出 4\r\n```plain\r\n0\r\n```\r\n\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部的数据，$1 \\leq N \\leq 10^{18} $,$1 \\leq M \\leq 10^5 $，给出的字符串总长小于等于 $2\\times 10^5 $。\r\n\r\n具体子任务限制及得分情况如下表：\r\n\r\n| Subtask |      限制      | 分数 |\r\n| :-----: | :------------: | :--: |\r\n|   $1$   | $1 \\leq N \\leq 10$，且字符串只有一个且只出现一次 | $14$ |\r\n|   $2$   | $1 \\leq N \\leq 10^5$，且字符串只有一个且只出现一次 | $22$ |\r\n|   $3$   | 无追加限制 | $64$ |"}]}