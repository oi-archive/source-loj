{"title":"「JOI 2013 Final」 冒泡排序","time_limit":1000,"memory_limit":256,"tags":["2013","JOI","线段树","分治"],"operation":{"submit":"https://loj.ac/problem/2765#submit_code","submissions":"https://loj.ac/submissions?problem_id=2765","statistics":"https://loj.ac/problem/2765/statistics/fastest","testdata":"https://loj.ac/problem/2765/testdata","discussion":"https://loj.ac/discussion/problem/2765"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**本题译自 [JOI 2013 Final](https://www.ioi-jp.org/joi/2012/2013-ho/index.html) T5「[バブルソート](https://www.ioi-jp.org/joi/2012/2013-ho/2013-ho.pdf)」**\r\n\r\n冒泡排序是一种能对数列进行排序的算法。在使用冒泡排序对长为 $ N $ 的数列 $ A $ 进行升序排序时，如果相邻两个数中左边的数大于了右边的数，则交换这两个数的位置。每次从数列的前端开始扫描，当 $ A_i>A_{i+1} (i=1,2,\\cdots,N-1) $ ，就将这两个数交换。扫描进行 $ N-1 $ 次后，数列就一定满足升序排列。\r\n\r\n对数列 $ A $ 进行冒泡排序的交换次数表示：对数列 $ A $ 进行以上所述算法时，整数被交换的次数。（冒泡排序的算法和实现包括循环顺序、范围和终止条件等。有时会存在细微差别。 但是，当应用于相同的数列时，整数的交换次数不会因这些情况的不同而改变。）\r\n\r\n例如，以下为对长为 $ N $ 的整数数列 $ A $ 进行冒泡排序的程序（C 语言）。\r\n```c\r\nvoid bubble_sort(int *a, int n) {\r\n\tint i, j;\r\n\tfor (i = 0; i < n - 1; ++i) {\r\n\t\tfor (j = 0; j < n - 1; ++j) {\r\n\t\t\tif (a[j] > a[j + 1]) {\r\n\t\t\t\t/* 以下 3 行相当于一次整数交换 */\r\n\t\t\t\tint x = a[j];\r\n\t\t\t\ta[j] = a[j + 1];\r\n\t\t\t\ta[j + 1] = x;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n#### 任务\r\n给出长为 $ N $ 的数列 $ A $ ，对数列 $ A $ 中任意两个整数进行一次交换得到数列 $ A' $ 。请编写程序求出对数列 $ A' $ 使用冒泡排序使其升序排列的交换次数的最小值。（请注意：开始时对数列 $ A $ 中整数的交换并不需要交换相邻两个数。）"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入标准如下：\r\n- 第一行为一个整数 $ N $ ，表示数列 $ A $ 的长度；\r\n- 接下来的 $ N $ 行中的第 $ i $ 行 $ (1 \\leq i \\leq N) $ 为一个整数 $ A_i $ ，表示数列 $ A $ 中第 $ i $ 个整数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数：表示对数列 $ A' $ 进行冒泡排序的交换次数的最小值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n5\r\n10\r\n3\r\n6\r\n8\r\n1\r\n```\r\n#### 样例输出 1\r\n```plain\r\n0\r\n```\r\n#### 样例说明 1\r\n将数列 $ A $ 开头的 $ 10 $ 和最后的 $ 1 $ 交换，数列 $ A' $ 就已经是升序的了。冒泡排序的交换次数为 $ 0 $ 。\r\n#### 样例输入 2\r\n```plain\r\n5\r\n3\r\n1\r\n7\r\n9\r\n5\r\n```\r\n#### 样例输出 2\r\n```plain\r\n2\r\n```\r\n#### 样例说明 2\r\n将数列 $ A $ 第 $ 3 $ 个数 $ 7 $ 和最后一个数 $ 5 $ 交换，数列 $ A' $ 就成了 $ 3,1,5,9,7 $ 。 $ A' $ 的冒泡排序交换次数为 $ 2 $ 。\r\n#### 样例输入 3\r\n```plain\r\n3\r\n1\r\n2\r\n3\r\n```\r\n#### 样例输出 3\r\n```plain\r\n1\r\n```\r\n#### 样例说明 3\r\n虽然一开始数列 $ A $ 就是升序排列的，但是还是必须交换其中两个数构成数列 $ A' $ 。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 10\\% $ 的数据：\r\n- $ N \\leq 1000 $ 且对于任意 $ i,j (1 \\leq i < j \\leq N) $ 满足 $ A_i \\not =  A_j $\r\n\r\n对于 $ 30\\% $ 的数据：\r\n- $ N \\leq 5000 $ 且对于任意 $ i,j (1 \\leq i < j \\leq N) $ 满足 $ A_i \\not = A_j $\r\n\r\n对于 $ 80\\% $ 的数据：\r\n- 对于任意 $ i,j (1 \\leq i < j \\leq N) $ 满足 $ A_i \\not =  A_j $\r\n\r\n对于 $ 100\\% $ 的数据：\r\n- $ 1 \\leq N \\leq 10^5 $\r\n- $ 1 \\leq A_i \\leq 10^9 $"}]}