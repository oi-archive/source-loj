{"title":"「WC2001」高性能计算机","time_limit":1000,"memory_limit":256,"tags":["WC","早于 2010","DP"],"operation":{"submit":"https://loj.ac/problem/2378#submit_code","submissions":"https://loj.ac/submissions?problem_id=2378","statistics":"https://loj.ac/problem/2378/statistics/fastest","testdata":"https://loj.ac/problem/2378/testdata","discussion":"https://loj.ac/discussion/problem/2378"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"现在有一项时间紧迫的工程计算任务要交给你——国家高性能并行计算机的主管工程师——来完成。为了尽可能充分发挥并行计算机的优势，我们的计算任务应当划分成若干个小的子任务。\r\n\r\n这项大型计算任务包括 $A$ 和 $B$ 两个互不相关的较小的计算任务。为了充分发挥并行计算机的运算能力，这些任务需要进行分解。研究发现，$A$ 和 $B$ 都可以各自划分成很多较小的子任务，所有的 $A$ 类子任务的工作量都是一样的，所有的 $B$ 类子任务也是如此（$A$ 和 $B$ 类的子任务的工作量不一定相同）。$A$ 和 $B$ 两个计算任务之间，以及各子任务之间都没有执行顺序上的要求。\r\n\r\n这台超级计算机拥有 $p$ 个计算节点，每个节点都包括一个串行处理器、本地主存和高速 cache。然而由于常年使用和不连贯的升级，各个计算节点的计算能力并不对称。一个节点的计算能力包括如下几个方面：\r\n\r\n1. 就本任务来说，每个节点都有三种工作状态：待机、$A$ 类和 $B$ 类。其中，$A$ 类状态下执行 $A$ 类任务；$B$ 类状态下执行 $B$ 类任务；待机状态下不执行计算。所有的处理器在开始工作之前都处于待机状态，而从其它的状态转入 $A$ 或 $B$ 的工作状态（包括 $A$ 和 $B$ 之间相互转换），都要花费一定的启动时间。对于不同的处理节点，这个时间不一定相同。用两个正整数 $t_i^A$ ​和 $t_i^B(i=1,2,\\cdots ,p)$ 分别表示节点i转入工作状态 $A$ 和工作状态 $B$ 的启动时间（单位：ns）。\r\n\r\n2. 一个节点在连续处理同一类任务的时候，执行时间——不含状态转换的时间——随任务量（这一类子任务的数目）的平方增长，即：\r\n\r\n若节点 $i$ 连续处理 $x$ 个 $A$ 类子任务，则对应的执行时间为：$t=k_i^Ax^2$；  \r\n类似的，若节点 $i$ 连续处理 $x$ 个 $B$ 类子任务，对应的执行时间为：$t=k_i^Bx^2$。\r\n\r\n其中，$k_i^A$ ​和 $k_i^B$ ​是系数，单位是 ns，$i=1,2,\\cdots ,p$。\r\n\r\n任务分配必须在所有计算开始之前完成，所谓任务分配，即给每个计算节点设置一个任务队列，队列由一串A类和B类子任务组成。两类子任务可以交错排列。\r\n\r\n计算开始后，各计算节点分别从各自的子任务队列中顺序读取计算任务并执行，队列中连续的同类子任务将由该计算节点一次性读出，队列中一串连续的同类子任务不能被分成两部分执行。\r\n\r\n现在需要你编写程序，给这 $p$ 个节点安排计算任务，使得这个工程计算任务能够尽早完成。假定任务安排好后不再变动，而且所有的节点都同时开始运行，任务安排的目标是使最后结束计算的节点的完成时间尽可能早。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行是对计算任务的描述，包括两个正整数 $n_A$ 和 $n_B$，分别是 $A$ 类和 $B$ 类子任务的数目，两个整数之间由一个空格隔开。\r\n\r\n后面部分是对此计算机的描述：\r\n\r\n第二行是一个整数 $p$，即计算节点的数目。\r\n\r\n随后连续的 $p$ 行按顺序分别描述各个节点的信息，第 $i$ 个节点由第 $i+2$ 行描述，该行包括下述四个正整数（相邻两个整数之间有一个空格）：$t_i^A,t_i^B,k_i^A,k_i^B$"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"只有一行，包含有一个正整数，即从各节点开始计算到任务完成所用的时间。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5\r\n3\r\n15 10 6 4\r\n70 100 7 2\r\n30 70 1 6\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n93\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于所有数据：  \r\n$1≤n_A​≤60,1≤n_B​≤60$  \r\n$1≤p≤20$  \r\n$1≤t_A≤1000,1≤t_B≤1000,1≤k_A≤50,1≤k_B≤50$"}]}