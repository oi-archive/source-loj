{"title":"「ROI 2016 Day1」人烟之山","time_limit":2000,"memory_limit":512,"tags":["2016","ROI"],"operation":{"submit":"https://loj.ac/problem/3063#submit_code","submissions":"https://loj.ac/submissions?problem_id=3063","statistics":"https://loj.ac/problem/3063/statistics/fastest","testdata":"https://loj.ac/problem/3063/testdata","discussion":"https://loj.ac/discussion/problem/3063"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**译自 [ROI 2016](http://neerc.ifmo.ru/school/archive/2015-2016.html) Day1 T4.** ***[Обитаемые горы](http://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-roi-2016-day1.pdf)***\r\n\r\n> ~~基于[斯特鲁伽茨基兄弟](https://en.wikipedia.org/wiki/Arkady_and_Boris_Strugatsky)的小说《[人烟之岛](https://en.wikipedia.org/wiki/Prisoners_of_Power)》。~~ 译者没时间翻译完整题面了，泥萌先甭看故事了\r\n\r\n<center><img src=\"https://loj-img.upyun.menci.memset0.cn/2019/04/17/5cb6cab7bb16e.png\" alt=\"roi16D1.sans.png\" title=\"roi16D1.sans.png\" width=\"33.3%\" /></center>\r\n\r\n某地地形可用 $n$ 段折线来表示（下文称之为多段线），这 $n$ 段折线连接了 $n+1$ 个拐点，且保证没有垂直线。我们将拐点从左到右依次编为 $0\\ldots n$ 号。我们将最左侧的点（即 $0$ 号点）设为原点，然后给出每一段的射影长度（即该线段的两个端点的横坐标之差）和斜率。保证 $n$ 号点的纵坐标为 $0.$\r\n\r\n在某些位置将建起瞭望塔，瞭望塔上有一个或一些瞭望台。假设已知点 $A$ 和点 $B$，如果线段 $AB$ 上没有点严格位于多段线以下，那么我们称点 $A$ 可以看到点 $B$。\r\n\r\n该地共有 $q$ 个瞭望台。给出所有瞭望台的位置。对于 $j=1\\ldots q,$ 试求：从 $j$ 号瞭望台的塔基向左 / 右走，一直走到什么地方时还能看到该瞭望台，而再走远一点点就看不到了。（我们称之为该瞭望台的视界。）"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个整数 $n,q$。  \r\n第二行有一个整数 $C,$ 保证 $C=10^4$ 或 $10^9$。这个数会提示下面输入的数据的范围。  \r\n接下来 $n$ 行，每行两个整数 $d_i,$ $k_i$ $(1 ⩽ d_i ⩽ C,$ $−C ⩽ k_i ⩽ C)$。  \r\n接下来 $q$ 行，每行两个整数 $u_j,$ $v_j$ $(0 ⩽ u_j ⩽ C,$ $−C ⩽ v_j ⩽ C),$ 表示瞭望台的坐标。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"共 $q$ 行，每行两个整数，表示该瞭望台的视界。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n6 1\r\n3 1\r\n2 -1\r\n1 1\r\n1 -1\r\n1 1\r\n2 -1\r\n5 3\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n3 8\r\n```\r\n\r\n#### 样例说明 1\r\n<center><img src=\"https://loj-img.upyun.menci.memset0.cn/2019/04/24/5cbfddb20744c.png\" alt=\"sample1.png\" title=\"sample1.png\" width=\"60%\"/></center>\r\n\r\n#### 样例输入 2\r\n```plain\r\n5 3\r\n1 1\r\n1 -2\r\n2 0\r\n2 1\r\n1 -1\r\n3 0\r\n3 5\r\n3 3\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n1 6\r\n0 7\r\n0 6\r\n```\r\n\r\n#### 样例说明 2\r\n<center><img src=\"https://loj-img.upyun.menci.memset0.cn/2019/04/24/5cbfddb1bae10.png\" alt=\"sample2.png\" title=\"sample2.png\" width=\"60%\"/></center>\r\n\r\n#### 样例输入 3\r\n```plain\r\n6 4\r\n1 2\r\n2 -2\r\n1 1\r\n1 -2\r\n4 1\r\n1 -1\r\n1 4\r\n3 4\r\n10 4\r\n7 4\r\n```\r\n\r\n#### 样例输出 3\r\n```plain\r\n0 4\r\n1 9\r\n4 10\r\n1 10\r\n```\r\n\r\n#### 样例说明 3\r\n<center><img src=\"https://loj-img.upyun.menci.memset0.cn/2019/04/24/5cbfddb24b7c4.png\" alt=\"sample3.png\" title=\"sample3.png\" width=\"60%\"/></center>\r\n\r\n#### 样例输入 4\r\n```plain\r\n8 4\r\n1 -3\r\n2 0\r\n1 1\r\n2 0\r\n1 -3\r\n1 3\r\n1 2\r\n1 0\r\n2 -2\r\n6 -1\r\n6 4\r\n7 -4\r\n```\r\n\r\n#### 样例输出 4\r\n```plain\r\n0 6\r\n4 9\r\n0 10\r\n6 9\r\n```\r\n\r\n#### 样例说明 4\r\n<center><img src=\"https://loj-img.upyun.menci.memset0.cn/2019/04/24/5cbfddb17292c.png\" alt=\"sample4.png\" title=\"sample4.png\" width=\"60%\"/></center>"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"|子任务 #|分值|$1 ⩽ n, q ⩽ $|$C=$|额外条件|依赖子任务|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|1|9|$100$|$10^4$|$k_i = ±1$||\r\n|2|&nbsp;9&nbsp;|$100$|$10^4$|–|1|\r\n3|10|$3000$|$10^9$|&nbsp;–&nbsp;|1, 2|\r\n4|11|$10^5$|$10^9$|$k_i = ±1$|1|\r\n5|&nbsp;11&nbsp;|$10^5$|$10^9$|所有瞭望台都在 <br> 同一个瞭望塔上||\r\n6|12|$10^5$|$10^9$|所有瞭望塔上最高的 <br> 瞭望台的海拔相同||\r\n7|21|$10^5$|$10^9$|–|1–6|\r\n8|17|$4\\times 10^5$|$10^9$|&nbsp;–&nbsp;|1–7|"}]}