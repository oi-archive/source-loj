{"title":"「TJOI2015」旅游","time_limit":1000,"memory_limit":256,"tags":["2015","TJOI","树链剖分"],"operation":{"submit":"https://loj.ac/problem/2103#submit_code","submissions":"https://loj.ac/submissions?problem_id=2103","statistics":"https://loj.ac/problem/2103/statistics/fastest","testdata":"https://loj.ac/problem/2103/testdata","discussion":"https://loj.ac/discussion/problem/2103"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"为了提高智商，ZJY 准备去往一个新世界去旅游。这个世界的城市布局像一棵树。每两座城市之间只有一条路径可以互达。每座城市都有一种宝石，有一定的价格。ZJY\r\n 为了赚取最高利益，她会选择从 A 城市买入再转手卖到 B 城市。由于 ZJY 买宝石时经常卖萌，因而凡是 ZJY 路过的城市，这座城市的宝石价格会上涨。让我们来算算\r\n ZJY 旅游完之后能够赚取的最大利润。（如某城市宝石价格为 $v$，则 ZJY 在下一城市出售价格也为 $v$）"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行输入一个正整数 $N$，表示城市个数。  \r\n接下来一行输入 $N$ 个正整数表示每座城市宝石的最初价格 $p$，每个宝石的初始价格不超过 $100$。  \r\n第三行开始连续输入 $N-1$ 行，每行有两个数字 $x$ 和 $y$。表示 $x$ 城市和 $y$ 城市有一条路径。城市编号从 $1$ 开始。  \r\n下一行输入一个整数 $Q$，表示询问次数。  \r\n接下来 $Q$ 行，每行输入三个正整数 $a,b,v$，表示 ZJY 从 $a$ 旅游到 $b$，城市宝石上涨 $v$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每次询问，输出 ZJY 可能获得的最大利润，如果亏本则输出 ``0``。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n3\r\n1 2 3\r\n1 2\r\n2 3\r\n2\r\n1 2 100\r\n1 3 100\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n1\r\n1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$1 \\leq N \\leq 50000, \\ 1 \\leq Q \\leq 50000$"}]}