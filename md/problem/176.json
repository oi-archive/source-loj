{"title":"动理序列最值","time_limit":4000,"memory_limit":256,"tags":["模板","线段树"],"operation":{"submit":"https://loj.ac/problem/176#submit_code","submissions":"https://loj.ac/submissions?problem_id=176","statistics":"https://loj.ac/problem/176/statistics/fastest","testdata":"https://loj.ac/problem/176/testdata","discussion":"https://loj.ac/discussion/problem/176"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"这是一道模板题。\r\n\r\n给你两个序列 $K_i$ 和 $B_i$，要求支持在线进行如下操作：\r\n\r\n1. 给 $X > 0$，对于每个 $B_i$，变成 $B_i + K_iX$。\r\n\r\n2. 给 $L, R, Y$，求出在 $i \\in [L, R]$ 中第 $Y$ 大的 $B_i$ 值。\r\n\r\n3. 修改一组 $K_i, B_i$。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行输入三个正整数 $N, Q$。\r\n\r\n接下来一行，输入 $N$ 个整数表示 $K_i$。\r\n\r\n接下来一行，输入 $N$ 个整数表示 $B_i$。\r\n\r\n接下来共 $Q$ 行，每行首先输入一个整数表示操作编号，分别有以下三种情况：\r\n\r\n- $1\\ X$\r\n- $2\\ L\\ R\\ Y$\r\n- $3\\ i\\ k\\ b$\r\n\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 $2$ 询问，输出一个整数表示答案。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n\r\n```plain\r\n3 10\r\n-1 3 1\r\n1 -3 0\r\n2 1 3 1\r\n2 1 3 2\r\n2 1 3 3\r\n1 1\r\n2 1 3 1\r\n2 1 3 2\r\n2 1 3 3\r\n3 2 0 2\r\n2 2 3 1\r\n2 2 3 2\r\n```\r\n\r\n#### 样例输出\r\n\r\n```plain\r\n1\r\n0\r\n-3\r\n1\r\n0\r\n0\r\n2\r\n1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，保证 $1\\le N, Q\\le 2\\times 10^5; 1\\le Y \\le \\min(R - L + 1, 30); X, |K_i| \\le 10^6, |B_i| \\le 10^{18}$。\r\n"}]}