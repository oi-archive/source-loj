{"title":"「HNOI2016」序列","time_limit":1000,"memory_limit":256,"tags":["2016","HNOI","线段树","莫队","单调栈","数据结构"],"operation":{"submit":"https://loj.ac/problem/2051#submit_code","submissions":"https://loj.ac/submissions?problem_id=2051","statistics":"https://loj.ac/problem/2051/statistics/fastest","testdata":"https://loj.ac/problem/2051/testdata","discussion":"https://loj.ac/discussion/problem/2051"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给定长度为 $ n $ 的序列：$ a_1, a_2, \\cdots , a_n $，记为 $ a[1 \\colon n] $。类似地，$ a[l \\colon r] $（$ 1 \\leq l \\leq r \\leq N$）是指序列：$ a_{l}, a_{l+1}, \\cdots ,a_{r-1}, a_r $。若 $1\\leq l \\leq s \\leq t \\leq r \\leq n$，则称 $ a[s \\colon t] $是 $ a[l \\colon r] $ 的子序列。\r\n\r\n现在有 $ q $ 个询问，每个询问给定两个数 $ l $ 和 $ r $，$ 1 \\leq l \\leq r \\leq n $，求 $ a[l \\colon r] $ 的不同子序列的最小值之和。例如，给定序列\r\n $ 5, 2, 4, 1, 3 $，询问给定的两个数为 $ 1 $ 和 $ 3 $，那么 $ a[1 \\colon 3] $ 有 $ 6 $ 个子序列 $a[1 \\colon 1], a[2 \\colon 2], a[3 \\colon 3], a[1 \\colon 2],a[2 \\colon 3], a[1 \\colon 3] $，这 $6 $ 个子序列的最小值之和为 $5+2+4+2+2+2=17$。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入文件的第一行包含两个整数 $ n $ 和 $ q $，分别代表序列长度和询问数。  \r\n接下来一行，包含 $ n $ 个整数，以空格隔开，第 $ i $ 个整数为 $ a_i $，即序列第 $i$ 个元素的值。  \r\n接下来 $ q $ 行，每行包含两个整数 $ l $ 和 $ r $，代表一次询问。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每次询问，输出一行，代表询问的答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5 \r\n5 2 4 1 3 \r\n1 5 \r\n1 3 \r\n2 4 \r\n3 5 \r\n2 5\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n28 \r\n17 \r\n11 \r\n11 \r\n17\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$ 1 \\leq n,q \\leq 100000 ,|a_i| \\leq 10^9$"}]}